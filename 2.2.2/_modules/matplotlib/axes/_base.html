<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>matplotlib.axes._base — Matplotlib 2.2.2 documentation</title>
<link href="../../../_static/mpl.css" rel="stylesheet" type="text/css"/>
<link href="../../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../../../_static/gallery.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.2.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
<script src="../../../_static/jquery.js" type="text/javascript"></script>
<script src="../../../_static/underscore.js" type="text/javascript"></script>
<script src="../../../_static/doctools.js" type="text/javascript"></script>
<link href="../../../_static/opensearch.xml" rel="search" title="Search within Matplotlib 2.2.2 documentation" type="application/opensearchdescription+xml"/>
<link href="../../../_static/favicon.ico" rel="shortcut icon"/>
<link href="../../../genindex.html" rel="index" title="Index"/>
<link href="../../../search.html" rel="search" title="Search"/>
<link href="../../../index.html" rel="top" title="Matplotlib 2.2.2 documentation"/>
<link href="../../matplotlib.html" rel="up" title="matplotlib"/>
<link href="https://matplotlib.org/_modules/matplotlib/axes/_base.html" rel="canonical"/>
<link href="https://matplotlib.org/_modules/matplotlib/axes/_base.html" rel="canonical"/></head>
<body><div id="old-version-banner">
            You are reading documentation for a static version of Matplotlib.
            <a href="https://matplotlib.org/_modules/matplotlib/axes/_base.html">This page may have been updated.</a>
</div>
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px; position: relative;">
<a href="../../../index.html">
<div style="float: left; position: absolute; width: 496px; bottom: 0; padding-bottom: 24px"><span style="float: right; color: #789; background: white">Version 2.2.2</span></div>
<img alt="matplotlib" border="0" height="125px" src="../../../_static/logo2.png"/></a>
<!-- The "Fork me on github" ribbon -->
<div id="forkongithub"><a href="https://github.com/matplotlib/matplotlib">Fork me on GitHub</a></div>
</div>
<div class="related">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a accesskey="I" href="../../../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../../../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li><a href="../../../index.html">home</a>| </li>
<li><a href="../../../gallery/index.html">examples</a>| </li>
<li><a href="../../../tutorials/index.html">tutorials</a>| </li>
<li><a href="../../../api/pyplot_summary.html">pyplot</a>| </li>
<li><a href="../../../contents.html">docs</a> »</li>
<li><a href="../../index.html">Module code</a> »</li>
<li><a accesskey="U" href="../../matplotlib.html">matplotlib</a> »</li>
</ul>
</div>
<div class="sphinxsidebar">
<div class="sphinxsidebarwrapper">
<div id="searchbox" role="search" style="display: none">
<h3>Quick search</h3>
<div class="searchformwrapper">
<form action="../../../search.html" class="search" method="get">
<input name="q" type="text"/>
<input type="submit" value="Go"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><div class="relations">
<h3>Related Topics</h3>
<ul>
<li><a href="../../../contents.html">Documentation overview</a><ul>
<li><a href="../../index.html">Module code</a><ul>
<li><a href="../../matplotlib.html">matplotlib</a><ul>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="document">
<div class="documentwrapper">
<div class="bodywrapper">
<div class="body">
<h1>Source code for matplotlib.axes._base</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">OrderedDict</span>

<span class="kn">import</span> <span class="nn">six</span>
<span class="kn">from</span> <span class="nn">six.moves</span> <span class="k">import</span> <span class="n">xrange</span>

<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="k">import</span> <span class="n">attrgetter</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">matplotlib</span>

<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">cbook</span>
<span class="kn">from</span> <span class="nn">matplotlib.cbook</span> <span class="k">import</span> <span class="p">(</span><span class="n">_check_1d</span><span class="p">,</span> <span class="n">_string_to_bool</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span>
                              <span class="n">index_of</span><span class="p">,</span> <span class="n">get_label</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">docstring</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">mcolors</span>
<span class="kn">import</span> <span class="nn">matplotlib.lines</span> <span class="k">as</span> <span class="nn">mlines</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">mpatches</span>
<span class="kn">import</span> <span class="nn">matplotlib.artist</span> <span class="k">as</span> <span class="nn">martist</span>
<span class="kn">import</span> <span class="nn">matplotlib.transforms</span> <span class="k">as</span> <span class="nn">mtransforms</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mticker</span>
<span class="kn">import</span> <span class="nn">matplotlib.axis</span> <span class="k">as</span> <span class="nn">maxis</span>
<span class="kn">import</span> <span class="nn">matplotlib.scale</span> <span class="k">as</span> <span class="nn">mscale</span>
<span class="kn">import</span> <span class="nn">matplotlib.spines</span> <span class="k">as</span> <span class="nn">mspines</span>
<span class="kn">import</span> <span class="nn">matplotlib.font_manager</span> <span class="k">as</span> <span class="nn">font_manager</span>
<span class="kn">import</span> <span class="nn">matplotlib.text</span> <span class="k">as</span> <span class="nn">mtext</span>
<span class="kn">import</span> <span class="nn">matplotlib.image</span> <span class="k">as</span> <span class="nn">mimage</span>
<span class="kn">from</span> <span class="nn">matplotlib.offsetbox</span> <span class="k">import</span> <span class="n">OffsetBox</span>
<span class="kn">from</span> <span class="nn">matplotlib.artist</span> <span class="k">import</span> <span class="n">allow_rasterization</span>
<span class="kn">from</span> <span class="nn">matplotlib.legend</span> <span class="k">import</span> <span class="n">Legend</span>

<span class="kn">from</span> <span class="nn">matplotlib.rcsetup</span> <span class="k">import</span> <span class="n">cycler</span>
<span class="kn">from</span> <span class="nn">matplotlib.rcsetup</span> <span class="k">import</span> <span class="n">validate_axisbelow</span>

<span class="n">rcParams</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span>

<span class="n">is_string_like</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">is_string_like</span>
<span class="n">is_sequence_of_strings</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">is_sequence_of_strings</span>

<span class="n">_hold_msg</span> <span class="o">=</span> <span class="s2">"""axes.hold is deprecated.</span>
<span class="s2">    See the API Changes document (http://matplotlib.org/api/api_changes.html)</span>
<span class="s2">    for more details."""</span>


<span class="k">def</span> <span class="nf">_process_plot_format</span><span class="p">(</span><span class="n">fmt</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Process a MATLAB style color/line style format string.  Return a</span>
<span class="sd">    (*linestyle*, *color*) tuple as a result of the processing.  Default</span>
<span class="sd">    values are ('-', 'b').  Example format strings include:</span>

<span class="sd">    * 'ko': black circles</span>
<span class="sd">    * '.b': blue dots</span>
<span class="sd">    * 'r--': red dashed lines</span>
<span class="sd">    * 'C2--': the third color in the color cycle, dashed lines</span>

<span class="sd">    .. seealso::</span>

<span class="sd">        :func:`~matplotlib.Line2D.lineStyles` and</span>
<span class="sd">        :func:`~matplotlib.pyplot.colors`</span>
<span class="sd">            for all possible styles and color format string.</span>
<span class="sd">    """</span>

    <span class="n">linestyle</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">marker</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Is fmt just a colorspec?</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>

        <span class="c1"># We need to differentiate grayscale '1.0' from tri_down marker '1'</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fmtint</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span>  <span class="c1"># Yes</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fmt</span> <span class="o">!=</span> <span class="n">fmtint</span><span class="p">:</span>
                <span class="c1"># user definitely doesn't want tri_down marker</span>
                <span class="k">return</span> <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span>  <span class="c1"># Yes</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># ignore converted color</span>
                <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">pass</span>  <span class="c1"># No, not just a color.</span>

    <span class="c1"># handle the multi char special cases and strip them from the</span>
    <span class="c1"># string</span>
    <span class="k">if</span> <span class="n">fmt</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'--'</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">'--'</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'--'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fmt</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'-.'</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">'-.'</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'-.'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fmt</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">' '</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">'None'</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">' '</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>

    <span class="n">chars</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">fmt</span><span class="p">]</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">chars</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">chars</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mlines</span><span class="o">.</span><span class="n">lineStyles</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">'Illegal format string "</span><span class="si">%s</span><span class="s1">"; two linestyle symbols'</span> <span class="o">%</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">linestyle</span> <span class="o">=</span> <span class="n">c</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mlines</span><span class="o">.</span><span class="n">lineMarkers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">'Illegal format string "</span><span class="si">%s</span><span class="s1">"; two marker symbols'</span> <span class="o">%</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">c</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">get_named_colors_mapping</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">'Illegal format string "</span><span class="si">%s</span><span class="s1">"; two color symbols'</span> <span class="o">%</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">c</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">'C'</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">color_cycle_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">chars</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="s2">"C</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">color_cycle_number</span><span class="p">))</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">'Unrecognized character </span><span class="si">%c</span><span class="s1"> in format string'</span> <span class="o">%</span> <span class="n">c</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'lines.linestyle'</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">'None'</span>
    <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="s1">'None'</span>

    <span class="k">return</span> <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span>


<span class="k">class</span> <span class="nc">_process_plot_var_args</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Process variable length arguments to the plot command, so that</span>
<span class="sd">    plot commands like the following are supported::</span>

<span class="sd">      plot(t, s)</span>
<span class="sd">      plot(t1, s1, t2, s2)</span>
<span class="sd">      plot(t1, s1, 'ko', t2, s2)</span>
<span class="sd">      plot(t1, s1, 'ko', t2, s2, 'r--', t3, e3)</span>

<span class="sd">    an arbitrary number of *x*, *y*, *fmt* are allowed</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="s1">'plot'</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span class="n">command</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># note: it is not possible to pickle a itertools.cycle instance</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">'axes'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span> <span class="s1">'command'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_prop_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">args</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">prop_cycler</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.prop_cycle'</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prop_cycler</span> <span class="o">=</span> <span class="n">cycler</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">prop_cycler</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="n">prop_cycler</span><span class="p">)</span>
        <span class="c1"># This should make a copy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prop_keys</span> <span class="o">=</span> <span class="n">prop_cycler</span><span class="o">.</span><span class="n">keys</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'xunits'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">'polar'</span><span class="p">:</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'thetaunits'</span><span class="p">,</span> <span class="n">xunits</span><span class="p">)</span>

            <span class="n">yunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'yunits'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">'polar'</span><span class="p">:</span>
                <span class="n">yunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'runits'</span><span class="p">,</span> <span class="n">yunits</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">xunits</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">xunits</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">yunits</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">yunits</span><span class="p">)</span>

        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grab_next_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">get_next_color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return the next color in the cycle."""</span>
        <span class="k">if</span> <span class="s1">'color'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prop_keys</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'k'</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prop_cycler</span><span class="p">)[</span><span class="s1">'color'</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">set_lineprops</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">'plot'</span><span class="p">,</span> <span class="s1">'set_lineprops only works with "plot"'</span>
        <span class="n">line</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_patchprops</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fill_poly</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">'fill'</span><span class="p">,</span> <span class="s1">'set_patchprops only works with "fill"'</span>
        <span class="n">fill_poly</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_xy_from_xy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">bx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">by</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">!=</span> <span class="s1">'plot'</span><span class="p">:</span>
                <span class="c1"># the Line2D class can handle unitized data, with</span>
                <span class="c1"># support for post hoc unit changes etc.  Other mpl</span>
                <span class="c1"># artists, e.g., Polygon which _process_plot_var_args</span>
                <span class="c1"># also serves on calls to fill, cannot.  So this is a</span>
                <span class="c1"># hack to say: if you are not "plot", which is</span>
                <span class="c1"># creating Line2D, then convert the data now to</span>
                <span class="c1"># floats.  If you are plot, pass the raw data through</span>
                <span class="c1"># to Line2D which will handle the conversion.  So</span>
                <span class="c1"># polygons will not support post hoc conversions of</span>
                <span class="c1"># the unit type since they are not storing the orig</span>
                <span class="c1"># data.  Hopefully we can rationalize this at a later</span>
                <span class="c1"># date - JDH</span>
                <span class="k">if</span> <span class="n">bx</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="c1"># like asanyarray, but converts scalar to array, and doesn't change</span>
        <span class="c1"># existing compatible sequences</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">_check_1d</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">_check_1d</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"x and y must have same first dimension, but "</span>
                             <span class="s2">"have shapes </span><span class="si">{}</span><span class="s2"> and </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">y</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"x and y can be no greater than 2-D, but have "</span>
                             <span class="s2">"shapes </span><span class="si">{}</span><span class="s2"> and </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">y</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">_getdefaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore</span><span class="p">,</span> <span class="o">*</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Only advance the cycler if the cycler has information that</span>
<span class="sd">        is not specified in any of the supplied tuple of dicts.</span>
<span class="sd">        Ignore any keys specified in the `ignore` set.</span>

<span class="sd">        Returns a copy of defaults dictionary if there are any</span>
<span class="sd">        keys that are not found in any of the supplied dictionaries.</span>
<span class="sd">        If the supplied dictionaries have non-None values for</span>
<span class="sd">        everything the property cycler has, then just return</span>
<span class="sd">        an empty dictionary. Ignored keys are excluded from the</span>
<span class="sd">        returned dictionary.</span>

<span class="sd">        """</span>
        <span class="n">prop_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prop_keys</span>
        <span class="k">if</span> <span class="n">ignore</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ignore</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">prop_keys</span> <span class="o">=</span> <span class="n">prop_keys</span> <span class="o">-</span> <span class="n">ignore</span>

        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="nb">all</span><span class="p">(</span><span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
               <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">prop_keys</span><span class="p">):</span>
            <span class="c1"># Need to copy this dictionary or else the next time around</span>
            <span class="c1"># in the cycle, the dictionary could be missing entries.</span>
            <span class="n">default_dict</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prop_cycler</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">ignore</span><span class="p">:</span>
                <span class="n">default_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">default_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="n">default_dict</span>

    <span class="k">def</span> <span class="nf">_setdefaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">defaults</span><span class="p">,</span> <span class="o">*</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Given a defaults dictionary, and any other dictionaries,</span>
<span class="sd">        update those other dictionaries with information in defaults if</span>
<span class="sd">        none of the other dictionaries contains that information.</span>

<span class="sd">        """</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">defaults</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">kw</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_makeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kw</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Don't modify the original kw.</span>
        <span class="n">kw</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">default_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getdefaults</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setdefaults</span><span class="p">(</span><span class="n">default_dict</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>
        <span class="n">seg</span> <span class="o">=</span> <span class="n">mlines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seg</span>

    <span class="k">def</span> <span class="nf">_makefill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kw</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Don't modify the original kw.</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># Ignore 'marker'-related properties as they aren't Polygon</span>
        <span class="c1"># properties, but they are Line2D properties, and so they are</span>
        <span class="c1"># likely to appear in the default cycler construction.</span>
        <span class="c1"># This is done here to the defaults dictionary as opposed to the</span>
        <span class="c1"># other two dictionaries because we do want to capture when a</span>
        <span class="c1"># *user* explicitly specifies a marker which should be an error.</span>
        <span class="c1"># We also want to prevent advancing the cycler if there are no</span>
        <span class="c1"># defaults needed after ignoring the given properties.</span>
        <span class="n">ignores</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'marker'</span><span class="p">,</span> <span class="s1">'markersize'</span><span class="p">,</span> <span class="s1">'markeredgecolor'</span><span class="p">,</span>
                   <span class="s1">'markerfacecolor'</span><span class="p">,</span> <span class="s1">'markeredgewidth'</span><span class="p">}</span>
        <span class="c1"># Also ignore anything provided by *kwargs*.</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ignores</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

        <span class="c1"># Only using the first dictionary to use as basis</span>
        <span class="c1"># for getting defaults for back-compat reasons.</span>
        <span class="c1"># Doing it with both seems to mess things up in</span>
        <span class="c1"># various places (probably due to logic bugs elsewhere).</span>
        <span class="n">default_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getdefaults</span><span class="p">(</span><span class="n">ignores</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setdefaults</span><span class="p">(</span><span class="n">default_dict</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>

        <span class="c1"># Looks like we don't want "color" to be interpreted to</span>
        <span class="c1"># mean both facecolor and edgecolor for some reason.</span>
        <span class="c1"># So the "kw" dictionary is thrown out, and only its</span>
        <span class="c1"># 'color' value is kept and translated as a 'facecolor'.</span>
        <span class="c1"># This design should probably be revisited as it increases</span>
        <span class="c1"># complexity.</span>
        <span class="n">facecolor</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'color'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># Throw out 'color' as it is now handled as a facecolor</span>
        <span class="n">default_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'color'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># To get other properties set from the cycler</span>
        <span class="c1"># modify the kwargs dictionary.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setdefaults</span><span class="p">(</span><span class="n">default_dict</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>

        <span class="n">seg</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">x</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">],</span>
                                          <span class="n">y</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">])),</span>
                               <span class="n">facecolor</span><span class="o">=</span><span class="n">facecolor</span><span class="p">,</span>
                               <span class="n">fill</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'fill'</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                               <span class="n">closed</span><span class="o">=</span><span class="n">kw</span><span class="p">[</span><span class="s1">'closed'</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_patchprops</span><span class="p">(</span><span class="n">seg</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seg</span>

    <span class="k">def</span> <span class="nf">_plot_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tup</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">_process_plot_format</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">tup</span> <span class="o">=</span> <span class="n">tup</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'third arg must be a format string'</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="c1"># Don't allow any None value; These will be up-converted</span>
        <span class="c1"># to one element array of None which causes problems</span>
        <span class="c1"># downstream.</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tup</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"x and y must not be None"</span><span class="p">)</span>

        <span class="n">kw</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">((</span><span class="s1">'linestyle'</span><span class="p">,</span> <span class="s1">'marker'</span><span class="p">,</span> <span class="s1">'color'</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">kw</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

        <span class="k">if</span> <span class="s1">'label'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'label'</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">'label'</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_label</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">_check_1d</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">_check_1d</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">index_of</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy_from_xy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">'plot'</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeline</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kw</span><span class="p">[</span><span class="s1">'closed'</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'closed'</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makefill</span>

        <span class="n">ncx</span><span class="p">,</span> <span class="n">ncy</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ncx</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">ncy</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">ncx</span> <span class="o">!=</span> <span class="n">ncy</span><span class="p">:</span>
            <span class="n">cbook</span><span class="o">.</span><span class="n">warn_deprecated</span><span class="p">(</span><span class="s2">"2.2"</span><span class="p">,</span> <span class="s2">"cycling among columns of inputs "</span>
                                  <span class="s2">"with non-matching shapes is deprecated."</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">ncx</span><span class="p">,</span> <span class="n">ncy</span><span class="p">)):</span>
            <span class="n">seg</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">[:,</span> <span class="n">j</span> <span class="o">%</span> <span class="n">ncx</span><span class="p">],</span> <span class="n">y</span><span class="p">[:,</span> <span class="n">j</span> <span class="o">%</span> <span class="n">ncy</span><span class="p">],</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">_grab_next_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">while</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">this</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
                <span class="n">this</span> <span class="o">+=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_args</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">seg</span>


<span class="k">class</span> <span class="nc">_AxesBase</span><span class="p">(</span><span class="n">martist</span><span class="o">.</span><span class="n">Artist</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    """</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">"rectilinear"</span>

    <span class="n">_shared_x_axes</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Grouper</span><span class="p">()</span>
    <span class="n">_shared_y_axes</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Grouper</span><span class="p">()</span>
    <span class="n">_twinned_axes</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Grouper</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">"</span><span class="si">{0}</span><span class="s2">(</span><span class="si">{1[0]:g}</span><span class="s2">,</span><span class="si">{1[1]:g}</span><span class="s2">;</span><span class="si">{1[2]:g}</span><span class="s2">x</span><span class="si">{1[3]:g}</span><span class="s2">)"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span>
                 <span class="n">facecolor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># defaults to rc axes.facecolor</span>
                 <span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">sharex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># use Axes instance's xaxis info</span>
                 <span class="n">sharey</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># use Axes instance's yaxis info</span>
                 <span class="n">label</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span>
                 <span class="n">xscale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">yscale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span>
                 <span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Build an :class:`Axes` instance in</span>
<span class="sd">        :class:`~matplotlib.figure.Figure` *fig* with</span>
<span class="sd">        *rect=[left, bottom, width, height]* in</span>
<span class="sd">        :class:`~matplotlib.figure.Figure` coordinates</span>

<span class="sd">        Optional keyword arguments:</span>

<span class="sd">          ================   =========================================</span>
<span class="sd">          Keyword            Description</span>
<span class="sd">          ================   =========================================</span>
<span class="sd">          *adjustable*       [ 'box' | 'datalim' ]</span>
<span class="sd">          *alpha*            float: the alpha transparency (can be None)</span>
<span class="sd">          *anchor*           [ 'C', 'SW', 'S', 'SE', 'E', 'NE', 'N',</span>
<span class="sd">                               'NW', 'W' ]</span>
<span class="sd">          *aspect*           [ 'auto' | 'equal' | aspect_ratio ]</span>
<span class="sd">          *autoscale_on*     bool; whether to autoscale the *viewlim*</span>
<span class="sd">          *axisbelow*        [ bool | 'line' ] draw the grids</span>
<span class="sd">                             and ticks below or above most other artists,</span>
<span class="sd">                             or below lines but above patches</span>
<span class="sd">          *cursor_props*     a (*float*, *color*) tuple</span>
<span class="sd">          *figure*           a :class:`~matplotlib.figure.Figure`</span>
<span class="sd">                             instance</span>
<span class="sd">          *frame_on*         bool; whether to draw the axes frame</span>
<span class="sd">          *label*            the axes label</span>
<span class="sd">          *navigate*         bool</span>
<span class="sd">          *navigate_mode*    [ 'PAN' | 'ZOOM' | None ] the navigation</span>
<span class="sd">                             toolbar button status</span>
<span class="sd">          *position*         [left, bottom, width, height] in</span>
<span class="sd">                             class:`~matplotlib.figure.Figure` coords</span>
<span class="sd">          *sharex*           an class:`~matplotlib.axes.Axes` instance</span>
<span class="sd">                             to share the x-axis with</span>
<span class="sd">          *sharey*           an class:`~matplotlib.axes.Axes` instance</span>
<span class="sd">                             to share the y-axis with</span>
<span class="sd">          *title*            the title string</span>
<span class="sd">          *visible*          bool, whether the axes is visible</span>
<span class="sd">          *xlabel*           the xlabel</span>
<span class="sd">          *xlim*             (*xmin*, *xmax*) view limits</span>
<span class="sd">          *xscale*           [%(scale)s]</span>
<span class="sd">          *xticklabels*      sequence of strings</span>
<span class="sd">          *xticks*           sequence of floats</span>
<span class="sd">          *ylabel*           the ylabel strings</span>
<span class="sd">          *ylim*             (*ymin*, *ymax*) view limits</span>
<span class="sd">          *yscale*           [%(scale)s]</span>
<span class="sd">          *yticklabels*      sequence of strings</span>
<span class="sd">          *yticks*           sequence of floats</span>
<span class="sd">          ================   =========================================</span>
<span class="sd">        """</span> <span class="o">%</span> <span class="p">{</span><span class="s1">'scale'</span><span class="p">:</span> <span class="s1">' | '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span><span class="nb">repr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">mscale</span><span class="o">.</span><span class="n">get_scale_names</span><span class="p">()])}</span>
        <span class="n">martist</span><span class="o">.</span><span class="n">Artist</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">rect</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="o">*</span><span class="n">rect</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">width</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Width and height specified must be non-negative'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_originalPosition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
        <span class="c1"># self.set_axes(self)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_aspect</span> <span class="o">=</span> <span class="s1">'auto'</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="s1">'box'</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_anchor</span> <span class="o">=</span> <span class="s1">'C'</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="o">=</span> <span class="n">sharex</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="o">=</span> <span class="n">sharey</span>
        <span class="k">if</span> <span class="n">sharex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sharex</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sharey</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sharey</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_axes_locator</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"axes_locator"</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gen_axes_spines</span><span class="p">()</span>

        <span class="c1"># this call may differ for non-sep axes, e.g., polar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_axis</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">facecolor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">facecolor</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.facecolor'</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_facecolor</span> <span class="o">=</span> <span class="n">facecolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span> <span class="o">=</span> <span class="n">frameon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.axisbelow'</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_hold</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.hold'</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hold</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hold</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># a dict from events to (id, func)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>

        <span class="c1"># funcs used to format x and y - fall back on major formatters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_xdata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_ydata</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_navigate_mode</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xscale</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="n">xscale</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">yscale</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="n">yscale</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="s1">'units finalize'</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_units_changed</span><span class="p">(</span><span class="n">scalex</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ycid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="s1">'units finalize'</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_units_changed</span><span class="p">(</span><span class="n">scaley</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
            <span class="n">top</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.top'</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.minor.top'</span><span class="p">],</span>
            <span class="n">bottom</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.bottom'</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.minor.bottom'</span><span class="p">],</span>
            <span class="n">labeltop</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.labeltop'</span><span class="p">]</span> <span class="ow">and</span>
                      <span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.minor.top'</span><span class="p">]),</span>
            <span class="n">labelbottom</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.labelbottom'</span><span class="p">]</span> <span class="ow">and</span>
                         <span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.minor.bottom'</span><span class="p">]),</span>
            <span class="n">left</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.left'</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.minor.left'</span><span class="p">],</span>
            <span class="n">right</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.right'</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.minor.right'</span><span class="p">],</span>
            <span class="n">labelleft</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.labelleft'</span><span class="p">]</span> <span class="ow">and</span>
                       <span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.minor.left'</span><span class="p">]),</span>
            <span class="n">labelright</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.labelright'</span><span class="p">]</span> <span class="ow">and</span>
                        <span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.minor.right'</span><span class="p">]),</span>
            <span class="n">which</span><span class="o">=</span><span class="s1">'minor'</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
            <span class="n">top</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.top'</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.major.top'</span><span class="p">],</span>
            <span class="n">bottom</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.bottom'</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.major.bottom'</span><span class="p">],</span>
            <span class="n">labeltop</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.labeltop'</span><span class="p">]</span> <span class="ow">and</span>
                      <span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.major.top'</span><span class="p">]),</span>
            <span class="n">labelbottom</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.labelbottom'</span><span class="p">]</span> <span class="ow">and</span>
                         <span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.major.bottom'</span><span class="p">]),</span>
            <span class="n">left</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.left'</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.major.left'</span><span class="p">],</span>
            <span class="n">right</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.right'</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.major.right'</span><span class="p">],</span>
            <span class="n">labelleft</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.labelleft'</span><span class="p">]</span> <span class="ow">and</span>
                       <span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.major.left'</span><span class="p">]),</span>
            <span class="n">labelright</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.labelright'</span><span class="p">]</span> <span class="ow">and</span>
                        <span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.major.right'</span><span class="p">]),</span>
            <span class="n">which</span><span class="o">=</span><span class="s1">'major'</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_layoutbox</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_poslayoutbox</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># The renderer should be re-created by the figure, and then cached at</span>
        <span class="c1"># that point.</span>
        <span class="n">state</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">_AxesBase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">()</span>
        <span class="n">state</span><span class="p">[</span><span class="s1">'_cachedRenderer'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">state</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'_layoutbox'</span><span class="p">)</span>
        <span class="n">state</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'_poslayoutbox'</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">state</span>

    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">state</span>
        <span class="c1"># put the _remove_method back on all artists contained within the axes</span>
        <span class="k">for</span> <span class="n">container_name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'lines'</span><span class="p">,</span> <span class="s1">'collections'</span><span class="p">,</span> <span class="s1">'tables'</span><span class="p">,</span> <span class="s1">'patches'</span><span class="p">,</span>
                               <span class="s1">'texts'</span><span class="p">,</span> <span class="s1">'images'</span><span class="p">]:</span>
            <span class="n">container</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container_name</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">container</span><span class="p">:</span>
                <span class="n">artist</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layoutbox</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_poslayoutbox</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        get the axes bounding box in display space; *args* and</span>
<span class="sd">        *kwargs* are empty</span>
<span class="sd">        """</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span>
        <span class="n">x_pad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_tick_padding</span><span class="p">()</span>
        <span class="n">y_pad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_tick_padding</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="p">([[</span><span class="n">bbox</span><span class="o">.</span><span class="n">x0</span> <span class="o">-</span> <span class="n">x_pad</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">y0</span> <span class="o">-</span> <span class="n">y_pad</span><span class="p">],</span>
                                 <span class="p">[</span><span class="n">bbox</span><span class="o">.</span><span class="n">x1</span> <span class="o">+</span> <span class="n">x_pad</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">y1</span> <span class="o">+</span> <span class="n">y_pad</span><span class="p">]])</span>

    <span class="k">def</span> <span class="nf">_init_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">"move this out of __init__ because non-separable axes don't use it"</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span> <span class="o">=</span> <span class="n">maxis</span><span class="o">.</span><span class="n">XAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">'bottom'</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">'top'</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span> <span class="o">=</span> <span class="n">maxis</span><span class="o">.</span><span class="n">YAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">'left'</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">'right'</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the `.Figure` for this `.Axes`.</span>

<span class="sd">        .. ACCEPTS: `.Figure`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fig : `.Figure`</span>
<span class="sd">        """</span>
        <span class="n">martist</span><span class="o">.</span><span class="n">Artist</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformedBbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="p">,</span>
                                                <span class="n">fig</span><span class="o">.</span><span class="n">transFigure</span><span class="p">)</span>
        <span class="c1"># these will be updated later as data is added</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">null</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformWrapper</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_lim_and_transforms</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_set_lim_and_transforms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        set the *_xaxis_transform*, *_yaxis_transform*,</span>
<span class="sd">        *transScale*, *transData*, *transLimits* and *transAxes*</span>
<span class="sd">        transformations.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This method is primarily used by rectilinear projections</span>
<span class="sd">            of the :class:`~matplotlib.axes.Axes` class, and is meant</span>
<span class="sd">            to be overridden by new kinds of projection axes that need</span>
<span class="sd">            different transformations and limits. (See</span>
<span class="sd">            :class:`~matplotlib.projections.polar.PolarAxes` for an</span>
<span class="sd">            example.</span>

<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxTransformTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

        <span class="c1"># Transforms the x and y axis separately by a scale factor.</span>
        <span class="c1"># It is assumed that this part will have non-linear components</span>
        <span class="c1"># (e.g., for a log scale).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformWrapper</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">())</span>

        <span class="c1"># An affine transformation on the data, generally to limit the</span>
        <span class="c1"># range of the axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transLimits</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxTransformFrom</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformedBbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span><span class="p">))</span>

        <span class="c1"># The parentheses are important for efficiency here -- they</span>
        <span class="c1"># group the last two (which are usually affines) separately</span>
        <span class="c1"># from the first (which, with log-scaling can be non-affine).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transData</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transLimits</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_transform</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">'grid'</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the transformation used for drawing x-axis labels, ticks</span>
<span class="sd">        and gridlines.  The x-direction is in data coordinates and the</span>
<span class="sd">        y-direction is in axis coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            :class:`~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">'grid'</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_transform</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">'tick1'</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is bottom spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">'bottom'</span><span class="p">]</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">'tick2'</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is top spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">'top'</span><span class="p">]</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'unknown value for which'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis_text1_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the transformation used for drawing x-axis labels, which</span>
<span class="sd">        will add the given amount of padding (in points) between the</span>
<span class="sd">        axes and the label.  The x-direction is in data coordinates</span>
<span class="sd">        and the y-direction is in axis coordinates.  Returns a</span>
<span class="sd">        3-tuple of the form::</span>

<span class="sd">          (transform, valign, halign)</span>

<span class="sd">        where *valign* and *halign* are requested alignments for the</span>
<span class="sd">        text.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            :class:`~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        """</span>
        <span class="n">labels_align</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">"xtick.alignment"</span><span class="p">]</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">'tick1'</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">pad_points</span> <span class="o">/</span> <span class="mf">72.0</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="s2">"top"</span><span class="p">,</span> <span class="n">labels_align</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis_text2_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the transformation used for drawing the secondary x-axis</span>
<span class="sd">        labels, which will add the given amount of padding (in points)</span>
<span class="sd">        between the axes and the label.  The x-direction is in data</span>
<span class="sd">        coordinates and the y-direction is in axis coordinates.</span>
<span class="sd">        Returns a 3-tuple of the form::</span>

<span class="sd">          (transform, valign, halign)</span>

<span class="sd">        where *valign* and *halign* are requested alignments for the</span>
<span class="sd">        text.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            :class:`~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        """</span>
        <span class="n">labels_align</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">"xtick.alignment"</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">'tick2'</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pad_points</span> <span class="o">/</span> <span class="mf">72.0</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="s2">"bottom"</span><span class="p">,</span> <span class="n">labels_align</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaxis_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">'grid'</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the transformation used for drawing y-axis labels, ticks</span>
<span class="sd">        and gridlines.  The x-direction is in axis coordinates and the</span>
<span class="sd">        y-direction is in data coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            :class:`~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">'grid'</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">'tick1'</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is bottom spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">'left'</span><span class="p">]</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">'tick2'</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is top spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">'right'</span><span class="p">]</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'unknown value for which'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaxis_text1_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the transformation used for drawing y-axis labels, which</span>
<span class="sd">        will add the given amount of padding (in points) between the</span>
<span class="sd">        axes and the label.  The x-direction is in axis coordinates</span>
<span class="sd">        and the y-direction is in data coordinates.  Returns a 3-tuple</span>
<span class="sd">        of the form::</span>

<span class="sd">          (transform, valign, halign)</span>

<span class="sd">        where *valign* and *halign* are requested alignments for the</span>
<span class="sd">        text.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            :class:`~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        """</span>
        <span class="n">labels_align</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">"ytick.alignment"</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">'tick1'</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">pad_points</span> <span class="o">/</span> <span class="mf">72.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="n">labels_align</span><span class="p">,</span> <span class="s2">"right"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaxis_text2_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the transformation used for drawing the secondary y-axis</span>
<span class="sd">        labels, which will add the given amount of padding (in points)</span>
<span class="sd">        between the axes and the label.  The x-direction is in axis</span>
<span class="sd">        coordinates and the y-direction is in data coordinates.</span>
<span class="sd">        Returns a 3-tuple of the form::</span>

<span class="sd">          (transform, valign, halign)</span>

<span class="sd">        where *valign* and *halign* are requested alignments for the</span>
<span class="sd">        text.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            :class:`~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        """</span>
        <span class="n">labels_align</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">"ytick.alignment"</span><span class="p">]</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">'tick2'</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="n">pad_points</span> <span class="o">/</span> <span class="mf">72.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="n">labels_align</span><span class="p">,</span> <span class="s2">"left"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_transScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()))</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"lines"</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">line</span><span class="o">.</span><span class="n">_transformed_path</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get a copy of the axes rectangle as a `.Bbox`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        original : bool</span>
<span class="sd">            If ``True``, return the original position. Otherwise return the</span>
<span class="sd">            active position. For an explanation of the positions see</span>
<span class="sd">            `.set_position`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pos : `.Bbox`</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">original</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_originalPosition</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">'both'</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the axes position.</span>

<span class="sd">        Axes have two position attributes. The 'original' position is the</span>
<span class="sd">        position allocated for the Axes. The 'active' position is the</span>
<span class="sd">        position the Axes is actually drawn at. These positions are usually</span>
<span class="sd">        the same unless a fixed aspect is set to the Axes. See `.set_aspect`</span>
<span class="sd">        for details.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        pos : [left, bottom, width, height] or `~matplotlib.transforms.Bbox`</span>
<span class="sd">            The new position of the in `.Figure` coordinates.</span>

<span class="sd">        which : ['both' | 'active' | 'original'], optional</span>
<span class="sd">            Determines which position variables to change.</span>

<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">'both'</span><span class="p">)</span>
        <span class="c1"># because this is being called externally to the library we</span>
        <span class="c1"># zero the constrained layout parts.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layoutbox</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_poslayoutbox</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">'both'</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        private version of set_position.  Call this internally</span>
<span class="sd">        to get the same functionality of `get_position`, but not</span>
<span class="sd">        to take the axis out of the constrained_layout</span>
<span class="sd">        hierarchy.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxBase</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">'both'</span><span class="p">,</span> <span class="s1">'active'</span><span class="p">):</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">'both'</span><span class="p">,</span> <span class="s1">'original'</span><span class="p">):</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">_originalPosition</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">reset_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Reset the active position to the original position.</span>

<span class="sd">        This resets the a possible position change due to aspect constraints.</span>
<span class="sd">        For an explanation of the positions see `.set_position`.</span>
<span class="sd">        """</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="n">original</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">'active'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_axes_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locator</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the axes locator.</span>

<span class="sd">        .. ACCEPTS: a callable object which takes an axes instance and</span>
<span class="sd">           renderer and returns a bbox.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        locator : callable</span>
<span class="sd">            A locator function, which takes an axes and a renderer and returns</span>
<span class="sd">            a bbox.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axes_locator</span> <span class="o">=</span> <span class="n">locator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_axes_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Return the axes_locator.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axes_locator</span>

    <span class="k">def</span> <span class="nf">_set_artist_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="sd">"""set the boilerplate props for artists added to axes"""</span>
        <span class="n">a</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span><span class="o">.</span><span class="n">is_transform_set</span><span class="p">():</span>
            <span class="n">a</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>

        <span class="n">a</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">mouseover</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseover_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_gen_axes_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns the patch used to draw the background of the axes.  It</span>
<span class="sd">        is also used as the clipping path for any data elements on the</span>
<span class="sd">        axes.</span>

<span class="sd">        In the standard axes, this is a rectangle, but in other</span>
<span class="sd">        projections it may not be.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types.</span>

<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_gen_axes_spines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">'inches'</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns a dict whose keys are spine names and values are</span>
<span class="sd">        Line2D or Patch instances. Each element is used to draw a</span>
<span class="sd">        spine of the axes.</span>

<span class="sd">        In the standard axes, this is a single line segment, but in</span>
<span class="sd">        other projections it may not be.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types.</span>

<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">OrderedDict</span><span class="p">([</span>
            <span class="p">(</span><span class="s1">'left'</span><span class="p">,</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">'left'</span><span class="p">)),</span>
            <span class="p">(</span><span class="s1">'right'</span><span class="p">,</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">'right'</span><span class="p">)),</span>
            <span class="p">(</span><span class="s1">'bottom'</span><span class="p">,</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">'bottom'</span><span class="p">)),</span>
            <span class="p">(</span><span class="s1">'top'</span><span class="p">,</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">'top'</span><span class="p">))])</span>

    <span class="k">def</span> <span class="nf">cla</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Clear the current axes."""</span>
        <span class="c1"># Note: this is called by Axes.__init__()</span>

        <span class="c1"># stash the current visibility state</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">'patch'</span><span class="p">):</span>
            <span class="n">patch_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">patch_visible</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">xaxis_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span>
        <span class="n">yaxis_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">spine</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">):</span>
            <span class="n">spine</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">CallbackRegistry</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># major and minor are axis.Ticker class instances with</span>
            <span class="c1"># locator and formatter attributes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">minor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">minor</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">mscale</span><span class="o">.</span><span class="n">scale_factory</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_scale</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="s1">'linear'</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">minor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">minor</span>
            <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">mscale</span><span class="o">.</span><span class="n">scale_factory</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_scale</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="s1">'linear'</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="c1"># update the minor locator for x and y axis based on rcParams</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'xtick.minor.visible'</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'ytick.minor.visible'</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.xmargin'</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.ymargin'</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_use_sticky_edges</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>  <span class="c1"># needed?</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_get_lines</span> <span class="o">=</span> <span class="n">_process_plot_var_args</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_patches_for_fill</span> <span class="o">=</span> <span class="n">_process_plot_var_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">'fill'</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_gridOn</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.grid'</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patches</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">texts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artists</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">images</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouseover_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_image</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># strictly for pyplot via _sci, _gci</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend_</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collections</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># collection.Collection instances</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containers</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Disable grid on init to use rcParameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_gridOn</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.grid.which'</span><span class="p">],</span>
                  <span class="n">axis</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.grid.axis'</span><span class="p">])</span>
        <span class="n">props</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">(</span>
            <span class="n">size</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.titlesize'</span><span class="p">],</span>
            <span class="n">weight</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.titleweight'</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">'baseline'</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span> <span class="o">=</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">props</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">'baseline'</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span> <span class="o">=</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">props</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">'baseline'</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">'right'</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">title_offset_points</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.titlepad'</span><span class="p">]</span>
        <span class="c1"># refactor this out so it can be called in ax.set_title if</span>
        <span class="c1"># pad argument used...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_title_offset_trans</span><span class="p">(</span><span class="n">title_offset_points</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">_title</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">_title</span><span class="p">)</span>

        <span class="c1"># The patch draws the background of the axes.  We want this to be below</span>
        <span class="c1"># the other artists.  We use the frame to draw the edges so we are</span>
        <span class="c1"># setting the edgecolor to None.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gen_axes_patch</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_facecolor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s1">'None'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_axis_on</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">xaxis_visible</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">patch_visible</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">yaxis_visible</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">patch_visible</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="nd">@cbook</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span><span class="s2">"2.1"</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s2">"Axes.patch"</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">axesPatch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Clear the axes."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get the Axes facecolor."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">get_facecolor</span><span class="p">()</span>
    <span class="n">get_fc</span> <span class="o">=</span> <span class="n">get_facecolor</span>

    <span class="k">def</span> <span class="nf">set_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">"""Set the Axes facecolor.</span>

<span class="sd">        .. ACCEPTS: color</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        color : color</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_facecolor</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="n">set_fc</span> <span class="o">=</span> <span class="n">set_facecolor</span>

    <span class="k">def</span> <span class="nf">_set_title_offset_trans</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title_offset_points</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the offset for the title either from rcParams['axes.titlepad']</span>
<span class="sd">        or from set_title kwarg ``pad``.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titleOffsetTrans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span>
                <span class="mf">0.0</span><span class="p">,</span> <span class="n">title_offset_points</span> <span class="o">/</span> <span class="mf">72.0</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_title</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">):</span>
            <span class="n">_title</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">titleOffsetTrans</span><span class="p">)</span>
            <span class="n">_title</span><span class="o">.</span><span class="n">set_clip_box</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_prop_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the property cycle for any future plot commands on this Axes.</span>

<span class="sd">        set_prop_cycle(arg)</span>
<span class="sd">        set_prop_cycle(label, itr)</span>
<span class="sd">        set_prop_cycle(label1=itr1[, label2=itr2[, ...]])</span>

<span class="sd">        Form 1 simply sets given `Cycler` object.</span>

<span class="sd">        Form 2 creates and sets  a `Cycler` from a label and an iterable.</span>

<span class="sd">        Form 3 composes and sets  a `Cycler` as an inner product of the</span>
<span class="sd">        pairs of keyword arguments. In other words, all of the</span>
<span class="sd">        iterables are cycled simultaneously, as if through zip().</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        arg : Cycler</span>
<span class="sd">            Set the given Cycler.</span>
<span class="sd">            Can also be `None` to reset to the cycle defined by the</span>
<span class="sd">            current style.</span>

<span class="sd">        label : str</span>
<span class="sd">            The property key. Must be a valid `Artist` property.</span>
<span class="sd">            For example, 'color' or 'linestyle'. Aliases are allowed,</span>
<span class="sd">            such as 'c' for 'color' and 'lw' for 'linewidth'.</span>

<span class="sd">        itr : iterable</span>
<span class="sd">            Finite-length iterable of the property values. These values</span>
<span class="sd">            are validated and will raise a ValueError if invalid.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">            :func:`cycler`      Convenience function for creating your</span>
<span class="sd">                                own cyclers.</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">"Cannot supply both positional and keyword "</span>
                            <span class="s2">"arguments to this method."</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop_cycle</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prop_cycle</span> <span class="o">=</span> <span class="n">cycler</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_lines</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="n">prop_cycle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_patches_for_fill</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="n">prop_cycle</span><span class="p">)</span>

    <span class="nd">@cbook</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span><span class="s1">'1.5'</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">'`.set_prop_cycle`'</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_color_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clist</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the color cycle for any future plot commands on this Axes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clist</span>
<span class="sd">            A list of mpl color specifiers.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">clist</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Calling set_color_cycle() or set_prop_cycle() with None</span>
            <span class="c1"># effectively resets the cycle, but you can't do</span>
            <span class="c1"># set_prop_cycle('color', None). So we are special-casing this.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="s1">'color'</span><span class="p">,</span> <span class="n">clist</span><span class="p">)</span>

    <span class="nd">@cbook</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span><span class="s2">"2.0"</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ishold</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""return the HOLD status of the axes</span>

<span class="sd">        The `hold` mechanism is deprecated and will be removed in</span>
<span class="sd">        v3.0.</span>
<span class="sd">        """</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hold</span>

    <span class="nd">@cbook</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span><span class="s2">"2.0"</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">_hold_msg</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">hold</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the hold state.</span>

<span class="sd">        The ``hold`` mechanism is deprecated and will be removed in</span>
<span class="sd">        v3.0.  The behavior will remain consistent with the</span>
<span class="sd">        long-time default value of True.</span>

<span class="sd">        If *hold* is *None* (default), toggle the *hold* state.  Else</span>
<span class="sd">        set the *hold* state to boolean value *b*.</span>

<span class="sd">        Examples::</span>

<span class="sd">          # toggle hold</span>
<span class="sd">          hold()</span>

<span class="sd">          # turn hold on</span>
<span class="sd">          hold(True)</span>

<span class="sd">          # turn hold off</span>
<span class="sd">          hold(False)</span>

<span class="sd">        When hold is *True*, subsequent plot commands will be added to</span>
<span class="sd">        the current axes.  When hold is *False*, the current axes and</span>
<span class="sd">        figure will be cleared on the next plot command</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hold</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hold</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hold</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">get_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aspect</span>

    <span class="k">def</span> <span class="nf">set_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the aspect of the axis scaling, i.e. the ratio of y-unit to x-unit.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        aspect : ['auto' | 'equal'] or num</span>
<span class="sd">            Possible values:</span>

<span class="sd">            ========   ================================================</span>
<span class="sd">            value      description</span>
<span class="sd">            ========   ================================================</span>
<span class="sd">            'auto'     automatic; fill the position rectangle with data</span>
<span class="sd">            'equal'    same scaling from data to plot units for x and y</span>
<span class="sd">             num       a circle will be stretched such that the height</span>
<span class="sd">                       is num times the width. aspect=1 is the same as</span>
<span class="sd">                       aspect='equal'.</span>
<span class="sd">            ========   ================================================</span>

<span class="sd">        adjustable : None or ['box' | 'datalim'], optional</span>
<span class="sd">            If not ``None``, this defines which parameter will be adjusted to</span>
<span class="sd">            meet the required aspect. See `.set_adjustable` for further</span>
<span class="sd">            details.</span>

<span class="sd">        anchor : None or str or 2-tuple of float, optional</span>
<span class="sd">            If not ``None``, this defines where the Axes will be drawn if there</span>
<span class="sd">            is extra space due to aspect constraints. The most common way to</span>
<span class="sd">            to specify the anchor are abbreviations of cardinal directions:</span>

<span class="sd">            =====   =====================</span>
<span class="sd">            value   description</span>
<span class="sd">            =====   =====================</span>
<span class="sd">            'C'     centered</span>
<span class="sd">            'SW'    lower left corner</span>
<span class="sd">            'S'     middle of bottom edge</span>
<span class="sd">            'SE'    lower right corner</span>
<span class="sd">            etc.</span>
<span class="sd">            =====   =====================</span>

<span class="sd">            See `.set_anchor` for further details.</span>

<span class="sd">        share : bool, optional</span>
<span class="sd">            If ``True``, apply the settings to all shared Axes.</span>
<span class="sd">            Default is ``False``.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_adjustable</span>
<span class="sd">            defining the parameter to adjust in order to meet the required</span>
<span class="sd">            aspect.</span>
<span class="sd">        matplotlib.axes.Axes.set_anchor</span>
<span class="sd">            defining the position in case of extra space.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">aspect</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">'equal'</span><span class="p">,</span> <span class="s1">'auto'</span><span class="p">)):</span>
            <span class="n">aspect</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">aspect</span><span class="p">)</span>  <span class="c1"># raise ValueError if necessary</span>
        <span class="k">if</span> <span class="n">share</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                       <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_aspect</span> <span class="o">=</span> <span class="n">aspect</span>

        <span class="k">if</span> <span class="n">adjustable</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">adjustable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_adjustable</span><span class="p">(</span><span class="n">adjustable</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="n">share</span><span class="p">)</span>  <span class="c1"># Handle sharing.</span>

        <span class="k">if</span> <span class="n">anchor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_anchor</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="n">share</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_adjustable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span>

    <span class="k">def</span> <span class="nf">set_adjustable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adjustable</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Define which parameter the Axes will change to achieve a given aspect.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        adjustable : ['box' | 'datalim']</span>
<span class="sd">            If 'box', change the physical dimensions of the Axes.</span>
<span class="sd">            If 'datalim', change the ``x`` or ``y`` data limits.</span>

<span class="sd">        share : bool, optional</span>
<span class="sd">            If ``True``, apply the settings to all shared Axes.</span>
<span class="sd">            Default is ``False``.</span>

<span class="sd">        .. ACCEPTS: [ 'box' | 'datalim']</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            for a description of aspect handling.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Shared Axes (of which twinned Axes are a special case)</span>
<span class="sd">        impose restrictions on how aspect ratios can be imposed.</span>
<span class="sd">        For twinned Axes, use 'datalim'.  For Axes that share both</span>
<span class="sd">        x and y, use 'box'.  Otherwise, either 'datalim' or 'box'</span>
<span class="sd">        may be used.  These limitations are partly a requirement</span>
<span class="sd">        to avoid over-specification, and partly a result of the</span>
<span class="sd">        particular implementation we are currently using, in</span>
<span class="sd">        which the adjustments for aspect ratios are done sequentially</span>
<span class="sd">        and independently on each Axes as it is drawn.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">adjustable</span> <span class="o">==</span> <span class="s1">'box-forced'</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">"The 'box-forced' keyword argument is deprecated"</span>
                          <span class="s2">" since 2.2."</span><span class="p">,</span> <span class="n">cbook</span><span class="o">.</span><span class="n">mplDeprecation</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">adjustable</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">'box'</span><span class="p">,</span> <span class="s1">'datalim'</span><span class="p">,</span> <span class="s1">'box-forced'</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"argument must be 'box', or 'datalim'"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">share</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                       <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="n">adjustable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the anchor location.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_anchor</span>
<span class="sd">            for a description of the anchor.</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            for a description of aspect handling.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_anchor</span>

    <span class="k">def</span> <span class="nf">set_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Define the anchor location.</span>

<span class="sd">        The actual drawing area (active position) of the Axes may be smaller</span>
<span class="sd">        than the Bbox (original position) when a fixed aspect is required. The</span>
<span class="sd">        anchor defines where the drawing area will be located within the</span>
<span class="sd">        available space.</span>

<span class="sd">        .. ACCEPTS: [ 'C' | 'SW' | 'S' | 'SE' | 'E' | 'NE' | 'N' | 'NW' | 'W' ]</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        anchor : str or 2-tuple of floats</span>
<span class="sd">            The anchor position may be either:</span>

<span class="sd">            - a sequence (*cx*, *cy*). *cx* and *cy* may range from 0</span>
<span class="sd">              to 1, where 0 is left or bottom and 1 is right or top.</span>

<span class="sd">            - a string using cardinal directions as abbreviation:</span>

<span class="sd">              - 'C' for centered</span>
<span class="sd">              - 'S' (south) for bottom-center</span>
<span class="sd">              - 'SW' (south west) for bottom-left</span>
<span class="sd">              - etc.</span>

<span class="sd">              Here is an overview of the possible positions:</span>

<span class="sd">              +------+------+------+</span>
<span class="sd">              | 'NW' | 'N'  | 'NE' |</span>
<span class="sd">              +------+------+------+</span>
<span class="sd">              | 'W'  | 'C'  | 'E'  |</span>
<span class="sd">              +------+------+------+</span>
<span class="sd">              | 'SW' | 'S'  | 'SE' |</span>
<span class="sd">              +------+------+------+</span>

<span class="sd">        share : bool, optional</span>
<span class="sd">            If ``True``, apply the settings to all shared Axes.</span>
<span class="sd">            Default is ``False``.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            for a description of aspect handling.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">anchor</span> <span class="ow">in</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">coefs</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">anchor</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'argument must be among </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span>
                             <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">coefs</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">share</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                       <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_anchor</span> <span class="o">=</span> <span class="n">anchor</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_data_ratio</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns the aspect ratio of the raw data.</span>

<span class="sd">        This method is intended to be overridden by new projection</span>
<span class="sd">        types.</span>
<span class="sd">        """</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>

        <span class="n">xsize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="n">ysize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ysize</span> <span class="o">/</span> <span class="n">xsize</span>

    <span class="k">def</span> <span class="nf">get_data_ratio_log</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns the aspect ratio of the raw data in log scale.</span>
<span class="sd">        Will be used when both axis scales are in log.</span>
<span class="sd">        """</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>

        <span class="n">xsize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">xmin</span><span class="p">)),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="n">ysize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">ymax</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">ymin</span><span class="p">)),</span> <span class="mf">1e-30</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ysize</span> <span class="o">/</span> <span class="n">xsize</span>

    <span class="k">def</span> <span class="nf">apply_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Adjust the Axes for a specified data aspect ratio.</span>

<span class="sd">        Depending on `.get_adjustable` this will modify either the Axes box</span>
<span class="sd">        (position) or the view limits. In the former case, `.get_anchor`</span>
<span class="sd">        will affect the position.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This is called automatically when each Axes is drawn.  You may need</span>
<span class="sd">        to call it yourself if you need to update the Axes position and/or</span>
<span class="sd">        view limits before the Figure is drawn.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            for a description of aspect ratio handling.</span>
<span class="sd">        matplotlib.axes.Axes.set_adjustable</span>
<span class="sd">            defining the parameter to adjust in order to meet the required</span>
<span class="sd">            aspect.</span>
<span class="sd">        matplotlib.axes.Axes.set_anchor</span>
<span class="sd">            defining the position in case of extra space.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="n">original</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">aspect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_aspect</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s1">'polar'</span><span class="p">:</span>
            <span class="n">xscale</span><span class="p">,</span> <span class="n">yscale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xscale</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yscale</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">xscale</span> <span class="o">==</span> <span class="s2">"linear"</span> <span class="ow">and</span> <span class="n">yscale</span> <span class="o">==</span> <span class="s2">"linear"</span><span class="p">:</span>
                <span class="n">aspect_scale_mode</span> <span class="o">=</span> <span class="s2">"linear"</span>
            <span class="k">elif</span> <span class="n">xscale</span> <span class="o">==</span> <span class="s2">"log"</span> <span class="ow">and</span> <span class="n">yscale</span> <span class="o">==</span> <span class="s2">"log"</span><span class="p">:</span>
                <span class="n">aspect_scale_mode</span> <span class="o">=</span> <span class="s2">"log"</span>
            <span class="k">elif</span> <span class="p">((</span><span class="n">xscale</span> <span class="o">==</span> <span class="s2">"linear"</span> <span class="ow">and</span> <span class="n">yscale</span> <span class="o">==</span> <span class="s2">"log"</span><span class="p">)</span> <span class="ow">or</span>
                  <span class="p">(</span><span class="n">xscale</span> <span class="o">==</span> <span class="s2">"log"</span> <span class="ow">and</span> <span class="n">yscale</span> <span class="o">==</span> <span class="s2">"linear"</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">aspect</span> <span class="o">!=</span> <span class="s2">"auto"</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                        <span class="s1">'aspect is not supported for Axes with xscale=</span><span class="si">%s</span><span class="s1">, '</span>
                        <span class="s1">'yscale=</span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="p">(</span><span class="n">xscale</span><span class="p">,</span> <span class="n">yscale</span><span class="p">))</span>
                    <span class="n">aspect</span> <span class="o">=</span> <span class="s2">"auto"</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># some custom projections have their own scales.</span>
                <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">aspect_scale_mode</span> <span class="o">=</span> <span class="s2">"linear"</span>

        <span class="k">if</span> <span class="n">aspect</span> <span class="o">==</span> <span class="s1">'auto'</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">'active'</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">aspect</span> <span class="o">==</span> <span class="s1">'equal'</span><span class="p">:</span>
            <span class="n">A</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">A</span> <span class="o">=</span> <span class="n">aspect</span>

        <span class="n">figW</span><span class="p">,</span> <span class="n">figH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">get_size_inches</span><span class="p">()</span>
        <span class="n">fig_aspect</span> <span class="o">=</span> <span class="n">figH</span> <span class="o">/</span> <span class="n">figW</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'box'</span><span class="p">,</span> <span class="s1">'box-forced'</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">"Adjustable 'box' is not allowed in a"</span>
                                   <span class="s2">" twinned Axes.  Use 'datalim' instead."</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">aspect_scale_mode</span> <span class="o">==</span> <span class="s2">"log"</span><span class="p">:</span>
                <span class="n">box_aspect</span> <span class="o">=</span> <span class="n">A</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_ratio_log</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">box_aspect</span> <span class="o">=</span> <span class="n">A</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_ratio</span><span class="p">()</span>
            <span class="n">pb</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
            <span class="n">pb1</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">shrunk_to_aspect</span><span class="p">(</span><span class="n">box_aspect</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">fig_aspect</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">pb1</span><span class="o">.</span><span class="n">anchored</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_anchor</span><span class="p">(),</span> <span class="n">pb</span><span class="p">),</span> <span class="s1">'active'</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># reset active to original in case it had been changed</span>
        <span class="c1"># by prior use of 'box'</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">'active'</span><span class="p">)</span>

        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">aspect_scale_mode</span> <span class="o">==</span> <span class="s2">"log"</span><span class="p">:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">xmin</span><span class="p">),</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span>
            <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">ymin</span><span class="p">),</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">ymax</span><span class="p">)</span>

        <span class="n">xsize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="n">ysize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>

        <span class="n">l</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">box_aspect</span> <span class="o">=</span> <span class="n">fig_aspect</span> <span class="o">*</span> <span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="n">w</span><span class="p">)</span>
        <span class="n">data_ratio</span> <span class="o">=</span> <span class="n">box_aspect</span> <span class="o">/</span> <span class="n">A</span>

        <span class="n">y_expander</span> <span class="o">=</span> <span class="p">(</span><span class="n">data_ratio</span> <span class="o">*</span> <span class="n">xsize</span> <span class="o">/</span> <span class="n">ysize</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="c1"># If y_expander &gt; 0, the dy/dx viewLim ratio needs to increase</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y_expander</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.005</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">aspect_scale_mode</span> <span class="o">==</span> <span class="s2">"log"</span><span class="p">:</span>
            <span class="n">dL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span>
            <span class="n">dL_width</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">dL</span><span class="o">.</span><span class="n">x1</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">dL</span><span class="o">.</span><span class="n">x0</span><span class="p">)</span>
            <span class="n">dL_height</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">dL</span><span class="o">.</span><span class="n">y1</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">dL</span><span class="o">.</span><span class="n">y0</span><span class="p">)</span>
            <span class="n">xr</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="n">dL_width</span>
            <span class="n">yr</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="n">dL_height</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span>
            <span class="n">xr</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="n">dL</span><span class="o">.</span><span class="n">width</span>
            <span class="n">yr</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="n">dL</span><span class="o">.</span><span class="n">height</span>

        <span class="n">xmarg</span> <span class="o">=</span> <span class="n">xsize</span> <span class="o">-</span> <span class="n">xr</span>
        <span class="n">ymarg</span> <span class="o">=</span> <span class="n">ysize</span> <span class="o">-</span> <span class="n">yr</span>
        <span class="n">Ysize</span> <span class="o">=</span> <span class="n">data_ratio</span> <span class="o">*</span> <span class="n">xsize</span>
        <span class="n">Xsize</span> <span class="o">=</span> <span class="n">ysize</span> <span class="o">/</span> <span class="n">data_ratio</span>
        <span class="n">Xmarg</span> <span class="o">=</span> <span class="n">Xsize</span> <span class="o">-</span> <span class="n">xr</span>
        <span class="n">Ymarg</span> <span class="o">=</span> <span class="n">Ysize</span> <span class="o">-</span> <span class="n">yr</span>
        <span class="c1"># Setting these targets to, e.g., 0.05*xr does not seem to</span>
        <span class="c1"># help.</span>
        <span class="n">xm</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ym</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">shared_x</span> <span class="o">=</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span>
        <span class="n">shared_y</span> <span class="o">=</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span>
        <span class="c1"># Not sure whether we need this check:</span>
        <span class="k">if</span> <span class="n">shared_x</span> <span class="ow">and</span> <span class="n">shared_y</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">"adjustable='datalim' is not allowed when both"</span>
                               <span class="s2">" axes are shared."</span><span class="p">)</span>

        <span class="c1"># If y is shared, then we are only allowed to change x, etc.</span>
        <span class="k">if</span> <span class="n">shared_y</span><span class="p">:</span>
            <span class="n">adjust_y</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">xmarg</span> <span class="o">&gt;</span> <span class="n">xm</span> <span class="ow">and</span> <span class="n">ymarg</span> <span class="o">&gt;</span> <span class="n">ym</span><span class="p">:</span>
                <span class="n">adjy</span> <span class="o">=</span> <span class="p">((</span><span class="n">Ymarg</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y_expander</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="p">(</span><span class="n">Xmarg</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y_expander</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">adjy</span> <span class="o">=</span> <span class="n">y_expander</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="n">adjust_y</span> <span class="o">=</span> <span class="n">shared_x</span> <span class="ow">or</span> <span class="n">adjy</span>  <span class="c1"># (Ymarg &gt; xmarg)</span>

        <span class="k">if</span> <span class="n">adjust_y</span><span class="p">:</span>
            <span class="n">yc</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">ymax</span><span class="p">)</span>
            <span class="n">y0</span> <span class="o">=</span> <span class="n">yc</span> <span class="o">-</span> <span class="n">Ysize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="n">yc</span> <span class="o">+</span> <span class="n">Ysize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="k">if</span> <span class="n">aspect_scale_mode</span> <span class="o">==</span> <span class="s2">"log"</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ybound</span><span class="p">((</span><span class="mf">10.</span> <span class="o">**</span> <span class="n">y0</span><span class="p">,</span> <span class="mf">10.</span> <span class="o">**</span> <span class="n">y1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ybound</span><span class="p">((</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xc</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">xmax</span><span class="p">)</span>
            <span class="n">x0</span> <span class="o">=</span> <span class="n">xc</span> <span class="o">-</span> <span class="n">Xsize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="n">xc</span> <span class="o">+</span> <span class="n">Xsize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="k">if</span> <span class="n">aspect_scale_mode</span> <span class="o">==</span> <span class="s2">"log"</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xbound</span><span class="p">((</span><span class="mf">10.</span> <span class="o">**</span> <span class="n">x0</span><span class="p">,</span> <span class="mf">10.</span> <span class="o">**</span> <span class="n">x1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xbound</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""Set axis properties.</span>

<span class="sd">        Valid signatures::</span>

<span class="sd">          xmin, xmax, ymin, ymax = axis()</span>
<span class="sd">          xmin, xmax, ymin, ymax = axis(list_arg)</span>
<span class="sd">          xmin, xmax, ymin, ymax = axis(string_arg)</span>
<span class="sd">          xmin, xmax, ymin, ymax = axis(**kwargs)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        v : list of float or {'on', 'off', 'equal', 'tight', 'scaled',\</span>
<span class="sd">            'normal', 'auto', 'image', 'square'}</span>
<span class="sd">            Optional positional argument</span>

<span class="sd">            Axis data limits set from a list; or a command relating to axes:</span>

<span class="sd">                ========== ================================================</span>
<span class="sd">                Value      Description</span>
<span class="sd">                ========== ================================================</span>
<span class="sd">                'on'       Toggle axis lines and labels on</span>
<span class="sd">                'off'      Toggle axis lines and labels off</span>
<span class="sd">                'equal'    Equal scaling by changing limits</span>
<span class="sd">                'scaled'   Equal scaling by changing box dimensions</span>
<span class="sd">                'tight'    Limits set such that all data is shown</span>
<span class="sd">                'auto'     Automatic scaling, fill rectangle with data</span>
<span class="sd">                'normal'   Same as 'auto'; deprecated</span>
<span class="sd">                'image'    'scaled' with axis limits equal to data limits</span>
<span class="sd">                'square'   Square plot; similar to 'scaled', but initially\</span>
<span class="sd">                           forcing xmax-xmin = ymax-ymin</span>
<span class="sd">                ========== ================================================</span>

<span class="sd">        emit : bool, optional</span>
<span class="sd">            Passed to set_{x,y}lim functions, if observers</span>
<span class="sd">            are notified of axis limit change</span>

<span class="sd">        xmin, ymin, xmax, ymax : float, optional</span>
<span class="sd">            The axis limits to be set</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xmin, xmax, ymin, ymax : float</span>
<span class="sd">            The axis limits</span>

<span class="sd">        """</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span>

        <span class="n">emit</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'emit'</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">'on'</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_axis_on</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">'off'</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">'equal'</span><span class="p">,</span> <span class="s1">'tight'</span><span class="p">,</span> <span class="s1">'scaled'</span><span class="p">,</span> <span class="s1">'normal'</span><span class="p">,</span>
                       <span class="s1">'auto'</span><span class="p">,</span> <span class="s1">'image'</span><span class="p">,</span> <span class="s1">'square'</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">'auto'</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="c1"># self.apply_aspect()</span>
                <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">'equal'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">'equal'</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">'datalim'</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">'scaled'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">'equal'</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">'box'</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">'C'</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Req. by Mark Bakker</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">'tight'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">'image'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">'equal'</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">'box'</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">'C'</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">'square'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">'equal'</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">'box'</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">'C'</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">xlim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
                    <span class="n">ylim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
                    <span class="n">edge_size</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">xlim</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ylim</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">edge_size</span><span class="p">],</span>
                                  <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">edge_size</span><span class="p">],</span>
                                  <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Unrecognized string </span><span class="si">%s</span><span class="s1"> to axis; '</span>
                                 <span class="s1">'try on or off'</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="n">xmin</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'xmin'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">xmax</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'xmax'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">auto</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># turn off autoscaling, unless...</span>
            <span class="k">if</span> <span class="n">xmin</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">xmax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">auto</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># leave autoscaling state alone</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">)</span>

            <span class="n">ymin</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'ymin'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">ymax</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'ymax'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">auto</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># turn off autoscaling, unless...</span>
            <span class="k">if</span> <span class="n">ymin</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ymax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">auto</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># leave autoscaling state alone</span>
            <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span>

        <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'v must contain [xmin xmax ymin ymax]'</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">v</span>

    <span class="k">def</span> <span class="nf">get_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return the `Legend` instance, or None if no legend is defined."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_</span>

    <span class="k">def</span> <span class="nf">get_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""return a list of Axes images contained by the Axes"""</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">'AxesImage'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return a list of lines contained by the Axes"""</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">'Line2D'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return the XAxis instance."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span>

    <span class="k">def</span> <span class="nf">get_xgridlines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get the x grid lines as a list of `Line2D` instances."""</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">'Line2D xgridline'</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_gridlines</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_xticklines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get the x tick lines as a list of `Line2D` instances."""</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">'Line2D xtickline'</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_ticklines</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_yaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return the YAxis instance."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span>

    <span class="k">def</span> <span class="nf">get_ygridlines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get the y grid lines as a list of `Line2D` instances."""</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">'Line2D ygridline'</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_gridlines</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_yticklines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get the y tick lines as a list of `Line2D` instances."""</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">'Line2D ytickline'</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_ticklines</span><span class="p">())</span>

    <span class="c1"># Adding and tracking artists</span>

    <span class="k">def</span> <span class="nf">_sci</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">im</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        helper for :func:`~matplotlib.pyplot.sci`;</span>
<span class="sd">        do not use elsewhere.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">contour</span><span class="o">.</span><span class="n">ContourSet</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">im</span><span class="o">.</span><span class="n">collections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">"ContourSet must be in current Axes"</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">im</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span> <span class="ow">and</span> <span class="n">im</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"Argument must be an image, collection, or ContourSet in "</span>
                <span class="s2">"this Axes"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_image</span> <span class="o">=</span> <span class="n">im</span>

    <span class="k">def</span> <span class="nf">_gci</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Helper for :func:`~matplotlib.pyplot.gci`;</span>
<span class="sd">        do not use elsewhere.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_image</span>

    <span class="k">def</span> <span class="nf">has_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Return *True* if any artists have been added to axes.</span>

<span class="sd">        This should not be used to determine whether the *dataLim*</span>
<span class="sd">        need to be updated, and may not actually be useful for</span>
<span class="sd">        anything.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">)</span> <span class="o">+</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span> <span class="o">+</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span> <span class="o">+</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">add_artist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="sd">"""Add any :class:`~matplotlib.artist.Artist` to the axes.</span>

<span class="sd">        Use `add_artist` only for artists for which there is no dedicated</span>
<span class="sd">        "add" method; and if necessary, use a method such as `update_datalim`</span>
<span class="sd">        to manually update the dataLim if the artist is to be included in</span>
<span class="sd">        autoscaling.</span>

<span class="sd">        Returns the artist.</span>
<span class="sd">        """</span>
        <span class="n">a</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">a</span>

    <span class="k">def</span> <span class="nf">add_collection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">autolim</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Add a :class:`~matplotlib.collections.Collection` instance</span>
<span class="sd">        to the axes.</span>

<span class="sd">        Returns the collection.</span>
<span class="sd">        """</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">label</span><span class="p">:</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">'_collection</span><span class="si">%d</span><span class="s1">'</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">collection</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">autolim</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_datalim</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">get_datalim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">))</span>

        <span class="n">collection</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">collection</span>

    <span class="k">def</span> <span class="nf">add_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Add a :class:`~matplotlib.image.AxesImage` to the axes.</span>

<span class="sd">        Returns the image.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
            <span class="n">image</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">'_image</span><span class="si">%d</span><span class="s1">'</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="n">image</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">image</span>

    <span class="k">def</span> <span class="nf">_update_image_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">get_extent</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">update_datalim</span><span class="p">(((</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">),</span> <span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">add_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Add a :class:`~matplotlib.lines.Line2D` to the list of plot</span>
<span class="sd">        lines</span>

<span class="sd">        Returns the line.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_line_limits</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">'_line</span><span class="si">%d</span><span class="s1">'</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">line</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">line</span>

    <span class="k">def</span> <span class="nf">_add_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txt</span><span class="p">):</span>
        <span class="sd">"""</span>

<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">txt</span>

    <span class="k">def</span> <span class="nf">_update_line_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Figures out the data limit of the given line, updating self.dataLim.</span>
<span class="sd">        """</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">line_trans</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">line_trans</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">:</span>
            <span class="n">data_path</span> <span class="o">=</span> <span class="n">path</span>

        <span class="k">elif</span> <span class="nb">any</span><span class="p">(</span><span class="n">line_trans</span><span class="o">.</span><span class="n">contains_branch_seperately</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)):</span>
            <span class="c1"># identify the transform to go from line's coordinates</span>
            <span class="c1"># to data coordinates</span>
            <span class="n">trans_to_data</span> <span class="o">=</span> <span class="n">line_trans</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span>

            <span class="c1"># if transData is affine we can use the cached non-affine component</span>
            <span class="c1"># of line's path. (since the non-affine part of line_trans is</span>
            <span class="c1"># entirely encapsulated in trans_to_data).</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">is_affine</span><span class="p">:</span>
                <span class="n">line_trans_path</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">_get_transformed_path</span><span class="p">()</span>
                <span class="n">na_path</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">line_trans_path</span><span class="o">.</span><span class="n">get_transformed_path_and_affine</span><span class="p">()</span>
                <span class="n">data_path</span> <span class="o">=</span> <span class="n">trans_to_data</span><span class="o">.</span><span class="n">transform_path_affine</span><span class="p">(</span><span class="n">na_path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data_path</span> <span class="o">=</span> <span class="n">trans_to_data</span><span class="o">.</span><span class="n">transform_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># for backwards compatibility we update the dataLim with the</span>
            <span class="c1"># coordinate range of the given path, even though the coordinate</span>
            <span class="c1"># systems are completely different. This may occur in situations</span>
            <span class="c1"># such as when ax.transAxes is passed through for absolute</span>
            <span class="c1"># positioning.</span>
            <span class="n">data_path</span> <span class="o">=</span> <span class="n">path</span>

        <span class="k">if</span> <span class="n">data_path</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span> <span class="o">=</span> <span class="n">line_trans</span><span class="o">.</span><span class="n">contains_branch_seperately</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">update_from_path</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span><span class="p">,</span>
                                          <span class="n">updatex</span><span class="o">=</span><span class="n">updatex</span><span class="p">,</span>
                                          <span class="n">updatey</span><span class="o">=</span><span class="n">updatey</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Add a :class:`~matplotlib.patches.Patch` *p* to the list of</span>
<span class="sd">        axes patches; the clipbox will be set to the Axes clipping</span>
<span class="sd">        box.  If the transform is not set, it will be set to</span>
<span class="sd">        :attr:`transData`.</span>

<span class="sd">        Returns the patch.</span>
<span class="sd">        """</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_patch_limits</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">p</span>

    <span class="k">def</span> <span class="nf">_update_patch_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">patch</span><span class="p">):</span>
        <span class="sd">"""update the data limits for patch *p*"""</span>
        <span class="c1"># hist can add zero height Rectangles, which is useful to keep</span>
        <span class="c1"># the bins, counts and patches lined up, but it throws off log</span>
        <span class="c1"># scaling.  We'll ignore rects with zero height or width in</span>
        <span class="c1"># the auto-scaling</span>

        <span class="c1"># cannot check for '==0' since unitized data may not compare to zero</span>
        <span class="c1"># issue #2150 - we update the limits if patch has non zero width</span>
        <span class="c1"># or height.</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">patch</span><span class="p">,</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">)</span> <span class="ow">and</span>
                <span class="p">((</span><span class="ow">not</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_width</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_height</span><span class="p">()))):</span>
            <span class="k">return</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span><span class="o">.</span><span class="n">vertices</span>
        <span class="k">if</span> <span class="n">vertices</span><span class="o">.</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">xys</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_patch_transform</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_data_transform</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">:</span>
                <span class="n">patch_to_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">patch</span><span class="o">.</span><span class="n">get_data_transform</span><span class="p">()</span> <span class="o">-</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
                <span class="n">xys</span> <span class="o">=</span> <span class="n">patch_to_data</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">xys</span><span class="p">)</span>

            <span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span><span class="o">.</span>\
                <span class="n">contains_branch_seperately</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_datalim</span><span class="p">(</span><span class="n">xys</span><span class="p">,</span> <span class="n">updatex</span><span class="o">=</span><span class="n">updatex</span><span class="p">,</span>
                                <span class="n">updatey</span><span class="o">=</span><span class="n">updatey</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tab</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Add a :class:`~matplotlib.table.Table` instance to the</span>
<span class="sd">        list of axes tables</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tab: `matplotlib.table.Table`</span>
<span class="sd">            Table instance</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        `matplotlib.table.Table`: the table.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tab</span>

    <span class="k">def</span> <span class="nf">add_container</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Add a :class:`~matplotlib.container.Container` instance</span>
<span class="sd">        to the axes.</span>

<span class="sd">        Returns the collection.</span>
<span class="sd">        """</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">label</span><span class="p">:</span>
            <span class="n">container</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">'_container</span><span class="si">%d</span><span class="s1">'</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
        <span class="n">container</span><span class="o">.</span><span class="n">set_remove_method</span><span class="p">(</span><span class="k">lambda</span> <span class="n">h</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">h</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">container</span>

    <span class="k">def</span> <span class="nf">_on_units_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Callback for processing changes to axis units.</span>

<span class="sd">        Currently forces updates of data limits and view limits.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relim</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">scalex</span><span class="o">=</span><span class="n">scalex</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="n">scaley</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">relim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visible_only</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Recompute the data limits based on current artists. If you want to</span>
<span class="sd">        exclude invisible artists from the calculation, set</span>
<span class="sd">        ``visible_only=True``</span>

<span class="sd">        At present, :class:`~matplotlib.collections.Collection`</span>
<span class="sd">        instances are not supported.</span>
<span class="sd">        """</span>
        <span class="c1"># Collections are deliberately not supported (yet); see</span>
        <span class="c1"># the TODO note in artists.py.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">set_points</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">null</span><span class="p">()</span><span class="o">.</span><span class="n">get_points</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">visible_only</span> <span class="ow">or</span> <span class="n">line</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_line_limits</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">visible_only</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_patch_limits</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">visible_only</span> <span class="ow">or</span> <span class="n">image</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_image_limits</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_datalim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xys</span><span class="p">,</span> <span class="n">updatex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">updatey</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Update the data lim bbox with seq of xy tups or equiv. 2-D array</span>
<span class="sd">        """</span>
        <span class="c1"># if no data is set currently, the bbox will ignore its</span>
        <span class="c1"># limits and set the bound to be the bounds of the xydata.</span>
        <span class="c1"># Otherwise, it will compute the bounds of it's current data</span>
        <span class="c1"># and the data in xydata</span>
        <span class="n">xys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">xys</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">xys</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">update_from_data_xy</span><span class="p">(</span><span class="n">xys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span><span class="p">,</span>
                                         <span class="n">updatex</span><span class="o">=</span><span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span><span class="o">=</span><span class="n">updatey</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">update_datalim_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Update the datalim to include the given</span>
<span class="sd">        :class:`~matplotlib.transforms.Bbox` *bounds*</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">union</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="p">,</span> <span class="n">bounds</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">_process_unit_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xdata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ydata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""Look for unit *kwargs* and update the axis instances as necessary"""</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">xdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># we only need to update if there is nothing set yet.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">have_units</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">xdata</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ydata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># we only need to update if there is nothing set yet.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">have_units</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">ydata</span><span class="p">)</span>

        <span class="c1"># process kwargs 2nd since these will override default units</span>
        <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'xunits'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">'polar'</span><span class="p">:</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'thetaunits'</span><span class="p">,</span> <span class="n">xunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">xunits</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">xunits</span><span class="p">)</span>
                <span class="c1"># If the units being set imply a different converter,</span>
                <span class="c1"># we need to update.</span>
                <span class="k">if</span> <span class="n">xdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">xdata</span><span class="p">)</span>

            <span class="n">yunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'yunits'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">'polar'</span><span class="p">:</span>
                <span class="n">yunits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'runits'</span><span class="p">,</span> <span class="n">yunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">yunits</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">yunits</span><span class="p">)</span>
                <span class="c1"># If the units being set imply a different converter,</span>
                <span class="c1"># we need to update.</span>
                <span class="k">if</span> <span class="n">ydata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">ydata</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">kwargs</span>

    <span class="k">def</span> <span class="nf">in_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Return *True* if the given *mouseevent* (in display coords)</span>
<span class="sd">        is in the Axes</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">mouseevent</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_autoscale_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get whether autoscaling is applied for both axes on plot commands</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span>

    <span class="k">def</span> <span class="nf">get_autoscalex_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get whether autoscaling for the x-axis is applied on plot commands</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span>

    <span class="k">def</span> <span class="nf">get_autoscaley_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get whether autoscaling for the y-axis is applied on plot commands</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span>

    <span class="k">def</span> <span class="nf">set_autoscale_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set whether autoscaling is applied on plot commands</span>

<span class="sd">        .. ACCEPTS: bool</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">set_autoscalex_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set whether autoscaling for the x-axis is applied on plot commands</span>

<span class="sd">        .. ACCEPTS: bool</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">set_autoscaley_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set whether autoscaling for the y-axis is applied on plot commands</span>

<span class="sd">        .. ACCEPTS: bool</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="n">b</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">use_sticky_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        When autoscaling, whether to obey all `Artist.sticky_edges`.</span>

<span class="sd">        Default is ``True``.</span>

<span class="sd">        Setting this to ``False`` ensures that the specified margins</span>
<span class="sd">        will be applied, even if the plot includes an image, for</span>
<span class="sd">        example, which would otherwise force a view limit to coincide</span>
<span class="sd">        with its data limit.</span>

<span class="sd">        The changing this property does not change the plot until</span>
<span class="sd">        `autoscale` or `autoscale_view` is called.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_use_sticky_edges</span>

    <span class="nd">@use_sticky_edges</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">use_sticky_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_use_sticky_edges</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="c1"># No effect until next autoscaling, which will mark the axes as stale.</span>

    <span class="k">def</span> <span class="nf">set_xmargin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set padding of X data limits prior to autoscaling.</span>

<span class="sd">        *m* times the data interval will be added to each</span>
<span class="sd">        end of that interval before it is used in autoscaling.</span>
<span class="sd">        For example, if your data is in the range [0, 2], a factor of</span>
<span class="sd">        ``m = 0.1`` will result in a range [-0.2, 2.2].</span>

<span class="sd">        Negative values -0.5 &lt; m &lt; 0 will result in clipping of the data range.</span>
<span class="sd">        I.e. for a data range [0, 2], a factor of ``m = -0.1`` will result in</span>
<span class="sd">        a range [0.2, 1.8].</span>

<span class="sd">        .. ACCEPTS: float greater than -0.5</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        m : float greater than -0.5</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"margin must be greater than -0.5"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="o">=</span> <span class="n">m</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">set_ymargin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set padding of Y data limits prior to autoscaling.</span>

<span class="sd">        *m* times the data interval will be added to each</span>
<span class="sd">        end of that interval before it is used in autoscaling.</span>
<span class="sd">        For example, if your data is in the range [0, 2], a factor of</span>
<span class="sd">        ``m = 0.1`` will result in a range [-0.2, 2.2].</span>

<span class="sd">        Negative values -0.5 &lt; m &lt; 0 will result in clipping of the data range.</span>
<span class="sd">        I.e. for a data range [0, 2], a factor of ``m = -0.1`` will result in</span>
<span class="sd">        a range [0.2, 1.8].</span>

<span class="sd">        .. ACCEPTS: float greater than -0.5</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        m : float greater than -0.5</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"margin must be greater than -0.5"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="o">=</span> <span class="n">m</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">margins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set or retrieve autoscaling margins.</span>

<span class="sd">        signatures::</span>

<span class="sd">            margins()</span>

<span class="sd">        returns xmargin, ymargin</span>

<span class="sd">        ::</span>

<span class="sd">            margins(margin)</span>

<span class="sd">            margins(xmargin, ymargin)</span>

<span class="sd">            margins(x=xmargin, y=ymargin)</span>

<span class="sd">            margins(..., tight=False)</span>

<span class="sd">        All three forms above set the xmargin and ymargin parameters.</span>
<span class="sd">        All keyword parameters are optional.  A single argument</span>
<span class="sd">        specifies both xmargin and ymargin. The padding added to the end of</span>
<span class="sd">        each interval is *margin* times the data interval. The *margin* must</span>
<span class="sd">        be a float in the range [0, 1].</span>

<span class="sd">        The *tight* parameter is passed to :meth:`autoscale_view`</span>
<span class="sd">        , which is executed after a margin is changed; the default here is</span>
<span class="sd">        *True*, on the assumption that when margins are specified, no</span>
<span class="sd">        additional padding to match tick marks is usually desired.  Setting</span>
<span class="sd">        *tight* to *None* will preserve the previous setting.</span>

<span class="sd">        Specifying any margin changes only the autoscaling; for example,</span>
<span class="sd">        if *xmargin* is not None, then *xmargin* times the X data</span>
<span class="sd">        interval will be added to each end of that interval before</span>
<span class="sd">        it is used in autoscaling.</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kw</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span>

        <span class="n">tight</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'tight'</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">mx</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'x'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">my</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'y'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">mx</span> <span class="o">=</span> <span class="n">my</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">mx</span><span class="p">,</span> <span class="n">my</span> <span class="o">=</span> <span class="n">args</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"more than two arguments were supplied"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xmargin</span><span class="p">(</span><span class="n">mx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">my</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ymargin</span><span class="p">(</span><span class="n">my</span><span class="p">)</span>

        <span class="n">scalex</span> <span class="o">=</span> <span class="p">(</span><span class="n">mx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">scaley</span> <span class="o">=</span> <span class="p">(</span><span class="n">my</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="n">tight</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="n">scalex</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="n">scaley</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_rasterization_zorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        z : float or None</span>
<span class="sd">            zorder below which artists are rasterized.  ``None`` means that</span>
<span class="sd">            artists do not get rasterized based on zorder.</span>

<span class="sd">            .. ACCEPTS: float or None</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span> <span class="o">=</span> <span class="n">z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_rasterization_zorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return the zorder value below which artists will be rasterized."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span>

    <span class="k">def</span> <span class="nf">autoscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">'both'</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Autoscale the axis view to the data (toggle).</span>

<span class="sd">        Convenience method for simple axis view autoscaling.</span>
<span class="sd">        It turns autoscaling on or off, and then,</span>
<span class="sd">        if autoscaling for either axis is on, it performs</span>
<span class="sd">        the autoscaling on the specified axis or axes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        enable : bool or None, optional</span>
<span class="sd">            True (default) turns autoscaling on, False turns it off.</span>
<span class="sd">            None leaves the autoscaling state unchanged.</span>

<span class="sd">        axis : ['both' | 'x' | 'y'], optional</span>
<span class="sd">            which axis to operate on; default is 'both'</span>

<span class="sd">        tight: bool or None, optional</span>
<span class="sd">            If True, set view limits to data limits;</span>
<span class="sd">            if False, let the locator and margins expand the view limits;</span>
<span class="sd">            if None, use tight scaling if the only artist is an image,</span>
<span class="sd">            otherwise treat *tight* as False.</span>
<span class="sd">            The *tight* setting is retained for future autoscaling</span>
<span class="sd">            until it is explicitly changed.</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">enable</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">scalex</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">scaley</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">scalex</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">scaley</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'x'</span><span class="p">,</span> <span class="s1">'both'</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span>
                <span class="n">scalex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'y'</span><span class="p">,</span> <span class="s1">'both'</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span>
                <span class="n">scaley</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span>
        <span class="k">if</span> <span class="n">tight</span> <span class="ow">and</span> <span class="n">scalex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">tight</span> <span class="ow">and</span> <span class="n">scaley</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="n">tight</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="n">scalex</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="n">scaley</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">autoscale_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Autoscale the view limits using the data limits.</span>

<span class="sd">        You can selectively autoscale only a single axis, e.g., the xaxis by</span>
<span class="sd">        setting *scaley* to *False*.  The autoscaling preserves any</span>
<span class="sd">        axis direction reversal that has already been done.</span>

<span class="sd">        If *tight* is *False*, the axis major locator will be used</span>
<span class="sd">        to expand the view limits if rcParams['axes.autolimit_mode']</span>
<span class="sd">        is 'round_numbers'.  Note that any margins that are in effect</span>
<span class="sd">        will be applied first, regardless of whether *tight* is</span>
<span class="sd">        *True* or *False*.  Specifying *tight* as *True* or *False*</span>
<span class="sd">        saves the setting as a private attribute of the Axes; specifying</span>
<span class="sd">        it as *None* (the default) applies the previously saved value.</span>

<span class="sd">        The data limits are not updated automatically when artist data are</span>
<span class="sd">        changed after the artist has been added to an Axes instance.  In that</span>
<span class="sd">        case, use :meth:`matplotlib.axes.Axes.relim` prior to calling</span>
<span class="sd">        autoscale_view.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">tight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">tight</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_sticky_edges</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span><span class="p">):</span>
            <span class="n">stickies</span> <span class="o">=</span> <span class="p">[</span><span class="n">artist</span><span class="o">.</span><span class="n">sticky_edges</span> <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">()]</span>
            <span class="n">x_stickies</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">sticky</span><span class="o">.</span><span class="n">x</span> <span class="k">for</span> <span class="n">sticky</span> <span class="ow">in</span> <span class="n">stickies</span><span class="p">],</span> <span class="p">[])</span>
            <span class="n">y_stickies</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">sticky</span><span class="o">.</span><span class="n">y</span> <span class="k">for</span> <span class="n">sticky</span> <span class="ow">in</span> <span class="n">stickies</span><span class="p">],</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xscale</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'log'</span><span class="p">:</span>
                <span class="n">x_stickies</span> <span class="o">=</span> <span class="p">[</span><span class="n">xs</span> <span class="k">for</span> <span class="n">xs</span> <span class="ow">in</span> <span class="n">x_stickies</span> <span class="k">if</span> <span class="n">xs</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yscale</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'log'</span><span class="p">:</span>
                <span class="n">y_stickies</span> <span class="o">=</span> <span class="p">[</span><span class="n">ys</span> <span class="k">for</span> <span class="n">ys</span> <span class="ow">in</span> <span class="n">y_stickies</span> <span class="k">if</span> <span class="n">ys</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># Small optimization.</span>
            <span class="n">x_stickies</span><span class="p">,</span> <span class="n">y_stickies</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>

        <span class="k">def</span> <span class="nf">handle_single_axis</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">autoscaleon</span><span class="p">,</span> <span class="n">shared_axes</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span>
                               <span class="n">minpos</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">margin</span><span class="p">,</span> <span class="n">stickies</span><span class="p">,</span> <span class="n">set_bound</span><span class="p">):</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">scale</span> <span class="ow">and</span> <span class="n">autoscaleon</span><span class="p">):</span>
                <span class="k">return</span>  <span class="c1"># nothing to do...</span>

            <span class="n">shared</span> <span class="o">=</span> <span class="n">shared_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">dl</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">dataLim</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">shared</span><span class="p">]</span>
            <span class="c1"># ignore non-finite data limits if good limits exist</span>
            <span class="n">finite_dl</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dl</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">finite_dl</span><span class="p">):</span>
                <span class="c1"># if finite limits exist for atleast one axis (and the</span>
                <span class="c1"># other is infinite), restore the finite limits</span>
                <span class="n">x_finite</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dl</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">intervalx</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="ow">and</span>
                                <span class="p">(</span><span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">finite_dl</span><span class="p">))]</span>
                <span class="n">y_finite</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dl</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">intervaly</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="ow">and</span>
                                <span class="p">(</span><span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">finite_dl</span><span class="p">))]</span>

                <span class="n">dl</span> <span class="o">=</span> <span class="n">finite_dl</span>
                <span class="n">dl</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">x_finite</span><span class="p">)</span>
                <span class="n">dl</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">y_finite</span><span class="p">)</span>

            <span class="n">bb</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxBase</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">dl</span><span class="p">)</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bb</span><span class="p">,</span> <span class="n">interval</span><span class="p">)</span>
            <span class="n">locator</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># e.g., DateLocator has its own nonsingular()</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="c1"># Default nonsingular for, e.g., MaxNLocator</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span>
                    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">increasing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">expander</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>

            <span class="c1"># Add the margin in figure space and then transform back, to handle</span>
            <span class="c1"># non-linear scales.</span>
            <span class="n">minpos</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bb</span><span class="p">,</span> <span class="n">minpos</span><span class="p">)</span>
            <span class="n">transform</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
            <span class="n">inverse_trans</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
            <span class="c1"># We cannot use exact equality due to floating point issues e.g.</span>
            <span class="c1"># with streamplot.</span>
            <span class="n">do_lower_margin</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">stickies</span><span class="p">))</span>
            <span class="n">do_upper_margin</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">stickies</span><span class="p">))</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">_scale</span><span class="o">.</span><span class="n">limit_range_for_scale</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">minpos</span><span class="p">)</span>
            <span class="n">x0t</span><span class="p">,</span> <span class="n">x1t</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">])</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1t</span> <span class="o">-</span> <span class="n">x0t</span><span class="p">)</span> <span class="o">*</span> <span class="n">margin</span>
            <span class="k">if</span> <span class="n">do_lower_margin</span><span class="p">:</span>
                <span class="n">x0t</span> <span class="o">-=</span> <span class="n">delta</span>
            <span class="k">if</span> <span class="n">do_upper_margin</span><span class="p">:</span>
                <span class="n">x1t</span> <span class="o">+=</span> <span class="n">delta</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">inverse_trans</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">x0t</span><span class="p">,</span> <span class="n">x1t</span><span class="p">])</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span><span class="p">:</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="n">view_limits</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="n">set_bound</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="c1"># End of definition of internal function 'handle_single_axis'.</span>

        <span class="n">handle_single_axis</span><span class="p">(</span>
            <span class="n">scalex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="p">,</span> <span class="s1">'intervalx'</span><span class="p">,</span>
            <span class="s1">'minposx'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span><span class="p">,</span> <span class="n">x_stickies</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_xbound</span><span class="p">)</span>
        <span class="n">handle_single_axis</span><span class="p">(</span>
            <span class="n">scaley</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="p">,</span> <span class="s1">'intervaly'</span><span class="p">,</span>
            <span class="s1">'minposy'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span><span class="p">,</span> <span class="n">y_stickies</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_ybound</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_axis_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>

    <span class="c1"># Drawing</span>

    <span class="nd">@allow_rasterization</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inframe</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""Draw everything (plot lines, axes, labels)"""</span>
        <span class="k">if</span> <span class="n">renderer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">renderer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span>

        <span class="k">if</span> <span class="n">renderer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">'No renderer defined'</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="n">renderer</span><span class="o">.</span><span class="n">open_group</span><span class="p">(</span><span class="s1">'axes'</span><span class="p">)</span>
        <span class="c1"># prevent triggering call backs during the draw process</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes_locator</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">locator</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">()</span>

        <span class="n">artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span>
        <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="c1"># the frame draws the edges around the axes patch -- we</span>
        <span class="c1"># decouple these so the patch can be in the background and the</span>
        <span class="c1"># frame in the foreground. Do this before drawing the axis</span>
        <span class="c1"># objects so that the spine has the opportunity to update them.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">spine</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">itervalues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">):</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">spine</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">inframe</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># 'line': above patches, below lines</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_axis_list</span><span class="p">():</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">_axis</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">inframe</span><span class="p">:</span>
            <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
            <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">)</span>
            <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">is_saving</span><span class="p">():</span>
            <span class="n">artists</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">artists</span>
                       <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span><span class="o">.</span><span class="n">get_animated</span><span class="p">()</span> <span class="ow">or</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">]</span>
        <span class="n">artists</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">artists</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s1">'zorder'</span><span class="p">))</span>

        <span class="c1"># rasterize artists with negative zorder</span>
        <span class="c1"># if the minimum zorder is negative, start rasterization</span>
        <span class="n">rasterization_zorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">rasterization_zorder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
                <span class="n">artists</span> <span class="ow">and</span> <span class="n">artists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">zorder</span> <span class="o">&lt;</span> <span class="n">rasterization_zorder</span><span class="p">):</span>
            <span class="n">renderer</span><span class="o">.</span><span class="n">start_rasterizing</span><span class="p">()</span>
            <span class="n">artists_rasterized</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">artists</span>
                                  <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">zorder</span> <span class="o">&lt;</span> <span class="n">rasterization_zorder</span><span class="p">]</span>
            <span class="n">artists</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">artists</span>
                       <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">zorder</span> <span class="o">&gt;=</span> <span class="n">rasterization_zorder</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">artists_rasterized</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># the patch draws the background rectangle -- the frame below</span>
        <span class="c1"># will draw the edges</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">artists_rasterized</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">artists_rasterized</span><span class="p">:</span>
                <span class="n">a</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
            <span class="n">renderer</span><span class="o">.</span><span class="n">stop_rasterizing</span><span class="p">()</span>

        <span class="n">mimage</span><span class="o">.</span><span class="n">_draw_list_compositing_images</span><span class="p">(</span><span class="n">renderer</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">artists</span><span class="p">)</span>

        <span class="n">renderer</span><span class="o">.</span><span class="n">close_group</span><span class="p">(</span><span class="s1">'axes'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span> <span class="o">=</span> <span class="n">renderer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">draw_artist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        This method can only be used after an initial draw which</span>
<span class="sd">        caches the renderer.  It is used to efficiently update Axes</span>
<span class="sd">        data (axis ticks, labels, etc are not updated)</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">"draw_artist can only be used after an "</span>
                                 <span class="s2">"initial draw which caches the renderer"</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">redraw_in_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        This method can only be used after an initial draw which</span>
<span class="sd">        caches the renderer.  It is used to efficiently update Axes</span>
<span class="sd">        data (axis ticks, labels, etc are not updated)</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">"redraw_in_frame can only be used after an "</span>
                                 <span class="s2">"initial draw which caches the renderer"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span><span class="p">,</span> <span class="n">inframe</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_renderer_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cachedRenderer</span>

    <span class="c1"># Axes rectangle characteristics</span>

    <span class="k">def</span> <span class="nf">get_frame_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get whether the axes rectangle patch is drawn.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span>

    <span class="k">def</span> <span class="nf">set_frame_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set whether the axes rectangle patch is drawn.</span>

<span class="sd">        .. ACCEPTS: bool</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span> <span class="o">=</span> <span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_axisbelow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get whether axis ticks and gridlines are above or below most artists.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span>

    <span class="k">def</span> <span class="nf">set_axisbelow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set whether axis ticks and gridlines are above or below most artists.</span>

<span class="sd">        .. ACCEPTS: [ bool | 'line' ]</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool or 'line'</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span> <span class="o">=</span> <span class="n">validate_axisbelow</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@docstring</span><span class="o">.</span><span class="n">dedent_interpd</span>
    <span class="k">def</span> <span class="nf">grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">'major'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">'both'</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Turn the axes grids on or off.</span>

<span class="sd">        Set the axes grids on or off; *b* is a boolean.</span>

<span class="sd">        If *b* is *None* and ``len(kwargs)==0``, toggle the grid state.  If</span>
<span class="sd">        *kwargs* are supplied, it is assumed that you want a grid and *b*</span>
<span class="sd">        is thus set to *True*.</span>

<span class="sd">        *which* can be 'major' (default), 'minor', or 'both' to control</span>
<span class="sd">        whether major tick grids, minor tick grids, or both are affected.</span>

<span class="sd">        *axis* can be 'both' (default), 'x', or 'y' to control which</span>
<span class="sd">        set of gridlines are drawn.</span>

<span class="sd">        *kwargs* are used to set the grid line properties, e.g.,::</span>

<span class="sd">           ax.grid(color='r', linestyle='-', linewidth=2)</span>

<span class="sd">        Valid :class:`~matplotlib.lines.Line2D` kwargs are</span>

<span class="sd">        %(Line2D)s</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">b</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">b</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">_string_to_bool</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'x'</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'both'</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'y'</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'both'</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ticklabel_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Change the `~matplotlib.ticker.ScalarFormatter` used by</span>
<span class="sd">        default for linear axes.</span>

<span class="sd">        Optional keyword arguments:</span>

<span class="sd">          ==============   =========================================</span>
<span class="sd">          Keyword          Description</span>
<span class="sd">          ==============   =========================================</span>
<span class="sd">          *style*          [ 'sci' (or 'scientific') | 'plain' ]</span>
<span class="sd">                           plain turns off scientific notation</span>
<span class="sd">          *scilimits*      (m, n), pair of integers; if *style*</span>
<span class="sd">                           is 'sci', scientific notation will</span>
<span class="sd">                           be used for numbers outside the range</span>
<span class="sd">                           10`m`:sup: to 10`n`:sup:.</span>
<span class="sd">                           Use (0,0) to include all numbers.</span>
<span class="sd">          *useOffset*      [ bool | offset ]; if True,</span>
<span class="sd">                           the offset will be calculated as needed;</span>
<span class="sd">                           if False, no offset will be used; if a</span>
<span class="sd">                           numeric offset is specified, it will be</span>
<span class="sd">                           used.</span>
<span class="sd">          *axis*           [ 'x' | 'y' | 'both' ]</span>
<span class="sd">          *useLocale*      If True, format the number according to</span>
<span class="sd">                           the current locale.  This affects things</span>
<span class="sd">                           such as the character used for the</span>
<span class="sd">                           decimal separator.  If False, use</span>
<span class="sd">                           C-style (English) formatting.  The</span>
<span class="sd">                           default setting is controlled by the</span>
<span class="sd">                           axes.formatter.use_locale rcparam.</span>
<span class="sd">          *useMathText*    If True, render the offset and scientific</span>
<span class="sd">                           notation in mathtext</span>
<span class="sd">          ==============   =========================================</span>

<span class="sd">        Only the major ticks are affected.</span>
<span class="sd">        If the method is called when the</span>
<span class="sd">        :class:`~matplotlib.ticker.ScalarFormatter` is not the</span>
<span class="sd">        :class:`~matplotlib.ticker.Formatter` being used, an</span>
<span class="sd">        :exc:`AttributeError` will be raised.</span>

<span class="sd">        """</span>
        <span class="n">style</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'style'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">scilimits</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'scilimits'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">useOffset</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'useOffset'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">useLocale</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'useLocale'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">useMathText</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'useMathText'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'axis'</span><span class="p">,</span> <span class="s1">'both'</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">scilimits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">scilimits</span>
                <span class="n">m</span> <span class="o">+</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># check that both are numbers</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"scilimits must be a sequence of 2 integers"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">style</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'sci'</span><span class="p">:</span>
            <span class="n">sb</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s1">'plain'</span><span class="p">:</span>
            <span class="n">sb</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s1">'comma'</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"comma style remains to be added"</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">style</span> <span class="o">==</span> <span class="s1">''</span><span class="p">:</span>
            <span class="n">sb</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"</span><span class="si">%s</span><span class="s2"> is not a valid style value"</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'both'</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'x'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_scientific</span><span class="p">(</span><span class="n">sb</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'both'</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'y'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_scientific</span><span class="p">(</span><span class="n">sb</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">scilimits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'both'</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'x'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_powerlimits</span><span class="p">(</span><span class="n">scilimits</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'both'</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'y'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_powerlimits</span><span class="p">(</span><span class="n">scilimits</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">useOffset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'both'</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'x'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useOffset</span><span class="p">(</span><span class="n">useOffset</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'both'</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'y'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useOffset</span><span class="p">(</span><span class="n">useOffset</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">useLocale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'both'</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'x'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useLocale</span><span class="p">(</span><span class="n">useLocale</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'both'</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'y'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useLocale</span><span class="p">(</span><span class="n">useLocale</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">useMathText</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'both'</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'x'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useMathText</span><span class="p">(</span><span class="n">useMathText</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'both'</span> <span class="ow">or</span> <span class="n">axis</span> <span class="o">==</span> <span class="s1">'y'</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useMathText</span><span class="p">(</span><span class="n">useMathText</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="s2">"This method only works with the ScalarFormatter."</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">locator_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">'both'</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Control behavior of tick locators.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        axis : ['both' | 'x' | 'y'], optional</span>
<span class="sd">            The axis on which to operate.</span>

<span class="sd">        tight : bool or None, optional</span>
<span class="sd">            Parameter passed to :meth:`autoscale_view`.</span>
<span class="sd">            Default is None, for no change.</span>

<span class="sd">        Other Parameters</span>
<span class="sd">        ----------------</span>
<span class="sd">        **kw :</span>
<span class="sd">            Remaining keyword arguments are passed to directly to the</span>
<span class="sd">            :meth:`~matplotlib.ticker.MaxNLocator.set_params` method.</span>

<span class="sd">        Typically one might want to reduce the maximum number</span>
<span class="sd">        of ticks and use tight bounds when plotting small</span>
<span class="sd">        subplots, for example::</span>

<span class="sd">            ax.locator_params(tight=True, nbins=4)</span>

<span class="sd">        Because the locator is involved in autoscaling,</span>
<span class="sd">        :meth:`autoscale_view` is called automatically after</span>
<span class="sd">        the parameters are changed.</span>

<span class="sd">        This presently works only for the</span>
<span class="sd">        :class:`~matplotlib.ticker.MaxNLocator` used</span>
<span class="sd">        by default on linear axes, but it may be generalized.</span>
<span class="sd">        """</span>
        <span class="n">_x</span> <span class="o">=</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'x'</span><span class="p">,</span> <span class="s1">'both'</span><span class="p">]</span>
        <span class="n">_y</span> <span class="o">=</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'y'</span><span class="p">,</span> <span class="s1">'both'</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">_x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_y</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="n">tight</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="n">_x</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="n">_y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tick_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">'both'</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""Change the appearance of ticks, tick labels, and gridlines.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        axis : {'x', 'y', 'both'}, optional</span>
<span class="sd">            Which axis to apply the parameters to.</span>

<span class="sd">        Other Parameters</span>
<span class="sd">        ----------------</span>

<span class="sd">        axis : {'x', 'y', 'both'}</span>
<span class="sd">            Axis on which to operate; default is 'both'.</span>

<span class="sd">        reset : bool</span>
<span class="sd">            If *True*, set all parameters to defaults</span>
<span class="sd">            before processing other keyword arguments.  Default is</span>
<span class="sd">            *False*.</span>

<span class="sd">        which : {'major', 'minor', 'both'}</span>
<span class="sd">            Default is 'major'; apply arguments to *which* ticks.</span>

<span class="sd">        direction : {'in', 'out', 'inout'}</span>
<span class="sd">            Puts ticks inside the axes, outside the axes, or both.</span>

<span class="sd">        length : float</span>
<span class="sd">            Tick length in points.</span>

<span class="sd">        width : float</span>
<span class="sd">            Tick width in points.</span>

<span class="sd">        color : color</span>
<span class="sd">            Tick color; accepts any mpl color spec.</span>

<span class="sd">        pad : float</span>
<span class="sd">            Distance in points between tick and label.</span>

<span class="sd">        labelsize : float or str</span>
<span class="sd">            Tick label font size in points or as a string (e.g., 'large').</span>

<span class="sd">        labelcolor : color</span>
<span class="sd">            Tick label color; mpl color spec.</span>

<span class="sd">        colors : color</span>
<span class="sd">            Changes the tick color and the label color to the same value:</span>
<span class="sd">            mpl color spec.</span>

<span class="sd">        zorder : float</span>
<span class="sd">            Tick and label zorder.</span>

<span class="sd">        bottom, top, left, right : bool</span>
<span class="sd">            Whether to draw the respective ticks.</span>

<span class="sd">        labelbottom, labeltop, labelleft, labelright : bool</span>
<span class="sd">            Whether to draw the respective tick labels.</span>

<span class="sd">        labelrotation : float</span>
<span class="sd">            Tick label rotation</span>

<span class="sd">        grid_color : color</span>
<span class="sd">            Changes the gridline color to the given mpl color spec.</span>

<span class="sd">        grid_alpha : float</span>
<span class="sd">            Transparency of gridlines: 0 (transparent) to 1 (opaque).</span>

<span class="sd">        grid_linewidth : float</span>
<span class="sd">            Width of gridlines in points.</span>

<span class="sd">        grid_linestyle : string</span>
<span class="sd">            Any valid :class:`~matplotlib.lines.Line2D` line style spec.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        Usage ::</span>

<span class="sd">            ax.tick_params(direction='out', length=6, width=2, colors='r',</span>
<span class="sd">                           grid_color='r', grid_alpha=0.5)</span>

<span class="sd">        This will make all major ticks be red, pointing out of the box,</span>
<span class="sd">        and with dimensions 6 points by 2 points.  Tick labels will</span>
<span class="sd">        also be red.  Gridlines will be red and translucent.</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'x'</span><span class="p">,</span> <span class="s1">'both'</span><span class="p">]:</span>
            <span class="n">xkw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'left'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'right'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'labelleft'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'labelright'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="o">**</span><span class="n">xkw</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'y'</span><span class="p">,</span> <span class="s1">'both'</span><span class="p">]:</span>
            <span class="n">ykw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'top'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'bottom'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'labeltop'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'labelbottom'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="o">**</span><span class="n">ykw</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_axis_off</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Turn off the axis."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">set_axis_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Turn on the axis."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># data limits, ticks, tick labels, and formatting</span>

    <span class="k">def</span> <span class="nf">invert_xaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Invert the x-axis."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">xaxis_inverted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return whether the x-axis is inverted."""</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">right</span> <span class="o">&lt;</span> <span class="n">left</span>

    <span class="k">def</span> <span class="nf">get_xbound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return the lower and upper x-axis bounds, in increasing order."""</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">right</span><span class="p">,</span> <span class="n">left</span>

    <span class="k">def</span> <span class="nf">set_xbound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the lower and upper numerical bounds of the x-axis.</span>

<span class="sd">        This method will honor axes inversion regardless of parameter order.</span>
<span class="sd">        It will not change the _autoscaleXon attribute.</span>

<span class="sd">        .. ACCEPTS: (lower: float, upper: float)</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">iterable</span><span class="p">(</span><span class="n">lower</span><span class="p">):</span>
            <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">lower</span>

        <span class="n">old_lower</span><span class="p">,</span> <span class="n">old_upper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">lower</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="n">old_lower</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="n">old_upper</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_inverted</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">lower</span> <span class="o">&lt;</span> <span class="n">upper</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">upper</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lower</span> <span class="o">&lt;</span> <span class="n">upper</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">upper</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xlim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the x-axis range</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xlimits : tuple</span>
<span class="sd">            Returns the current x-axis limits as the tuple</span>
<span class="sd">            (`left`, `right`).</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The x-axis may be inverted, in which case the `left` value will</span>
<span class="sd">        be greater than the `right` value.</span>

<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervalx</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_validate_converted_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">convert</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Raise ValueError if converted limits are non-finite.</span>

<span class="sd">        Note that this function also accepts None as a limit argument.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The limit value after call to convert(), or None if limit is None.</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">converted_limit</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">converted_limit</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="p">(</span><span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isreal</span><span class="p">(</span><span class="n">converted_limit</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">converted_limit</span><span class="p">))):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Axis limits cannot be NaN or Inf"</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">converted_limit</span>

    <span class="k">def</span> <span class="nf">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the data limits for the x-axis</span>

<span class="sd">        .. ACCEPTS: (left: float, right: float)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        left : scalar, optional</span>
<span class="sd">            The left xlim (default: None, which leaves the left limit</span>
<span class="sd">            unchanged).</span>

<span class="sd">        right : scalar, optional</span>
<span class="sd">            The right xlim (default: None, which leaves the right limit</span>
<span class="sd">            unchanged).</span>

<span class="sd">        emit : bool, optional</span>
<span class="sd">            Whether to notify observers of limit change (default: True).</span>

<span class="sd">        auto : bool or None, optional</span>
<span class="sd">            Whether to turn on autoscaling of the x-axis. True turns on,</span>
<span class="sd">            False turns off (default action), None leaves unchanged.</span>

<span class="sd">        xlimits : tuple, optional</span>
<span class="sd">            The left and right xlims may be passed as the tuple</span>
<span class="sd">            (`left`, `right`) as the first positional argument (or as</span>
<span class="sd">            the `left` keyword argument).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xlimits : tuple</span>
<span class="sd">            Returns the new x-axis limits as (`left`, `right`).</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The `left` value may be greater than the `right` value, in which</span>
<span class="sd">        case the x-axis values will decrease from left to right.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; set_xlim(left, right)</span>
<span class="sd">        &gt;&gt;&gt; set_xlim((left, right))</span>
<span class="sd">        &gt;&gt;&gt; left, right = set_xlim(left, right)</span>

<span class="sd">        One limit may be left unchanged.</span>

<span class="sd">        &gt;&gt;&gt; set_xlim(right=right_lim)</span>

<span class="sd">        Limits may be passed in reverse order to flip the direction of</span>
<span class="sd">        the x-axis. For example, suppose `x` represents the number of</span>
<span class="sd">        years before present. The x-axis limits might be set like the</span>
<span class="sd">        following so 5000 years ago is on the left of the plot and the</span>
<span class="sd">        present is on the right.</span>

<span class="sd">        &gt;&gt;&gt; set_xlim(5000, 0)</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="s1">'xmin'</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'xmin'</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">'xmax'</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'xmax'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kw</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"unrecognized kwargs: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kw</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">iterable</span><span class="p">(</span><span class="n">left</span><span class="p">):</span>
            <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">left</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_process_unit_info</span><span class="p">(</span><span class="n">xdata</span><span class="o">=</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">))</span>
        <span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_converted_limits</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">)</span>
        <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_converted_limits</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">)</span>

        <span class="n">old_left</span><span class="p">,</span> <span class="n">old_right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">left</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">old_left</span>
        <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">old_right</span>

        <span class="k">if</span> <span class="n">left</span> <span class="o">==</span> <span class="n">right</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="p">(</span><span class="s1">'Attempting to set identical left==right results</span><span class="se">\n</span><span class="s1">'</span>
                 <span class="s1">'in singular transformations; automatically expanding.</span><span class="se">\n</span><span class="s1">'</span>
                 <span class="s1">'left=</span><span class="si">%s</span><span class="s1">, right=</span><span class="si">%s</span><span class="s1">'</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">))</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">increasing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xscale</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'log'</span> <span class="ow">and</span> <span class="p">(</span><span class="n">left</span> <span class="o">&lt;=</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">right</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s1">'Attempted to set non-positive xlimits for log-scale axis; '</span>
                <span class="s1">'invalid limits will be ignored.'</span><span class="p">)</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">limit_range_for_scale</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervalx</span> <span class="o">=</span> <span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auto</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleXon</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">auto</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">emit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">'xlim_changed'</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="c1"># Call all of the other x-axes that are shared with this one</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="n">other</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervalx</span><span class="p">,</span>
                                   <span class="n">emit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">figure</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="ow">and</span>
                            <span class="n">other</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
                        <span class="n">other</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span>

    <span class="k">def</span> <span class="nf">get_xscale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_scale</span><span class="p">()</span>
    <span class="n">get_xscale</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">"Return the xaxis scale string: </span><span class="si">%s</span><span class="s2">"""</span> <span class="o">%</span> <span class="p">(</span>
        <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mscale</span><span class="o">.</span><span class="n">get_scale_names</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">set_xscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the x-axis scale.</span>

<span class="sd">        .. ACCEPTS: [ 'linear' | 'log' | 'symlog' | 'logit' | ... ]</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value : {"linear", "log", "symlog", "logit"}</span>
<span class="sd">            scaling strategy to apply</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Different kwargs are accepted, depending on the scale. See</span>
<span class="sd">        the `~matplotlib.scale` module for more information.</span>

<span class="sd">        See also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.scale.LinearScale : linear transform</span>

<span class="sd">        matplotlib.scale.LogTransform : log transform</span>

<span class="sd">        matplotlib.scale.SymmetricalLogTransform : symlog transform</span>

<span class="sd">        matplotlib.scale.LogisticTransform : logit transform</span>
<span class="sd">        """</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_shared_x_axes</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">scaley</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""Return the x ticks as a list of locations"""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_ticklocs</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_xticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ticks</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the x ticks with list of *ticks*</span>

<span class="sd">        .. ACCEPTS: list of tick locations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ticks : list</span>
<span class="sd">            List of x-axis tick locations.</span>

<span class="sd">        minor : bool, optional</span>
<span class="sd">            If ``False`` sets major ticks, if ``True`` sets minor ticks.</span>
<span class="sd">            Default is ``False``.</span>
<span class="sd">        """</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="n">ticks</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">get_xmajorticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the major x tick labels.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        labels : list</span>
<span class="sd">            List of :class:`~matplotlib.text.Text` instances</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">'Text xticklabel'</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_majorticklabels</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_xminorticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the minor x tick labels.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        labels : list</span>
<span class="sd">            List of :class:`~matplotlib.text.Text` instances</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">'Text xticklabel'</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_minorticklabels</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_xticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the x tick labels as a list of :class:`~matplotlib.text.Text`</span>
<span class="sd">        instances.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        minor : bool, optional</span>
<span class="sd">           If True return the minor ticklabels,</span>
<span class="sd">           else return the major ticklabels.</span>

<span class="sd">        which : None, ('minor', 'major', 'both')</span>
<span class="sd">           Overrides `minor`.</span>

<span class="sd">           Selects which ticklabels to return</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ret : list</span>
<span class="sd">           List of :class:`~matplotlib.text.Text` instances.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">'Text xticklabel'</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_ticklabels</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">,</span>
                                                           <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_xticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">fontdict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the x-tick labels with list of string labels.</span>

<span class="sd">        .. ACCEPTS: list of string labels</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        labels : list of str</span>
<span class="sd">            List of string labels.</span>

<span class="sd">        fontdict : dict, optional</span>
<span class="sd">            A dictionary controlling the appearance of the ticklabels.</span>
<span class="sd">            The default `fontdict` is::</span>

<span class="sd">               {'fontsize': rcParams['axes.titlesize'],</span>
<span class="sd">                'fontweight': rcParams['axes.titleweight'],</span>
<span class="sd">                'verticalalignment': 'baseline',</span>
<span class="sd">                'horizontalalignment': loc}</span>

<span class="sd">        minor : bool, optional</span>
<span class="sd">            Whether to set the minor ticklabels rather than the major ones.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        A list of `~.text.Text` instances.</span>

<span class="sd">        Other Parameters</span>
<span class="sd">        -----------------</span>
<span class="sd">        **kwargs : `~.text.Text` properties.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">fontdict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fontdict</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span>
                                        <span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">invert_yaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Invert the y-axis."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">yaxis_inverted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return whether the y-axis is inverted."""</span>
        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">top</span> <span class="o">&lt;</span> <span class="n">bottom</span>

    <span class="k">def</span> <span class="nf">get_ybound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return the lower and upper y-axis bounds, in increasing order."""</span>
        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">bottom</span> <span class="o">&lt;</span> <span class="n">top</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">top</span><span class="p">,</span> <span class="n">bottom</span>

    <span class="k">def</span> <span class="nf">set_ybound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the lower and upper numerical bounds of the y-axis.</span>
<span class="sd">        This method will honor axes inversion regardless of parameter order.</span>
<span class="sd">        It will not change the _autoscaleYon attribute.</span>

<span class="sd">        .. ACCEPTS: (lower: float, upper: float)</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">iterable</span><span class="p">(</span><span class="n">lower</span><span class="p">):</span>
            <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">lower</span>

        <span class="n">old_lower</span><span class="p">,</span> <span class="n">old_upper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">lower</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="n">old_lower</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="n">old_upper</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_inverted</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">lower</span> <span class="o">&lt;</span> <span class="n">upper</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">upper</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lower</span> <span class="o">&lt;</span> <span class="n">upper</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">upper</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_ylim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the y-axis range</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ylimits : tuple</span>
<span class="sd">            Returns the current y-axis limits as the tuple</span>
<span class="sd">            (`bottom`, `top`).</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The y-axis may be inverted, in which case the `bottom` value</span>
<span class="sd">        will be greater than the `top` value.</span>

<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervaly</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the data limits for the y-axis</span>

<span class="sd">        .. ACCEPTS: (bottom: float, top: float)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bottom : scalar, optional</span>
<span class="sd">            The bottom ylim (default: None, which leaves the bottom</span>
<span class="sd">            limit unchanged).</span>

<span class="sd">        top : scalar, optional</span>
<span class="sd">            The top ylim (default: None, which leaves the top limit</span>
<span class="sd">            unchanged).</span>

<span class="sd">        emit : bool, optional</span>
<span class="sd">            Whether to notify observers of limit change (default: True).</span>

<span class="sd">        auto : bool or None, optional</span>
<span class="sd">            Whether to turn on autoscaling of the y-axis. True turns on,</span>
<span class="sd">            False turns off (default action), None leaves unchanged.</span>

<span class="sd">        ylimits : tuple, optional</span>
<span class="sd">            The bottom and top yxlims may be passed as the tuple</span>
<span class="sd">            (`bottom`, `top`) as the first positional argument (or as</span>
<span class="sd">            the `bottom` keyword argument).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ylimits : tuple</span>
<span class="sd">            Returns the new y-axis limits as (`bottom`, `top`).</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The `bottom` value may be greater than the `top` value, in which</span>
<span class="sd">        case the y-axis values will decrease from bottom to top.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; set_ylim(bottom, top)</span>
<span class="sd">        &gt;&gt;&gt; set_ylim((bottom, top))</span>
<span class="sd">        &gt;&gt;&gt; bottom, top = set_ylim(bottom, top)</span>

<span class="sd">        One limit may be left unchanged.</span>

<span class="sd">        &gt;&gt;&gt; set_ylim(top=top_lim)</span>

<span class="sd">        Limits may be passed in reverse order to flip the direction of</span>
<span class="sd">        the y-axis. For example, suppose `y` represents depth of the</span>
<span class="sd">        ocean in m. The y-axis limits might be set like the following</span>
<span class="sd">        so 5000 m depth is at the bottom of the plot and the surface,</span>
<span class="sd">        0 m, is at the top.</span>

<span class="sd">        &gt;&gt;&gt; set_ylim(5000, 0)</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="s1">'ymin'</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'ymin'</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">'ymax'</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">top</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'ymax'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kw</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"unrecognized kwargs: </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kw</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">iterable</span><span class="p">(</span><span class="n">bottom</span><span class="p">):</span>
            <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="n">bottom</span>

        <span class="n">bottom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_converted_limits</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">)</span>
        <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_converted_limits</span><span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">)</span>

        <span class="n">old_bottom</span><span class="p">,</span> <span class="n">old_top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">bottom</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="n">old_bottom</span>
        <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">top</span> <span class="o">=</span> <span class="n">old_top</span>

        <span class="k">if</span> <span class="n">bottom</span> <span class="o">==</span> <span class="n">top</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="p">(</span><span class="s1">'Attempting to set identical bottom==top results</span><span class="se">\n</span><span class="s1">'</span>
                 <span class="s1">'in singular transformations; automatically expanding.</span><span class="se">\n</span><span class="s1">'</span>
                 <span class="s1">'bottom=</span><span class="si">%s</span><span class="s1">, top=</span><span class="si">%s</span><span class="s1">'</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">))</span>

        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">increasing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yscale</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'log'</span> <span class="ow">and</span> <span class="p">(</span><span class="n">bottom</span> <span class="o">&lt;=</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">top</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s1">'Attempted to set non-positive ylimits for log-scale axis; '</span>
                <span class="s1">'invalid limits will be ignored.'</span><span class="p">)</span>
        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">limit_range_for_scale</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervaly</span> <span class="o">=</span> <span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auto</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleYon</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">auto</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">emit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="s1">'ylim_changed'</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="c1"># Call all of the other y-axes that are shared with this one</span>
            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="n">other</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervaly</span><span class="p">,</span>
                                   <span class="n">emit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">figure</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="ow">and</span>
                            <span class="n">other</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
                        <span class="n">other</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span>

    <span class="k">def</span> <span class="nf">get_yscale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_scale</span><span class="p">()</span>
    <span class="n">get_yscale</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">"Return the yaxis scale string: </span><span class="si">%s</span><span class="s2">"""</span> <span class="o">%</span> <span class="p">(</span>
        <span class="s2">", "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mscale</span><span class="o">.</span><span class="n">get_scale_names</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">set_yscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the y-axis scale.</span>

<span class="sd">        .. ACCEPTS: [ 'linear' | 'log' | 'symlog' | 'logit' | ... ]</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value : {"linear", "log", "symlog", "logit"}</span>
<span class="sd">            scaling strategy to apply</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Different kwargs are accepted, depending on the scale. See</span>
<span class="sd">        the `~matplotlib.scale` module for more information.</span>

<span class="sd">        See also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.scale.LinearScale : linear transform</span>

<span class="sd">        matplotlib.scale.LogTransform : log transform</span>

<span class="sd">        matplotlib.scale.SymmetricalLogTransform : symlog transform</span>

<span class="sd">        matplotlib.scale.LogisticTransform : logit transform</span>
<span class="sd">        """</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_shared_y_axes</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">scalex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""Return the y ticks as a list of locations"""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_ticklocs</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_yticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ticks</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the y ticks with list of *ticks*</span>

<span class="sd">        .. ACCEPTS: list of tick locations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ticks : sequence</span>
<span class="sd">            List of y-axis tick locations</span>

<span class="sd">        minor : bool, optional</span>
<span class="sd">            If ``False`` sets major ticks, if ``True`` sets minor ticks.</span>
<span class="sd">            Default is ``False``.</span>
<span class="sd">        """</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="n">ticks</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">get_ymajorticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the major y tick labels.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        labels : list</span>
<span class="sd">            List of :class:`~matplotlib.text.Text` instances</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">'Text yticklabel'</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_majorticklabels</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_yminorticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the minor y tick labels.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        labels : list</span>
<span class="sd">            List of :class:`~matplotlib.text.Text` instances</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">'Text yticklabel'</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_minorticklabels</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_yticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the x tick labels as a list of :class:`~matplotlib.text.Text`</span>
<span class="sd">        instances.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        minor : bool</span>
<span class="sd">           If True return the minor ticklabels,</span>
<span class="sd">           else return the major ticklabels</span>

<span class="sd">        which : None, ('minor', 'major', 'both')</span>
<span class="sd">           Overrides `minor`.</span>

<span class="sd">           Selects which ticklabels to return</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ret : list</span>
<span class="sd">           List of :class:`~matplotlib.text.Text` instances.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">'Text yticklabel'</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_ticklabels</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">,</span>
                                                           <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_yticklabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">fontdict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the y-tick labels with list of strings labels.</span>

<span class="sd">        .. ACCEPTS: list of string labels</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        labels : list of str</span>
<span class="sd">            list of string labels</span>

<span class="sd">        fontdict : dict, optional</span>
<span class="sd">            A dictionary controlling the appearance of the ticklabels.</span>
<span class="sd">            The default `fontdict` is::</span>

<span class="sd">               {'fontsize': rcParams['axes.titlesize'],</span>
<span class="sd">                'fontweight': rcParams['axes.titleweight'],</span>
<span class="sd">                'verticalalignment': 'baseline',</span>
<span class="sd">                'horizontalalignment': loc}</span>

<span class="sd">        minor : bool, optional</span>
<span class="sd">            Whether to set the minor ticklabels rather than the major ones.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        A list of `~.text.Text` instances.</span>

<span class="sd">        Other Parameters</span>
<span class="sd">        ----------------</span>
<span class="sd">        **kwargs : `~.text.Text` properties.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">fontdict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fontdict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span>
                                         <span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">xaxis_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Sets up x-axis ticks and labels that treat the x data as dates.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tz : string or :class:`tzinfo` instance, optional</span>
<span class="sd">            Timezone string or timezone. Defaults to rc value.</span>
<span class="sd">        """</span>
        <span class="c1"># should be enough to inform the unit conversion interface</span>
        <span class="c1"># dates are coming in</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_date</span><span class="p">(</span><span class="n">tz</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">yaxis_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Sets up y-axis ticks and labels that treat the y data as dates.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tz : string or :class:`tzinfo` instance, optional</span>
<span class="sd">            Timezone string or timezone. Defaults to rc value.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_date</span><span class="p">(</span><span class="n">tz</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">format_xdata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Return *x* string formatted.  This function will use the attribute</span>
<span class="sd">        self.fmt_xdata if it is callable, else will fall back on the xaxis</span>
<span class="sd">        major formatter</span>
<span class="sd">        """</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt_xdata</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">format_data_short</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">val</span>

    <span class="k">def</span> <span class="nf">format_ydata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Return y string formatted.  This function will use the</span>
<span class="sd">        :attr:`fmt_ydata` attribute if it is callable, else will fall</span>
<span class="sd">        back on the yaxis major formatter</span>
<span class="sd">        """</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt_ydata</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">format_data_short</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">val</span>

    <span class="k">def</span> <span class="nf">format_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">"""Return a format string formatting the *x*, *y* coord"""</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xs</span> <span class="o">=</span> <span class="s1">'???'</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_xdata</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ys</span> <span class="o">=</span> <span class="s1">'???'</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_ydata</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">'x=</span><span class="si">%s</span><span class="s1"> y=</span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">minorticks_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">'Add autoscaling minor ticks to the axes.'</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">):</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_scale</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s1">'log'</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">_scale</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">LogLocator</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">base</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">subs</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">scale</span> <span class="o">==</span> <span class="s1">'symlog'</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">_scale</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span>
                    <span class="n">mticker</span><span class="o">.</span><span class="n">SymmetricalLogLocator</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">_transform</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">subs</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">minorticks_off</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Remove minor ticks from the axes."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">NullLocator</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">NullLocator</span><span class="p">())</span>

    <span class="c1"># Interactive manipulation</span>

    <span class="k">def</span> <span class="nf">can_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Return *True* if this axes supports the zoom box button functionality.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">can_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Return *True* if this axes supports any pan/zoom button functionality.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_navigate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get whether the axes responds to navigation commands</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_navigate</span>

    <span class="k">def</span> <span class="nf">set_navigate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set whether the axes responds to navigation toolbar commands</span>

<span class="sd">        .. ACCEPTS: bool</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_navigate</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">get_navigate_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Get the navigation toolbar button status: 'PAN', 'ZOOM', or None</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_navigate_mode</span>

    <span class="k">def</span> <span class="nf">set_navigate_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set the navigation toolbar button status;</span>

<span class="sd">        .. warning::</span>
<span class="sd">            this is not a user-API function.</span>

<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_navigate_mode</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">_get_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Save information required to reproduce the current view.</span>

<span class="sd">        Called before a view is changed, such as during a pan or zoom</span>
<span class="sd">        initiated by the user. You may return any information you deem</span>
<span class="sd">        necessary to describe the view.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types, but if not, the</span>
<span class="sd">            default implementation saves the view limits. You *must* implement</span>
<span class="sd">            :meth:`_set_view` if you implement this method.</span>
<span class="sd">        """</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Apply a previously saved view.</span>

<span class="sd">        Called when restoring a view, such as with the navigation buttons.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types, but if not, the</span>
<span class="sd">            default implementation restores the view limits. You *must*</span>
<span class="sd">            implement :meth:`_get_view` if you implement this method.</span>
<span class="sd">        """</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">view</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_set_view_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">'in'</span><span class="p">,</span>
                            <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">twinx</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">twiny</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Update view from a selection bbox.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types, but if not, the</span>
<span class="sd">            default implementation sets the view limits to the bbox directly.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        bbox : 4-tuple or 3 tuple</span>
<span class="sd">            * If bbox is a 4 tuple, it is the selected bounding box limits,</span>
<span class="sd">                in *display* coordinates.</span>
<span class="sd">            * If bbox is a 3 tuple, it is an (xp, yp, scl) triple, where</span>
<span class="sd">                (xp,yp) is the center of zooming and scl the scale factor to</span>
<span class="sd">                zoom by.</span>

<span class="sd">        direction : str</span>
<span class="sd">            The direction to apply the bounding box.</span>
<span class="sd">                * `'in'` - The bounding box describes the view directly, i.e.,</span>
<span class="sd">                           it zooms in.</span>
<span class="sd">                * `'out'` - The bounding box describes the size to make the</span>
<span class="sd">                            existing view, i.e., it zooms out.</span>

<span class="sd">        mode : str or None</span>
<span class="sd">            The selection mode, whether to apply the bounding box in only the</span>
<span class="sd">            `'x'` direction, `'y'` direction or both (`None`).</span>

<span class="sd">        twinx : bool</span>
<span class="sd">            Whether this axis is twinned in the *x*-direction.</span>

<span class="sd">        twiny : bool</span>
<span class="sd">            Whether this axis is twinned in the *y*-direction.</span>
<span class="sd">        """</span>
        <span class="n">Xmin</span><span class="p">,</span> <span class="n">Xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="n">Ymin</span><span class="p">,</span> <span class="n">Ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="c1"># Zooming code</span>
            <span class="n">xp</span><span class="p">,</span> <span class="n">yp</span><span class="p">,</span> <span class="n">scl</span> <span class="o">=</span> <span class="n">bbox</span>

            <span class="c1"># Should not happen</span>
            <span class="k">if</span> <span class="n">scl</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">scl</span> <span class="o">=</span> <span class="mf">1.</span>

            <span class="c1"># direction = 'in'</span>
            <span class="k">if</span> <span class="n">scl</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s1">'in'</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s1">'out'</span>
                <span class="n">scl</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">scl</span>

            <span class="c1"># get the limits of the axes</span>
            <span class="n">tranD2C</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="n">tranD2C</span><span class="p">((</span><span class="n">Xmin</span><span class="p">,</span> <span class="n">Ymin</span><span class="p">))</span>
            <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">tranD2C</span><span class="p">((</span><span class="n">Xmax</span><span class="p">,</span> <span class="n">Ymax</span><span class="p">))</span>

            <span class="c1"># set the range</span>
            <span class="n">xwidth</span> <span class="o">=</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span>
            <span class="n">ywidth</span> <span class="o">=</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span>
            <span class="n">xcen</span> <span class="o">=</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">+</span> <span class="n">xmin</span><span class="p">)</span><span class="o">*.</span><span class="mi">5</span>
            <span class="n">ycen</span> <span class="o">=</span> <span class="p">(</span><span class="n">ymax</span> <span class="o">+</span> <span class="n">ymin</span><span class="p">)</span><span class="o">*.</span><span class="mi">5</span>
            <span class="n">xzc</span> <span class="o">=</span> <span class="p">(</span><span class="n">xp</span><span class="o">*</span><span class="p">(</span><span class="n">scl</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">xcen</span><span class="p">)</span><span class="o">/</span><span class="n">scl</span>
            <span class="n">yzc</span> <span class="o">=</span> <span class="p">(</span><span class="n">yp</span><span class="o">*</span><span class="p">(</span><span class="n">scl</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">ycen</span><span class="p">)</span><span class="o">/</span><span class="n">scl</span>

            <span class="n">bbox</span> <span class="o">=</span> <span class="p">[</span><span class="n">xzc</span> <span class="o">-</span> <span class="n">xwidth</span><span class="o">/</span><span class="mf">2.</span><span class="o">/</span><span class="n">scl</span><span class="p">,</span> <span class="n">yzc</span> <span class="o">-</span> <span class="n">ywidth</span><span class="o">/</span><span class="mf">2.</span><span class="o">/</span><span class="n">scl</span><span class="p">,</span>
                    <span class="n">xzc</span> <span class="o">+</span> <span class="n">xwidth</span><span class="o">/</span><span class="mf">2.</span><span class="o">/</span><span class="n">scl</span><span class="p">,</span> <span class="n">yzc</span> <span class="o">+</span> <span class="n">ywidth</span><span class="o">/</span><span class="mf">2.</span><span class="o">/</span><span class="n">scl</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="c1"># should be len 3 or 4 but nothing else</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">"Warning in _set_view_from_bbox: bounding box is not a tuple "</span>
                <span class="s2">"of length 3 or 4. Ignoring the view change."</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Just grab bounding box</span>
        <span class="n">lastx</span><span class="p">,</span> <span class="n">lasty</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">bbox</span>

        <span class="c1"># zoom to rect</span>
        <span class="n">inverse</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
        <span class="n">lastx</span><span class="p">,</span> <span class="n">lasty</span> <span class="o">=</span> <span class="n">inverse</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">lastx</span><span class="p">,</span> <span class="n">lasty</span><span class="p">))</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">inverse</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">twinx</span><span class="p">:</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">Xmin</span><span class="p">,</span> <span class="n">Xmax</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Xmin</span> <span class="o">&lt;</span> <span class="n">Xmax</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">lastx</span><span class="p">:</span>
                    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">lastx</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">lastx</span><span class="p">,</span> <span class="n">x</span>
                <span class="k">if</span> <span class="n">x0</span> <span class="o">&lt;</span> <span class="n">Xmin</span><span class="p">:</span>
                    <span class="n">x0</span> <span class="o">=</span> <span class="n">Xmin</span>
                <span class="k">if</span> <span class="n">x1</span> <span class="o">&gt;</span> <span class="n">Xmax</span><span class="p">:</span>
                    <span class="n">x1</span> <span class="o">=</span> <span class="n">Xmax</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">lastx</span><span class="p">:</span>
                    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">lastx</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">lastx</span><span class="p">,</span> <span class="n">x</span>
                <span class="k">if</span> <span class="n">x0</span> <span class="o">&gt;</span> <span class="n">Xmin</span><span class="p">:</span>
                    <span class="n">x0</span> <span class="o">=</span> <span class="n">Xmin</span>
                <span class="k">if</span> <span class="n">x1</span> <span class="o">&lt;</span> <span class="n">Xmax</span><span class="p">:</span>
                    <span class="n">x1</span> <span class="o">=</span> <span class="n">Xmax</span>

        <span class="k">if</span> <span class="n">twiny</span><span class="p">:</span>
            <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">Ymin</span><span class="p">,</span> <span class="n">Ymax</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Ymin</span> <span class="o">&lt;</span> <span class="n">Ymax</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">lasty</span><span class="p">:</span>
                    <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">lasty</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">lasty</span><span class="p">,</span> <span class="n">y</span>
                <span class="k">if</span> <span class="n">y0</span> <span class="o">&lt;</span> <span class="n">Ymin</span><span class="p">:</span>
                    <span class="n">y0</span> <span class="o">=</span> <span class="n">Ymin</span>
                <span class="k">if</span> <span class="n">y1</span> <span class="o">&gt;</span> <span class="n">Ymax</span><span class="p">:</span>
                    <span class="n">y1</span> <span class="o">=</span> <span class="n">Ymax</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="n">lasty</span><span class="p">:</span>
                    <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">lasty</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">lasty</span><span class="p">,</span> <span class="n">y</span>
                <span class="k">if</span> <span class="n">y0</span> <span class="o">&gt;</span> <span class="n">Ymin</span><span class="p">:</span>
                    <span class="n">y0</span> <span class="o">=</span> <span class="n">Ymin</span>
                <span class="k">if</span> <span class="n">y1</span> <span class="o">&lt;</span> <span class="n">Ymax</span><span class="p">:</span>
                    <span class="n">y1</span> <span class="o">=</span> <span class="n">Ymax</span>

        <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">'in'</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">'x'</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">'y'</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">'out'</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xscale</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'log'</span><span class="p">:</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">Xmax</span> <span class="o">/</span> <span class="n">Xmin</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x1</span> <span class="o">/</span> <span class="n">x0</span><span class="p">)</span>
                <span class="n">rx1</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">Xmin</span> <span class="o">/</span> <span class="n">x0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">Xmin</span>
                <span class="n">rx2</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">Xmax</span> <span class="o">/</span> <span class="n">x0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">Xmin</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="p">(</span><span class="n">Xmax</span> <span class="o">-</span> <span class="n">Xmin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span>
                <span class="n">rx1</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">Xmin</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">+</span> <span class="n">Xmin</span>
                <span class="n">rx2</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">Xmax</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">+</span> <span class="n">Xmin</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yscale</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'log'</span><span class="p">:</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">Ymax</span> <span class="o">/</span> <span class="n">Ymin</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">y1</span> <span class="o">/</span> <span class="n">y0</span><span class="p">)</span>
                <span class="n">ry1</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">Ymin</span> <span class="o">/</span> <span class="n">y0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">Ymin</span>
                <span class="n">ry2</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="n">Ymax</span> <span class="o">/</span> <span class="n">y0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">Ymin</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="p">(</span><span class="n">Ymax</span> <span class="o">-</span> <span class="n">Ymin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span>
                <span class="n">ry1</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">Ymin</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">+</span> <span class="n">Ymin</span>
                <span class="n">ry2</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">Ymax</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">+</span> <span class="n">Ymin</span>

            <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">'x'</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">rx1</span><span class="p">,</span> <span class="n">rx2</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">'y'</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">ry1</span><span class="p">,</span> <span class="n">ry2</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">rx1</span><span class="p">,</span> <span class="n">rx2</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">ry1</span><span class="p">,</span> <span class="n">ry2</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">start_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Called when a pan operation has started.</span>

<span class="sd">        *x*, *y* are the mouse coordinates in display coords.</span>
<span class="sd">        button is the mouse button number:</span>

<span class="sd">        * 1: LEFT</span>
<span class="sd">        * 2: MIDDLE</span>
<span class="sd">        * 3: RIGHT</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types.</span>

<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Bunch</span><span class="p">(</span>
            <span class="n">lim</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">trans</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">trans_inverse</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">bbox</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">end_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Called when a pan operation completes (when the mouse button</span>
<span class="sd">        is up.)</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types.</span>

<span class="sd">        """</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span>

    <span class="k">def</span> <span class="nf">drag_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Called when the mouse moves during a pan operation.</span>

<span class="sd">        *button* is the mouse button number:</span>

<span class="sd">        * 1: LEFT</span>
<span class="sd">        * 2: MIDDLE</span>
<span class="sd">        * 3: RIGHT</span>

<span class="sd">        *key* is a "shift" key</span>

<span class="sd">        *x*, *y* are the mouse coordinates in display coords.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types.</span>

<span class="sd">        """</span>
        <span class="k">def</span> <span class="nf">format_deltas</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">'control'</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="n">dx</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="n">dy</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">'x'</span><span class="p">:</span>
                <span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">'y'</span><span class="p">:</span>
                <span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">'shift'</span><span class="p">:</span>
                <span class="k">if</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">):</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="n">dy</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="n">dx</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span>

        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span>
        <span class="k">if</span> <span class="n">dx</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">dy</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">format_deltas</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">translated</span><span class="p">(</span><span class="o">-</span><span class="n">dx</span><span class="p">,</span> <span class="o">-</span><span class="n">dy</span><span class="p">)</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans_inverse</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">button</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">width</span>
                <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">height</span>
                <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">format_deltas</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_aspect</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">'auto'</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="n">dy</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">))</span>
                <span class="n">start</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">])</span>
                <span class="n">oldpoints</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">lim</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans</span><span class="p">)</span>
                <span class="n">newpoints</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">oldpoints</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="p">(</span><span class="n">newpoints</span><span class="p">)</span>
                          <span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans_inverse</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">OverflowError</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">'Overflow while panning'</span><span class="p">)</span>
                <span class="k">return</span>

        <span class="n">valid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans</span><span class="p">))</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get_points</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
        <span class="c1"># Just ignore invalid limits (typically, underflow in log-scale).</span>
        <span class="n">points</span><span class="p">[</span><span class="o">~</span><span class="n">valid</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">points</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">points</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>

    <span class="nd">@cbook</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span><span class="s2">"2.1"</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_cursor_props</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Return the cursor propertiess as a (*linewidth*, *color*)</span>
<span class="sd">        tuple, where *linewidth* is a float and *color* is an RGBA</span>
<span class="sd">        tuple</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cursorProps</span>

    <span class="nd">@cbook</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span><span class="s2">"2.1"</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_cursor_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">"""Set the cursor property as</span>

<span class="sd">        Call signature ::</span>

<span class="sd">          ax.set_cursor_props(linewidth, color)</span>

<span class="sd">        or::</span>

<span class="sd">          ax.set_cursor_props((linewidth, color))</span>

<span class="sd">        ACCEPTS: a (*float*, *color*) tuple</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">lw</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">lw</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">args</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'args must be a (linewidth, color) tuple'</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cursorProps</span> <span class="o">=</span> <span class="n">lw</span><span class="p">,</span> <span class="n">c</span>

    <span class="k">def</span> <span class="nf">get_children</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""return a list of child artists"""</span>
        <span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">collections</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">six</span><span class="o">.</span><span class="n">itervalues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">))</span>
        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend_</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">children</span>

    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Test whether the mouse event occurred in the axes.</span>

<span class="sd">        Returns *True* / *False*, {}</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_contains</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">mouseevent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">contains_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns *True* if the point (tuple of x,y) is inside the axes</span>
<span class="sd">        (the area defined by the its patch). A pixel coordinate is</span>
<span class="sd">        required.</span>

<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">contains_point</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">"""Trigger pick event</span>

<span class="sd">        Call signature::</span>

<span class="sd">            pick(mouseevent)</span>

<span class="sd">        each child artist will fire a pick event if mouseevent is over</span>
<span class="sd">        the artist and the artist has picker set</span>
<span class="sd">        """</span>
        <span class="n">martist</span><span class="o">.</span><span class="n">Artist</span><span class="o">.</span><span class="n">pick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">get_default_bbox_extra_artists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">artist</span> <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">artist</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()]</span>

    <span class="k">def</span> <span class="nf">get_tightbbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">,</span> <span class="n">call_axes_locator</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Return the tight bounding box of the axes.</span>
<span class="sd">        The dimension of the Bbox in canvas coordinate.</span>

<span class="sd">        If *call_axes_locator* is *False*, it does not call the</span>
<span class="sd">        _axes_locator attribute, which is necessary to get the correct</span>
<span class="sd">        bounding box. ``call_axes_locator==False`` can be used if the</span>
<span class="sd">        caller is only intereted in the relative size of the tightbbox</span>
<span class="sd">        compared to the axes bbox.</span>
<span class="sd">        """</span>

        <span class="n">bb</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes_locator</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">locator</span> <span class="ow">and</span> <span class="n">call_axes_locator</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">()</span>

        <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">))</span>

        <span class="n">bb_xaxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bb_xaxis</span><span class="p">:</span>
            <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bb_xaxis</span><span class="p">)</span>

        <span class="n">bb_yaxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bb_yaxis</span><span class="p">:</span>
            <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bb_yaxis</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">OffsetBox</span><span class="p">)</span> <span class="ow">and</span> <span class="n">child</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">Legend</span><span class="p">)</span> <span class="ow">and</span> <span class="n">child</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">_legend_box</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">))</span>

        <span class="n">_bbox</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
            <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bb</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">width</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">_bbox</span>

    <span class="k">def</span> <span class="nf">_make_twin_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">kl</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Make a twinx axes of self. This is used for twinx and twiny.</span>
<span class="sd">        """</span>
        <span class="c1"># Typically, SubplotBase._make_twin_axes is called instead of this.</span>
        <span class="c1"># There is also an override in axes_grid1/axes_divider.py.</span>
        <span class="k">if</span> <span class="s1">'sharex'</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="s1">'sharey'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Twinned Axes may share only one axis."</span><span class="p">)</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="kc">True</span><span class="p">),</span> <span class="o">*</span><span class="n">kl</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_adjustable</span><span class="p">(</span><span class="s1">'datalim'</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_adjustable</span><span class="p">(</span><span class="s1">'datalim'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ax2</span>

    <span class="k">def</span> <span class="nf">twinx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Create a twin Axes sharing the xaxis</span>

<span class="sd">        Create a new Axes instance with an invisible x-axis and an independent</span>
<span class="sd">        y-axis positioned opposite to the original one (i.e. at right). The</span>
<span class="sd">        x-axis autoscale setting will be inherited from the original Axes.</span>
<span class="sd">        To ensure that the tick marks of both y-axes align, see</span>
<span class="sd">        `~matplotlib.ticker.LinearLocator`</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ax_twin : Axes</span>
<span class="sd">            The newly created Axes instance</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        For those who are 'picking' artists while using twinx, pick</span>
<span class="sd">        events are only called for the artists in the top-most axes.</span>
<span class="sd">        """</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_twin_axes</span><span class="p">(</span><span class="n">sharex</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_right</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">'right'</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_offset_position</span><span class="p">(</span><span class="s1">'right'</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_autoscalex_on</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_autoscalex_on</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_left</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ax2</span>

    <span class="k">def</span> <span class="nf">twiny</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Create a twin Axes sharing the yaxis</span>

<span class="sd">        Create a new Axes instance with an invisible y-axis and an independent</span>
<span class="sd">        x-axis positioned opposite to the original one (i.e. at top). The</span>
<span class="sd">        y-axis autoscale setting will be inherited from the original Axes.</span>
<span class="sd">        To ensure that the tick marks of both x-axes align, see</span>
<span class="sd">        `~matplotlib.ticker.LinearLocator`</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ax_twin : Axes</span>
<span class="sd">            The newly created Axes instance</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        For those who are 'picking' artists while using twiny, pick</span>
<span class="sd">        events are only called for the artists in the top-most axes.</span>
<span class="sd">        """</span>

        <span class="n">ax2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_twin_axes</span><span class="p">(</span><span class="n">sharey</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">tick_top</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">'top'</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_autoscaley_on</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_autoscaley_on</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">tick_bottom</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ax2</span>

    <span class="k">def</span> <span class="nf">get_shared_x_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return a reference to the shared axes Grouper object for x axes."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_x_axes</span>

    <span class="k">def</span> <span class="nf">get_shared_y_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return a reference to the shared axes Grouper object for y axes."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_y_axes</span>
</pre></div>
</div>
</div>
</div>
<div class="clearer"></div>
</div>
<div class="footer">
        © Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the Matplotlib development team; 2012 - 2018 The Matplotlib development team.
        <br/>
      Last updated on Jun 28, 2018.
	Created using
	<ahref>Sphinx 1.7.5.
	Doc version v2.2.2-101-g15e1eadd0.
    </ahref></div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55954603-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
<footer>
<!--Flipcause Integration v3.0// Flipcause Integration Instructions:
Install the following code block once in the website Header (after <head> tag) -->
<style>

.fc-black_overlay{
display:none; position: fixed; z-index:1000001; top: 0%;left: 0%;width: 100%;height: 100%;
background-color: black; filter: alpha(opacity=50); cursor:pointer; opacity:0.5;
}

.fc-white_content {
opacity:1; display:none; margin-top: -320px; margin-left: -485px; width:970px; height:640px;
position:fixed; top:50%; left:50%; border: none;z-index:1000002;overflow: auto;
}

.fc-main-box{
opacity:1; display:none; margin:15px auto 0 auto; width:930px; position:relative; z-index:1000003;
}

.fc-widget_close{
opacity:1; content:url(http://i1338.photobucket.com/albums/o691/WeCause/X_zpse4a7e538.png);
position:absolute; z-index=1000004; right:-16px; top:-16px; display:block; cursor:pointer;
}

.floating_button{
display: block; margin-top: 0px; margin-left: 0px; width:auto ; height: auto;
position:fixed; z-index:999999; overflow: auto;
}

@keyframes backfadesin {
   from { opacity:0; }
   to {opacity:.5;}
}

@-moz-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@-webkit-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@-o-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}


@-ms-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; transform: translateY(20px);}
   100% {opacity: 1; transform: translateY(0);}
}

@-moz-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -moz-transform: translateY(20px);}
   100% {opacity: 1; -moz-transform: translateY(0);}
}

@-webkit-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -webkit-transform: translateY(20px);}
   100% {opacity: 1; -webkit-transform: translateY(0);}
}

@-o-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -o-transform: translateY(20px);}
   100% {opacity: 1; -o-transform: translateY(0);}
}

@-ms-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -ms-transform: translateY(20px);}
   100% {opacity: 1; -ms-transform: translateY(0);}
}

</style>
<div class="fc-black_overlay" id="fc-fade" onclick="close_window()"></div>
<div class="fc-white_content" id="fc-light">
<div class="fc-main-box" id="fc-main">
<div class="fc-widget_close" id="fc-close" onclick="close_window()">
</div><iframe height="580" id="fc-myFrame" iframe="" scrolling="no" src="" style="border: 0;
border-radius:5px 5px 5px 5px; box-shadow:0 0 8px rgba(0, 0, 0, 0.5);" width="925"></iframe></div>
</div>
<!--END Flipcause Main Integration Code-->
</footer>
</html>