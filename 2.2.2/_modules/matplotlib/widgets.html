<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>matplotlib.widgets — Matplotlib 2.2.2 documentation</title>
<link href="../../_static/mpl.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/gallery.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.2.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
<script src="../../_static/jquery.js" type="text/javascript"></script>
<script src="../../_static/underscore.js" type="text/javascript"></script>
<script src="../../_static/doctools.js" type="text/javascript"></script>
<link href="../../_static/opensearch.xml" rel="search" title="Search within Matplotlib 2.2.2 documentation" type="application/opensearchdescription+xml"/>
<link href="../../_static/favicon.ico" rel="shortcut icon"/>
<link href="../../genindex.html" rel="index" title="Index"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="../../index.html" rel="top" title="Matplotlib 2.2.2 documentation"/>
<link href="../matplotlib.html" rel="up" title="matplotlib"/>
<link href="https://matplotlib.org/_modules/matplotlib/widgets.html" rel="canonical"/>
<link href="https://matplotlib.org/_modules/matplotlib/widgets.html" rel="canonical"/></head>
<body><div id="old-version-banner">
            You are reading documentation for a static version of Matplotlib.
            <a href="https://matplotlib.org/_modules/matplotlib/widgets.html">This page may have been updated.</a>
</div>
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px; position: relative;">
<a href="../../index.html">
<div style="float: left; position: absolute; width: 496px; bottom: 0; padding-bottom: 24px"><span style="float: right; color: #789; background: white">Version 2.2.2</span></div>
<img alt="matplotlib" border="0" height="125px" src="../../_static/logo2.png"/></a>
<!-- The "Fork me on github" ribbon -->
<div id="forkongithub"><a href="https://github.com/matplotlib/matplotlib">Fork me on GitHub</a></div>
</div>
<div class="related">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a accesskey="I" href="../../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li><a href="../../index.html">home</a>| </li>
<li><a href="../../gallery/index.html">examples</a>| </li>
<li><a href="../../tutorials/index.html">tutorials</a>| </li>
<li><a href="../../api/pyplot_summary.html">pyplot</a>| </li>
<li><a href="../../contents.html">docs</a> »</li>
<li><a href="../index.html">Module code</a> »</li>
<li><a accesskey="U" href="../matplotlib.html">matplotlib</a> »</li>
</ul>
</div>
<div class="sphinxsidebar">
<div class="sphinxsidebarwrapper">
<div id="searchbox" role="search" style="display: none">
<h3>Quick search</h3>
<div class="searchformwrapper">
<form action="../../search.html" class="search" method="get">
<input name="q" type="text"/>
<input type="submit" value="Go"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><div class="relations">
<h3>Related Topics</h3>
<ul>
<li><a href="../../contents.html">Documentation overview</a><ul>
<li><a href="../index.html">Module code</a><ul>
<li><a href="../matplotlib.html">matplotlib</a><ul>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="document">
<div class="documentwrapper">
<div class="bodywrapper">
<div class="body">
<h1>Source code for matplotlib.widgets</h1><div class="highlight"><pre>
<span></span><span class="sd">"""</span>
<span class="sd">GUI neutral widgets</span>
<span class="sd">===================</span>

<span class="sd">Widgets that are designed to work for any of the GUI backends.</span>
<span class="sd">All of these widgets require you to predefine a :class:`matplotlib.axes.Axes`</span>
<span class="sd">instance and pass that as the first arg.  matplotlib doesn't try to</span>
<span class="sd">be too smart with respect to layout -- you will have to figure out how</span>
<span class="sd">wide and tall you want your Axes to be to accommodate your widget.</span>
<span class="sd">"""</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">six</span>
<span class="kn">from</span> <span class="nn">six.moves</span> <span class="k">import</span> <span class="nb">zip</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">rcParams</span>

<span class="kn">from</span> <span class="nn">.patches</span> <span class="k">import</span> <span class="n">Circle</span><span class="p">,</span> <span class="n">Rectangle</span><span class="p">,</span> <span class="n">Ellipse</span>
<span class="kn">from</span> <span class="nn">.lines</span> <span class="k">import</span> <span class="n">Line2D</span>
<span class="kn">from</span> <span class="nn">.transforms</span> <span class="k">import</span> <span class="n">blended_transform_factory</span>


<div class="viewcode-block" id="LockDraw"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.LockDraw">[docs]</a><span class="k">class</span> <span class="nc">LockDraw</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Some widgets, like the cursor, draw onto the canvas, and this is not</span>
<span class="sd">    desirable under all circumstances, like when the toolbar is in</span>
<span class="sd">    zoom-to-rect mode and drawing a rectangle.  The module level "lock"</span>
<span class="sd">    allows someone to grab the lock and prevent other widgets from</span>
<span class="sd">    drawing.  Use ``matplotlib.widgets.lock(someobj)`` to prevent</span>
<span class="sd">    other widgets from drawing while you're interacting with the canvas.</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="sd">"""reserve the lock for *o*"""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">available</span><span class="p">(</span><span class="n">o</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'already locked'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span> <span class="o">=</span> <span class="n">o</span>

<div class="viewcode-block" id="LockDraw.release"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.LockDraw.release">[docs]</a>    <span class="k">def</span> <span class="nf">release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="sd">"""release the lock"""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">available</span><span class="p">(</span><span class="n">o</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'you do not own this lock'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="LockDraw.available"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.LockDraw.available">[docs]</a>    <span class="k">def</span> <span class="nf">available</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="sd">"""drawing is available to *o*"""</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">locked</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">isowner</span><span class="p">(</span><span class="n">o</span><span class="p">)</span></div>

<div class="viewcode-block" id="LockDraw.isowner"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.LockDraw.isowner">[docs]</a>    <span class="k">def</span> <span class="nf">isowner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
        <span class="sd">"""Return True if *o* owns this lock"""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span> <span class="ow">is</span> <span class="n">o</span></div>

<div class="viewcode-block" id="LockDraw.locked"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.LockDraw.locked">[docs]</a>    <span class="k">def</span> <span class="nf">locked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return True if the lock is currently held by an owner"""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div></div>


<div class="viewcode-block" id="Widget"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Widget">[docs]</a><span class="k">class</span> <span class="nc">Widget</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Abstract base class for GUI neutral widgets</span>
<span class="sd">    """</span>
    <span class="n">drawon</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">eventson</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_active</span> <span class="o">=</span> <span class="kc">True</span>

<div class="viewcode-block" id="Widget.set_active"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Widget.set_active">[docs]</a>    <span class="k">def</span> <span class="nf">set_active</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">active</span><span class="p">):</span>
        <span class="sd">"""Set whether the widget is active.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">=</span> <span class="n">active</span></div>

<div class="viewcode-block" id="Widget.get_active"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Widget.get_active">[docs]</a>    <span class="k">def</span> <span class="nf">get_active</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get whether the widget is active.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active</span></div>

    <span class="c1"># set_active is overridden by SelectorWidgets.</span>
    <span class="n">active</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_active</span><span class="p">,</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">active</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="n">active</span><span class="p">),</span>
                      <span class="n">doc</span><span class="o">=</span><span class="s2">"Is the widget active?"</span><span class="p">)</span>

<div class="viewcode-block" id="Widget.ignore"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Widget.ignore">[docs]</a>    <span class="k">def</span> <span class="nf">ignore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Return True if event should be ignored.</span>

<span class="sd">        This method (or a version of it) should be called at the beginning</span>
<span class="sd">        of any event callback.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span></div></div>


<div class="viewcode-block" id="AxesWidget"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.AxesWidget">[docs]</a><span class="k">class</span> <span class="nc">AxesWidget</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="sd">"""Widget that is connected to a single</span>
<span class="sd">    :class:`~matplotlib.axes.Axes`.</span>

<span class="sd">    To guarantee that the widget remains responsive and not garbage-collected,</span>
<span class="sd">    a reference to the object should be maintained by the user.</span>

<span class="sd">    This is necessary because the callback registry</span>
<span class="sd">    maintains only weak-refs to the functions, which are member</span>
<span class="sd">    functions of the widget.  If there are no references to the widget</span>
<span class="sd">    object it may be garbage collected which will disconnect the</span>
<span class="sd">    callbacks.</span>

<span class="sd">    Attributes:</span>

<span class="sd">    *ax* : :class:`~matplotlib.axes.Axes`</span>
<span class="sd">        The parent axes for the widget</span>
<span class="sd">    *canvas* : :class:`~matplotlib.backend_bases.FigureCanvasBase` subclass</span>
<span class="sd">        The parent figure canvas for the widget.</span>
<span class="sd">    *active* : bool</span>
<span class="sd">        If False, the widget does not respond to events.</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cids</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="AxesWidget.connect_event"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.AxesWidget.connect_event">[docs]</a>    <span class="k">def</span> <span class="nf">connect_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
        <span class="sd">"""Connect callback with an event.</span>

<span class="sd">        This should be used in lieu of `figure.canvas.mpl_connect` since this</span>
<span class="sd">        function stores callback ids for later clean up.</span>
<span class="sd">        """</span>
        <span class="n">cid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span></div>

<div class="viewcode-block" id="AxesWidget.disconnect_events"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.AxesWidget.disconnect_events">[docs]</a>    <span class="k">def</span> <span class="nf">disconnect_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Disconnect all events created by this widget."""</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="n">c</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Button"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Button">[docs]</a><span class="k">class</span> <span class="nc">Button</span><span class="p">(</span><span class="n">AxesWidget</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    A GUI neutral button.</span>

<span class="sd">    For the button to remain responsive you must keep a reference to it.</span>
<span class="sd">    Call :meth:`on_clicked` to connect to the button.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    ax :</span>
<span class="sd">        The :class:`matplotlib.axes.Axes` the button renders into.</span>
<span class="sd">    label :</span>
<span class="sd">        A :class:`matplotlib.text.Text` instance.</span>
<span class="sd">    color :</span>
<span class="sd">        The color of the button when not hovering.</span>
<span class="sd">    hovercolor :</span>
<span class="sd">        The color of the button when hovering.</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="s1">'0.85'</span><span class="p">,</span> <span class="n">hovercolor</span><span class="o">=</span><span class="s1">'0.95'</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ax : matplotlib.axes.Axes</span>
<span class="sd">            The :class:`matplotlib.axes.Axes` instance the button</span>
<span class="sd">            will be placed into.</span>

<span class="sd">        label : str</span>
<span class="sd">            The button text. Accepts string.</span>

<span class="sd">        image : array, mpl image, Pillow Image</span>
<span class="sd">            The image to place in the button, if not *None*.</span>
<span class="sd">            Can be any legal arg to imshow (numpy array,</span>
<span class="sd">            matplotlib Image instance, or Pillow Image).</span>

<span class="sd">        color : color</span>
<span class="sd">            The color of the button when not activated</span>

<span class="sd">        hovercolor : color</span>
<span class="sd">            The color of the button when the mouse is over it</span>
<span class="sd">        """</span>
        <span class="n">AxesWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">image</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span>
                             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span>
                             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span>
                             <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'button_press_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_click</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'button_release_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_release</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'motion_notify_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hovercolor</span> <span class="o">=</span> <span class="n">hovercolor</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lastcolor</span> <span class="o">=</span> <span class="n">color</span>

    <span class="k">def</span> <span class="nf">_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventson</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mouse_grabber</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">grab_mouse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mouse_grabber</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">release_mouse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventson</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">observers</span><span class="p">):</span>
            <span class="n">func</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hovercolor</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span>
        <span class="k">if</span> <span class="n">c</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lastcolor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lastcolor</span> <span class="o">=</span> <span class="n">c</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<div class="viewcode-block" id="Button.on_clicked"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Button.on_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">on_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        When the button is clicked, call this *func* with event.</span>

<span class="sd">        A connection id is returned. It can be used to disconnect</span>
<span class="sd">        the button from its callback.</span>
<span class="sd">        """</span>
        <span class="n">cid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observers</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">cid</span></div>

<div class="viewcode-block" id="Button.disconnect"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Button.disconnect">[docs]</a>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="p">):</span>
        <span class="sd">"""remove the observer with connection id *cid*"""</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">observers</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span></div></div>


<div class="viewcode-block" id="Slider"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Slider">[docs]</a><span class="k">class</span> <span class="nc">Slider</span><span class="p">(</span><span class="n">AxesWidget</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    A slider representing a floating point range.</span>

<span class="sd">    Create a slider from *valmin* to *valmax* in axes *ax*. For the slider to</span>
<span class="sd">    remain responsive you must maintain a reference to it. Call</span>
<span class="sd">    :meth:`on_changed` to connect to the slider event.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    val : float</span>
<span class="sd">        Slider value.</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">valmin</span><span class="p">,</span> <span class="n">valmax</span><span class="p">,</span> <span class="n">valinit</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">valfmt</span><span class="o">=</span><span class="s1">'</span><span class="si">%1.2f</span><span class="s1">'</span><span class="p">,</span>
                 <span class="n">closedmin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">closedmax</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">slidermin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">slidermax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dragging</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">valstep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ax : Axes</span>
<span class="sd">            The Axes to put the slider in.</span>

<span class="sd">        label : str</span>
<span class="sd">            Slider label.</span>

<span class="sd">        valmin : float</span>
<span class="sd">            The minimum value of the slider.</span>

<span class="sd">        valmax : float</span>
<span class="sd">            The maximum value of the slider.</span>

<span class="sd">        valinit : float, optional, default: 0.5</span>
<span class="sd">            The slider initial position.</span>

<span class="sd">        valfmt : str, optional, default: "%1.2f"</span>
<span class="sd">            Used to format the slider value, fprint format string.</span>

<span class="sd">        closedmin : bool, optional, default: True</span>
<span class="sd">            Indicate whether the slider interval is closed on the bottom.</span>

<span class="sd">        closedmax : bool, optional, default: True</span>
<span class="sd">            Indicate whether the slider interval is closed on the top.</span>

<span class="sd">        slidermin : Slider, optional, default: None</span>
<span class="sd">            Do not allow the current slider to have a value less than</span>
<span class="sd">            the value of the Slider `slidermin`.</span>

<span class="sd">        slidermax : Slider, optional, default: None</span>
<span class="sd">            Do not allow the current slider to have a value greater than</span>
<span class="sd">            the value of the Slider `slidermax`.</span>

<span class="sd">        dragging : bool, optional, default: True</span>
<span class="sd">            If True the slider can be dragged by the mouse.</span>

<span class="sd">        valstep : float, optional, default: None</span>
<span class="sd">            If given, the slider will snap to multiples of `valstep`.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Additional kwargs are passed on to ``self.poly`` which is the</span>
<span class="sd">        :class:`~matplotlib.patches.Rectangle` that draws the slider</span>
<span class="sd">        knob.  See the :class:`~matplotlib.patches.Rectangle` documentation for</span>
<span class="sd">        valid property names (e.g., `facecolor`, `edgecolor`, `alpha`).</span>
<span class="sd">        """</span>
        <span class="n">AxesWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">slidermin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">slidermin</span><span class="p">,</span> <span class="s1">'val'</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Argument slidermin (</span><span class="si">{}</span><span class="s2">) has no 'val'"</span>
                             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">slidermin</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">slidermax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">slidermax</span><span class="p">,</span> <span class="s1">'val'</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Argument slidermax (</span><span class="si">{}</span><span class="s2">) has no 'val'"</span>
                             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">slidermax</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">closedmin</span> <span class="o">=</span> <span class="n">closedmin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">closedmax</span> <span class="o">=</span> <span class="n">closedmax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slidermin</span> <span class="o">=</span> <span class="n">slidermin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slidermax</span> <span class="o">=</span> <span class="n">slidermax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drag_active</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valmin</span> <span class="o">=</span> <span class="n">valmin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valmax</span> <span class="o">=</span> <span class="n">valmax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valstep</span> <span class="o">=</span> <span class="n">valstep</span>
        <span class="n">valinit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_in_bounds</span><span class="p">(</span><span class="n">valinit</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">valinit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">valinit</span> <span class="o">=</span> <span class="n">valmin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">valinit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valinit</span> <span class="o">=</span> <span class="n">valinit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">poly</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">valmin</span><span class="p">,</span> <span class="n">valinit</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vline</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">valinit</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'r'</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">valfmt</span> <span class="o">=</span> <span class="n">valfmt</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">valmin</span><span class="p">,</span> <span class="n">valmax</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'button_press_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'button_release_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dragging</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'motion_notify_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
                             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span>
                             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">'right'</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">valtext</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">1.02</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">valfmt</span> <span class="o">%</span> <span class="n">valinit</span><span class="p">,</span>
                               <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
                               <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span>
                               <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">'left'</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_val</span><span class="p">(</span><span class="n">valinit</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_value_in_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">""" Makes sure self.val is with given bounds."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valstep</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">((</span><span class="n">val</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">valmin</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">valstep</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">valstep</span>
            <span class="n">val</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valmin</span>

        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valmin</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">closedmin</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valmin</span>
        <span class="k">elif</span> <span class="n">val</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valmax</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">closedmax</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valmax</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slidermin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">val</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slidermin</span><span class="o">.</span><span class="n">val</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">closedmin</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slidermin</span><span class="o">.</span><span class="n">val</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slidermax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">val</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slidermax</span><span class="o">.</span><span class="n">val</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">closedmax</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slidermax</span><span class="o">.</span><span class="n">val</span>
        <span class="k">return</span> <span class="n">val</span>

    <span class="k">def</span> <span class="nf">_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""update the slider position"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">'button_press_event'</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drag_active</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">grab_mouse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">drag_active</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">elif</span> <span class="p">((</span><span class="n">event</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">'button_release_event'</span><span class="p">)</span> <span class="ow">or</span>
              <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">'button_press_event'</span> <span class="ow">and</span>
               <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drag_active</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">release_mouse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_in_bounds</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">val</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_val</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<div class="viewcode-block" id="Slider.set_val"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Slider.set_val">[docs]</a>    <span class="k">def</span> <span class="nf">set_val</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Set slider value to *val*</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        val : float</span>
<span class="sd">        """</span>
        <span class="n">xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">poly</span><span class="o">.</span><span class="n">xy</span>
        <span class="n">xy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span><span class="p">,</span> <span class="mi">1</span>
        <span class="n">xy</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span><span class="p">,</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">poly</span><span class="o">.</span><span class="n">xy</span> <span class="o">=</span> <span class="n">xy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valtext</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valfmt</span> <span class="o">%</span> <span class="n">val</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">val</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventson</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">observers</span><span class="p">):</span>
            <span class="n">func</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></div>

<div class="viewcode-block" id="Slider.on_changed"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Slider.on_changed">[docs]</a>    <span class="k">def</span> <span class="nf">on_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        When the slider value is changed call *func* with the new</span>
<span class="sd">        slider value</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        func : callable</span>
<span class="sd">            Function to call when slider is changed.</span>
<span class="sd">            The function must accept a single float as its arguments.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        cid : int</span>
<span class="sd">            Connection id (which can be used to disconnect *func*)</span>
<span class="sd">        """</span>
        <span class="n">cid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observers</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">cid</span></div>

<div class="viewcode-block" id="Slider.disconnect"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Slider.disconnect">[docs]</a>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Remove the observer with connection id *cid*</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        cid : int</span>
<span class="sd">            Connection id of the observer to be removed</span>
<span class="sd">        """</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">observers</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="Slider.reset"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Slider.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Reset the slider to the initial value"""</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valinit</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_val</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valinit</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="CheckButtons"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.CheckButtons">[docs]</a><span class="k">class</span> <span class="nc">CheckButtons</span><span class="p">(</span><span class="n">AxesWidget</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    A GUI neutral set of check buttons.</span>

<span class="sd">    For the check buttons to remain responsive you must keep a</span>
<span class="sd">    reference to this object.</span>

<span class="sd">    The following attributes are exposed</span>

<span class="sd">     *ax*</span>
<span class="sd">        The :class:`matplotlib.axes.Axes` instance the buttons are</span>
<span class="sd">        located in</span>

<span class="sd">     *labels*</span>
<span class="sd">        List of :class:`matplotlib.text.Text` instances</span>

<span class="sd">     *lines*</span>
<span class="sd">        List of (line1, line2) tuples for the x's in the check boxes.</span>
<span class="sd">        These lines exist for each box, but have ``set_visible(False)``</span>
<span class="sd">        when its box is not checked.</span>

<span class="sd">     *rectangles*</span>
<span class="sd">        List of :class:`matplotlib.patches.Rectangle` instances</span>

<span class="sd">    Connect to the CheckButtons with the :meth:`on_clicked` method</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">actives</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Add check buttons to :class:`matplotlib.axes.Axes` instance *ax*</span>

<span class="sd">        *labels*</span>
<span class="sd">            A len(buttons) list of labels as strings</span>

<span class="sd">        *actives*</span>
<span class="sd">            A len(buttons) list of booleans indicating whether</span>
<span class="sd">             the button is active</span>
<span class="sd">        """</span>
        <span class="n">AxesWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="mf">0.25</span>
            <span class="n">ys</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">]</span>

        <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">axcolor</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_facecolor</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rectangles</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">lineparams</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'color'</span><span class="p">:</span> <span class="s1">'k'</span><span class="p">,</span> <span class="s1">'linewidth'</span><span class="p">:</span> <span class="mf">1.25</span><span class="p">,</span>
                      <span class="s1">'transform'</span><span class="p">:</span> <span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span> <span class="s1">'solid_capstyle'</span><span class="p">:</span> <span class="s1">'butt'</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">ys</span><span class="p">,</span> <span class="n">labels</span><span class="p">):</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
                        <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span>
                        <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">'center'</span><span class="p">)</span>

            <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">dy</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">dy</span> <span class="o">/</span> <span class="mf">2.</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">h</span> <span class="o">/</span> <span class="mf">2.</span>

            <span class="n">p</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">h</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span>
                          <span class="n">facecolor</span><span class="o">=</span><span class="n">axcolor</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

            <span class="n">l1</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">w</span><span class="p">],</span> <span class="p">[</span><span class="n">y</span> <span class="o">+</span> <span class="n">h</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="o">**</span><span class="n">lineparams</span><span class="p">)</span>
            <span class="n">l2</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">w</span><span class="p">],</span> <span class="p">[</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">h</span><span class="p">],</span> <span class="o">**</span><span class="n">lineparams</span><span class="p">)</span>

            <span class="n">l1</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">actives</span><span class="p">[</span><span class="n">cnt</span><span class="p">])</span>
            <span class="n">l2</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">actives</span><span class="p">[</span><span class="n">cnt</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rectangles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">l1</span><span class="p">,</span> <span class="n">l2</span><span class="p">))</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>
            <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'button_press_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clicked</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observers</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rectangles</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">)):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="ow">or</span>
                    <span class="n">p</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span>

<div class="viewcode-block" id="CheckButtons.set_active"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.CheckButtons.set_active">[docs]</a>    <span class="k">def</span> <span class="nf">set_active</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Directly (de)activate a check button by index.</span>

<span class="sd">        *index* is an index into the original label list</span>
<span class="sd">            that this object was constructed with.</span>
<span class="sd">            Raises ValueError if *index* is invalid.</span>

<span class="sd">        Callbacks will be triggered if :attr:`eventson` is True.</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&gt;</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Invalid CheckButton index: </span><span class="si">%d</span><span class="s2">"</span> <span class="o">%</span> <span class="n">index</span><span class="p">)</span>

        <span class="n">l1</span><span class="p">,</span> <span class="n">l2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="n">l1</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="ow">not</span> <span class="n">l1</span><span class="o">.</span><span class="n">get_visible</span><span class="p">())</span>
        <span class="n">l2</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="ow">not</span> <span class="n">l2</span><span class="o">.</span><span class="n">get_visible</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventson</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">observers</span><span class="p">):</span>
            <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span></div>

<div class="viewcode-block" id="CheckButtons.get_status"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.CheckButtons.get_status">[docs]</a>    <span class="k">def</span> <span class="nf">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        returns a tuple of the status (True/False) of all of the check buttons</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">l1</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span> <span class="k">for</span> <span class="p">(</span><span class="n">l1</span><span class="p">,</span> <span class="n">l2</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">]</span></div>

<div class="viewcode-block" id="CheckButtons.on_clicked"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.CheckButtons.on_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">on_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        When the button is clicked, call *func* with button label</span>

<span class="sd">        A connection id is returned which can be used to disconnect</span>
<span class="sd">        """</span>
        <span class="n">cid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observers</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">cid</span></div>

<div class="viewcode-block" id="CheckButtons.disconnect"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.CheckButtons.disconnect">[docs]</a>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="p">):</span>
        <span class="sd">"""remove the observer with connection id *cid*"""</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">observers</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span></div></div>


<div class="viewcode-block" id="TextBox"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.TextBox">[docs]</a><span class="k">class</span> <span class="nc">TextBox</span><span class="p">(</span><span class="n">AxesWidget</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    A GUI neutral text input box.</span>

<span class="sd">    For the text box to remain responsive you must keep a reference to it.</span>

<span class="sd">    The following attributes are accessible:</span>

<span class="sd">      *ax*</span>
<span class="sd">        The :class:`matplotlib.axes.Axes` the button renders into.</span>

<span class="sd">      *label*</span>
<span class="sd">        A :class:`matplotlib.text.Text` instance.</span>

<span class="sd">      *color*</span>
<span class="sd">        The color of the text box when not hovering.</span>

<span class="sd">      *hovercolor*</span>
<span class="sd">        The color of the text box when hovering.</span>

<span class="sd">    Call :meth:`on_text_change` to be updated whenever the text changes.</span>

<span class="sd">    Call :meth:`on_submit` to be updated whenever the user hits enter or</span>
<span class="sd">    leaves the text entry field.</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">initial</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="s1">'.95'</span><span class="p">,</span> <span class="n">hovercolor</span><span class="o">=</span><span class="s1">'1'</span><span class="p">,</span> <span class="n">label_pad</span><span class="o">=.</span><span class="mi">01</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ax : matplotlib.axes.Axes</span>
<span class="sd">            The :class:`matplotlib.axes.Axes` instance the button</span>
<span class="sd">            will be placed into.</span>

<span class="sd">        label : str</span>
<span class="sd">            Label for this text box. Accepts string.</span>

<span class="sd">        initial : str</span>
<span class="sd">            Initial value in the text box</span>

<span class="sd">        color : color</span>
<span class="sd">            The color of the box</span>

<span class="sd">        hovercolor : color</span>
<span class="sd">            The color of the box when the mouse is over it</span>

<span class="sd">        label_pad : float</span>
<span class="sd">            the distance between the label and the right side of the textbox</span>
<span class="sd">        """</span>
        <span class="n">AxesWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">DIST_FROM_LEFT</span> <span class="o">=</span> <span class="o">.</span><span class="mi">05</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">params_to_disable</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">rcParams</span> <span class="k">if</span> <span class="sa">u</span><span class="s1">'keymap'</span> <span class="ow">in</span> <span class="n">key</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">initial</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="n">label_pad</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span>
                             <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span>
                             <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">'right'</span><span class="p">,</span>
                             <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_disp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_text_disp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">change_observers</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">submit_observers</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># If these lines are removed, the cursor won't appear the first</span>
        <span class="c1"># time the box is clicked:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Because this is initialized, _render_cursor</span>
        <span class="c1"># can assume that cursor exists.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'button_press_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_click</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'button_release_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_release</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'motion_notify_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'key_press_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keypress</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'resize_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resize</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hovercolor</span> <span class="o">=</span> <span class="n">hovercolor</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lastcolor</span> <span class="o">=</span> <span class="n">color</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">capturekeystrokes</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_make_text_disp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DIST_FROM_LEFT</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span>
                            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span>
                            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span>
                            <span class="n">transform</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_rendercursor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># this is a hack to figure out where the cursor should go.</span>
        <span class="c1"># we draw the text up to where the cursor should go, measure</span>
        <span class="c1"># and save its dimensions, draw the real text, then put the cursor</span>
        <span class="c1"># at the saved dimensions</span>

        <span class="n">widthtext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span><span class="p">]</span>
        <span class="n">no_text</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span><span class="p">(</span><span class="n">widthtext</span> <span class="o">==</span> <span class="s2">""</span> <span class="ow">or</span> <span class="n">widthtext</span> <span class="o">==</span> <span class="s2">" "</span> <span class="ow">or</span> <span class="n">widthtext</span> <span class="o">==</span> <span class="s2">"  "</span><span class="p">):</span>
            <span class="n">no_text</span> <span class="o">=</span> <span class="n">widthtext</span> <span class="o">==</span> <span class="s2">""</span>
            <span class="n">widthtext</span> <span class="o">=</span> <span class="s2">","</span>

        <span class="n">wt_disp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_text_disp</span><span class="p">(</span><span class="n">widthtext</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="n">bb</span> <span class="o">=</span> <span class="n">wt_disp</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span>
        <span class="n">inv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
        <span class="n">bb</span> <span class="o">=</span> <span class="n">inv</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">bb</span><span class="p">)</span>
        <span class="n">wt_disp</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">no_text</span><span class="p">:</span>
            <span class="n">bb</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">bb</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="c1"># hack done</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">bb</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">bb</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">bb</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_notify_submit_observers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">submit_observers</span><span class="p">):</span>
                <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mouse_grabber</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">release_mouse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_keypress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">capturekeystrokes</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span>

            <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span><span class="p">]</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span><span class="p">:])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">"right"</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">"left"</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">"home"</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">"end"</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">elif</span><span class="p">(</span><span class="n">key</span> <span class="o">==</span> <span class="s2">"backspace"</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span><span class="p">:])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">elif</span><span class="p">(</span><span class="n">key</span> <span class="o">==</span> <span class="s2">"delete"</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span><span class="p">]</span> <span class="o">+</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">text_disp</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_disp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_text_disp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rendercursor</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_change_observers</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">"enter"</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_notify_submit_observers</span><span class="p">()</span>

<div class="viewcode-block" id="TextBox.set_val"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.TextBox.set_val">[docs]</a>    <span class="k">def</span> <span class="nf">set_val</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="n">newval</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="n">newval</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">newval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_disp</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text_disp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_text_disp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rendercursor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_notify_change_observers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_notify_submit_observers</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_notify_change_observers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_observers</span><span class="p">):</span>
            <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

<div class="viewcode-block" id="TextBox.begin_typing"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.TextBox.begin_typing">[docs]</a>    <span class="k">def</span> <span class="nf">begin_typing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capturekeystrokes</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># disable command keys so that the user can type without</span>
        <span class="c1"># command keys causing figure to be saved, etc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset_params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params_to_disable</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset_params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">rcParams</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="n">rcParams</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="TextBox.stop_typing"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.TextBox.stop_typing">[docs]</a>    <span class="k">def</span> <span class="nf">stop_typing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">notifysubmit</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># because _notify_submit_users might throw an error in the</span>
        <span class="c1"># user's code, we only want to call it once we've already done</span>
        <span class="c1"># our cleanup.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">capturekeystrokes</span><span class="p">:</span>
            <span class="c1"># since the user is no longer typing,</span>
            <span class="c1"># reactivate the standard command keys</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params_to_disable</span><span class="p">:</span>
                <span class="n">rcParams</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reset_params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="n">notifysubmit</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capturekeystrokes</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">notifysubmit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_submit_observers</span><span class="p">()</span></div>

<div class="viewcode-block" id="TextBox.position_cursor"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.TextBox.position_cursor">[docs]</a>    <span class="k">def</span> <span class="nf">position_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="c1"># now, we have to figure out where the cursor goes.</span>
        <span class="c1"># approximate it based on assuming all characters the same length</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_disp</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span>

            <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span>
            <span class="n">inv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
            <span class="n">bb</span> <span class="o">=</span> <span class="n">trans</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">inv</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">bb</span><span class="p">))</span>

            <span class="n">text_start</span> <span class="o">=</span> <span class="n">bb</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">text_end</span> <span class="o">=</span> <span class="n">bb</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

            <span class="n">ratio</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">text_start</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">text_end</span> <span class="o">-</span> <span class="n">text_start</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">ratio</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">ratio</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">ratio</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">ratio</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">cursor_index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span> <span class="o">*</span> <span class="n">ratio</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_rendercursor</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stop_typing</span><span class="p">()</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventson</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mouse_grabber</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">grab_mouse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">capturekeystrokes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">begin_typing</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position_cursor</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_typing</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hovercolor</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span>
        <span class="k">if</span> <span class="n">c</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lastcolor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lastcolor</span> <span class="o">=</span> <span class="n">c</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<div class="viewcode-block" id="TextBox.on_text_change"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.TextBox.on_text_change">[docs]</a>    <span class="k">def</span> <span class="nf">on_text_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        When the text changes, call this *func* with event.</span>

<span class="sd">        A connection id is returned which can be used to disconnect.</span>
<span class="sd">        """</span>
        <span class="n">cid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">change_observers</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">cid</span></div>

<div class="viewcode-block" id="TextBox.on_submit"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.TextBox.on_submit">[docs]</a>    <span class="k">def</span> <span class="nf">on_submit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        When the user hits enter or leaves the submision box, call this</span>
<span class="sd">        *func* with event.</span>

<span class="sd">        A connection id is returned which can be used to disconnect.</span>
<span class="sd">        """</span>
        <span class="n">cid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">submit_observers</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">cid</span></div>

<div class="viewcode-block" id="TextBox.disconnect"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.TextBox.disconnect">[docs]</a>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="p">):</span>
        <span class="sd">"""remove the observer with connection id *cid*"""</span>
        <span class="k">for</span> <span class="n">reg</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_observers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">submit_observers</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">reg</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">pass</span></div></div>


<div class="viewcode-block" id="RadioButtons"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.RadioButtons">[docs]</a><span class="k">class</span> <span class="nc">RadioButtons</span><span class="p">(</span><span class="n">AxesWidget</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    A GUI neutral radio button.</span>

<span class="sd">    For the buttons to remain responsive</span>
<span class="sd">    you must keep a reference to this object.</span>

<span class="sd">    The following attributes are exposed:</span>

<span class="sd">     *ax*</span>
<span class="sd">        The :class:`matplotlib.axes.Axes` instance the buttons are in</span>

<span class="sd">     *activecolor*</span>
<span class="sd">        The color of the button when clicked</span>

<span class="sd">     *labels*</span>
<span class="sd">        A list of :class:`matplotlib.text.Text` instances</span>

<span class="sd">     *circles*</span>
<span class="sd">        A list of :class:`matplotlib.patches.Circle` instances</span>

<span class="sd">     *value_selected*</span>
<span class="sd">        A string listing the current value selected</span>

<span class="sd">    Connect to the RadioButtons with the :meth:`on_clicked` method</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">active</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">activecolor</span><span class="o">=</span><span class="s1">'blue'</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Add radio buttons to :class:`matplotlib.axes.Axes` instance *ax*</span>

<span class="sd">        *labels*</span>
<span class="sd">            A len(buttons) list of labels as strings</span>

<span class="sd">        *active*</span>
<span class="sd">            The index into labels for the button that is active</span>

<span class="sd">        *activecolor*</span>
<span class="sd">            The color of the button when clicked</span>
<span class="sd">        """</span>
        <span class="n">AxesWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">activecolor</span> <span class="o">=</span> <span class="n">activecolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value_selected</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>
        <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">axcolor</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_facecolor</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">ys</span><span class="p">,</span> <span class="n">labels</span><span class="p">):</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
                        <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span>
                        <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">'center'</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">cnt</span> <span class="o">==</span> <span class="n">active</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value_selected</span> <span class="o">=</span> <span class="n">label</span>
                <span class="n">facecolor</span> <span class="o">=</span> <span class="n">activecolor</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">facecolor</span> <span class="o">=</span> <span class="n">axcolor</span>

            <span class="n">p</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span>
                       <span class="n">facecolor</span><span class="o">=</span><span class="n">facecolor</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">circles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'button_press_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clicked</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observers</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
        <span class="n">pclicked</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">xy</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>

        <span class="k">def</span> <span class="nf">inside</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
            <span class="n">pcirc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">pclicked</span> <span class="o">-</span> <span class="n">pcirc</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">p</span><span class="o">.</span><span class="n">radius</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">circles</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="ow">or</span> <span class="n">inside</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span>

<div class="viewcode-block" id="RadioButtons.set_active"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.RadioButtons.set_active">[docs]</a>    <span class="k">def</span> <span class="nf">set_active</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Trigger which radio button to make active.</span>

<span class="sd">        *index* is an index into the original label list</span>
<span class="sd">            that this object was constructed with.</span>
<span class="sd">            Raise ValueError if the index is invalid.</span>

<span class="sd">        Callbacks will be triggered if :attr:`eventson` is True.</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&gt;</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Invalid RadioButton index: </span><span class="si">%d</span><span class="s2">"</span> <span class="o">%</span> <span class="n">index</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">value_selected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">circles</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">index</span><span class="p">:</span>
                <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">activecolor</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_facecolor</span><span class="p">()</span>
            <span class="n">p</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventson</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">cid</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">observers</span><span class="p">):</span>
            <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span></div>

<div class="viewcode-block" id="RadioButtons.on_clicked"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.RadioButtons.on_clicked">[docs]</a>    <span class="k">def</span> <span class="nf">on_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        When the button is clicked, call *func* with button label</span>

<span class="sd">        A connection id is returned which can be used to disconnect</span>
<span class="sd">        """</span>
        <span class="n">cid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observers</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">cid</span></div>

<div class="viewcode-block" id="RadioButtons.disconnect"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.RadioButtons.disconnect">[docs]</a>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="p">):</span>
        <span class="sd">"""remove the observer with connection id *cid*"""</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">observers</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span></div></div>


<div class="viewcode-block" id="SubplotTool"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.SubplotTool">[docs]</a><span class="k">class</span> <span class="nc">SubplotTool</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    A tool to adjust the subplot params of a :class:`matplotlib.figure.Figure`.</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">targetfig</span><span class="p">,</span> <span class="n">toolfig</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        *targetfig*</span>
<span class="sd">            The figure instance to adjust.</span>

<span class="sd">        *toolfig*</span>
<span class="sd">            The figure instance to embed the subplot tool into. If</span>
<span class="sd">            *None*, a default figure will be created. If you are using</span>
<span class="sd">            this from the GUI</span>
<span class="sd">        """</span>
        <span class="c1"># FIXME: The docstring seems to just abruptly end without...</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span> <span class="o">=</span> <span class="n">targetfig</span>
        <span class="n">toolfig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">toolbarfmt</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slider</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">slider</span> <span class="o">=</span> <span class="n">slider</span>

            <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="s1">'</span><span class="si">%s</span><span class="s1">=</span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">get_text</span><span class="p">(),</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">valfmt</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">fmt</span> <span class="o">%</span> <span class="n">x</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">axleft</span> <span class="o">=</span> <span class="n">toolfig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">711</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axleft</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'Click on slider to adjust subplot param'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axleft</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sliderleft</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axleft</span><span class="p">,</span> <span class="s1">'left'</span><span class="p">,</span>
                                 <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">targetfig</span><span class="o">.</span><span class="n">subplotpars</span><span class="o">.</span><span class="n">left</span><span class="p">,</span>
                                 <span class="n">closedmax</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliderleft</span><span class="o">.</span><span class="n">on_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">funcleft</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">axbottom</span> <span class="o">=</span> <span class="n">toolfig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">712</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axbottom</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliderbottom</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axbottom</span><span class="p">,</span>
                                   <span class="s1">'bottom'</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                                   <span class="n">targetfig</span><span class="o">.</span><span class="n">subplotpars</span><span class="o">.</span><span class="n">bottom</span><span class="p">,</span>
                                   <span class="n">closedmax</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliderbottom</span><span class="o">.</span><span class="n">on_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">funcbottom</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">axright</span> <span class="o">=</span> <span class="n">toolfig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">713</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axright</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliderright</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axright</span><span class="p">,</span> <span class="s1">'right'</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                                  <span class="n">targetfig</span><span class="o">.</span><span class="n">subplotpars</span><span class="o">.</span><span class="n">right</span><span class="p">,</span>
                                  <span class="n">closedmin</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliderright</span><span class="o">.</span><span class="n">on_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">funcright</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">axtop</span> <span class="o">=</span> <span class="n">toolfig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">714</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axtop</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slidertop</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axtop</span><span class="p">,</span> <span class="s1">'top'</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="n">targetfig</span><span class="o">.</span><span class="n">subplotpars</span><span class="o">.</span><span class="n">top</span><span class="p">,</span>
                                <span class="n">closedmin</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slidertop</span><span class="o">.</span><span class="n">on_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">functop</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">axwspace</span> <span class="o">=</span> <span class="n">toolfig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">715</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axwspace</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliderwspace</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axwspace</span><span class="p">,</span> <span class="s1">'wspace'</span><span class="p">,</span>
                                   <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">targetfig</span><span class="o">.</span><span class="n">subplotpars</span><span class="o">.</span><span class="n">wspace</span><span class="p">,</span>
                                   <span class="n">closedmax</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliderwspace</span><span class="o">.</span><span class="n">on_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">funcwspace</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">axhspace</span> <span class="o">=</span> <span class="n">toolfig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">716</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axhspace</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliderhspace</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axhspace</span><span class="p">,</span> <span class="s1">'hspace'</span><span class="p">,</span>
                                   <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">targetfig</span><span class="o">.</span><span class="n">subplotpars</span><span class="o">.</span><span class="n">hspace</span><span class="p">,</span>
                                   <span class="n">closedmax</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliderhspace</span><span class="o">.</span><span class="n">on_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">funchspace</span><span class="p">)</span>

        <span class="c1"># constraints</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliderleft</span><span class="o">.</span><span class="n">slidermax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sliderright</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliderright</span><span class="o">.</span><span class="n">slidermin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sliderleft</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliderbottom</span><span class="o">.</span><span class="n">slidermax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slidertop</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slidertop</span><span class="o">.</span><span class="n">slidermin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sliderbottom</span>

        <span class="n">bax</span> <span class="o">=</span> <span class="n">toolfig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.075</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttonreset</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">bax</span><span class="p">,</span> <span class="s1">'Reset'</span><span class="p">)</span>

        <span class="n">sliders</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sliderleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sliderbottom</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sliderright</span><span class="p">,</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">slidertop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sliderwspace</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sliderhspace</span><span class="p">,)</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="n">thisdrawon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="c1"># store the drawon state of each slider</span>
            <span class="n">bs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">slider</span> <span class="ow">in</span> <span class="n">sliders</span><span class="p">:</span>
                <span class="n">bs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">slider</span><span class="o">.</span><span class="n">drawon</span><span class="p">)</span>
                <span class="n">slider</span><span class="o">.</span><span class="n">drawon</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="c1"># reset the slider to the initial position</span>
            <span class="k">for</span> <span class="n">slider</span> <span class="ow">in</span> <span class="n">sliders</span><span class="p">:</span>
                <span class="n">slider</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

            <span class="c1"># reset drawon</span>
            <span class="k">for</span> <span class="n">slider</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sliders</span><span class="p">,</span> <span class="n">bs</span><span class="p">):</span>
                <span class="n">slider</span><span class="o">.</span><span class="n">drawon</span> <span class="o">=</span> <span class="n">b</span>

            <span class="c1"># draw the canvas</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span> <span class="o">=</span> <span class="n">thisdrawon</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span><span class="p">:</span>
                <span class="n">toolfig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="c1"># during reset there can be a temporary invalid state</span>
        <span class="c1"># depending on the order of the reset so we turn off</span>
        <span class="c1"># validation for the resetting</span>
        <span class="n">validate</span> <span class="o">=</span> <span class="n">toolfig</span><span class="o">.</span><span class="n">subplotpars</span><span class="o">.</span><span class="n">validate</span>
        <span class="n">toolfig</span><span class="o">.</span><span class="n">subplotpars</span><span class="o">.</span><span class="n">validate</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttonreset</span><span class="o">.</span><span class="n">on_clicked</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="n">toolfig</span><span class="o">.</span><span class="n">subplotpars</span><span class="o">.</span><span class="n">validate</span> <span class="o">=</span> <span class="n">validate</span>

<div class="viewcode-block" id="SubplotTool.funcleft"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.SubplotTool.funcleft">[docs]</a>    <span class="k">def</span> <span class="nf">funcleft</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">val</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>

<div class="viewcode-block" id="SubplotTool.funcright"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.SubplotTool.funcright">[docs]</a>    <span class="k">def</span> <span class="nf">funcright</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="n">val</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>

<div class="viewcode-block" id="SubplotTool.funcbottom"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.SubplotTool.funcbottom">[docs]</a>    <span class="k">def</span> <span class="nf">funcbottom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="n">val</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>

<div class="viewcode-block" id="SubplotTool.functop"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.SubplotTool.functop">[docs]</a>    <span class="k">def</span> <span class="nf">functop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="n">val</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>

<div class="viewcode-block" id="SubplotTool.funcwspace"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.SubplotTool.funcwspace">[docs]</a>    <span class="k">def</span> <span class="nf">funcwspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="n">val</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>

<div class="viewcode-block" id="SubplotTool.funchspace"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.SubplotTool.funchspace">[docs]</a>    <span class="k">def</span> <span class="nf">funchspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="n">val</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">targetfig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Cursor"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Cursor">[docs]</a><span class="k">class</span> <span class="nc">Cursor</span><span class="p">(</span><span class="n">AxesWidget</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    A horizontal and vertical line that spans the axes and moves with</span>
<span class="sd">    the pointer.  You can turn off the hline or vline respectively with</span>
<span class="sd">    the following attributes:</span>

<span class="sd">      *horizOn*</span>
<span class="sd">        Controls the visibility of the horizontal line</span>

<span class="sd">      *vertOn*</span>
<span class="sd">        Controls the visibility of the horizontal line</span>

<span class="sd">    and the visibility of the cursor itself with the *visible* attribute.</span>

<span class="sd">    For the cursor to remain responsive you must keep a reference to</span>
<span class="sd">    it.</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">horizOn</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vertOn</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">lineprops</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Add a cursor to *ax*.  If ``useblit=True``, use the backend-dependent</span>
<span class="sd">        blitting features for faster updates.  *lineprops* is a dictionary of</span>
<span class="sd">        line properties.</span>
<span class="sd">        """</span>
        <span class="n">AxesWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'motion_notify_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onmove</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'draw_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">horizOn</span> <span class="o">=</span> <span class="n">horizOn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertOn</span> <span class="o">=</span> <span class="n">vertOn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span> <span class="o">=</span> <span class="n">useblit</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">supports_blit</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">:</span>
            <span class="n">lineprops</span><span class="p">[</span><span class="s1">'animated'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineh</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">lineprops</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linev</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">lineprops</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">needclear</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="Cursor.clear"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Cursor.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""clear the cursor"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">copy_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linev</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineh</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="Cursor.onmove"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Cursor.onmove">[docs]</a>    <span class="k">def</span> <span class="nf">onmove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""on mouse motion draw the cursor if visible"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">widgetlock</span><span class="o">.</span><span class="n">available</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linev</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lineh</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">needclear</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">needclear</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">needclear</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linev</span><span class="o">.</span><span class="n">set_xdata</span><span class="p">((</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lineh</span><span class="o">.</span><span class="n">set_ydata</span><span class="p">((</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linev</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertOn</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineh</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizOn</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">restore_region</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">draw_artist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linev</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">draw_artist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lineh</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>

        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="MultiCursor"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.MultiCursor">[docs]</a><span class="k">class</span> <span class="nc">MultiCursor</span><span class="p">(</span><span class="n">Widget</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Provide a vertical (default) and/or horizontal line cursor shared between</span>
<span class="sd">    multiple axes.</span>

<span class="sd">    For the cursor to remain responsive you must keep a reference to</span>
<span class="sd">    it.</span>

<span class="sd">    Example usage::</span>

<span class="sd">        from matplotlib.widgets import MultiCursor</span>
<span class="sd">        from pylab import figure, show, np</span>

<span class="sd">        t = np.arange(0.0, 2.0, 0.01)</span>
<span class="sd">        s1 = np.sin(2*np.pi*t)</span>
<span class="sd">        s2 = np.sin(4*np.pi*t)</span>
<span class="sd">        fig = figure()</span>
<span class="sd">        ax1 = fig.add_subplot(211)</span>
<span class="sd">        ax1.plot(t, s1)</span>


<span class="sd">        ax2 = fig.add_subplot(212, sharex=ax1)</span>
<span class="sd">        ax2.plot(t, s2)</span>

<span class="sd">        multi = MultiCursor(fig.canvas, (ax1, ax2), color='r', lw=1,</span>
<span class="sd">                            horizOn=False, vertOn=True)</span>
<span class="sd">        show()</span>

<span class="sd">    """</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">horizOn</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">vertOn</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">lineprops</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">canvas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">horizOn</span> <span class="o">=</span> <span class="n">horizOn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertOn</span> <span class="o">=</span> <span class="n">vertOn</span>

        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="n">xmid</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">xmax</span><span class="p">)</span>
        <span class="n">ymid</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">ymax</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span> <span class="o">=</span> <span class="n">useblit</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">supports_blit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">needclear</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">:</span>
            <span class="n">lineprops</span><span class="p">[</span><span class="s1">'animated'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">vertOn</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">xmid</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">lineprops</span><span class="p">)</span>
                           <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vlines</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">horizOn</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">ymid</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">lineprops</span><span class="p">)</span>
                           <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hlines</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<div class="viewcode-block" id="MultiCursor.connect"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.MultiCursor.connect">[docs]</a>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""connect events"""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cidmotion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">'motion_notify_event'</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">onmove</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ciddraw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">'draw_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">)</span></div>

<div class="viewcode-block" id="MultiCursor.disconnect"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.MultiCursor.disconnect">[docs]</a>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""disconnect events"""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cidmotion</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ciddraw</span><span class="p">)</span></div>

<div class="viewcode-block" id="MultiCursor.clear"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.MultiCursor.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""clear the cursor"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">copy_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">bbox</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vlines</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">hlines</span><span class="p">:</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="MultiCursor.onmove"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.MultiCursor.onmove">[docs]</a>    <span class="k">def</span> <span class="nf">onmove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">widgetlock</span><span class="o">.</span><span class="n">available</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">needclear</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertOn</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vlines</span><span class="p">:</span>
                <span class="n">line</span><span class="o">.</span><span class="n">set_xdata</span><span class="p">((</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">))</span>
                <span class="n">line</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">visible</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizOn</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hlines</span><span class="p">:</span>
                <span class="n">line</span><span class="o">.</span><span class="n">set_ydata</span><span class="p">((</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">))</span>
                <span class="n">line</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">visible</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">restore_region</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertOn</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vlines</span><span class="p">):</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">draw_artist</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizOn</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hlines</span><span class="p">):</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">draw_artist</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span></div>


<span class="k">class</span> <span class="nc">_SelectorWidget</span><span class="p">(</span><span class="n">AxesWidget</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">onselect</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">state_modifier_keys</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">AxesWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onselect</span> <span class="o">=</span> <span class="n">onselect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span> <span class="o">=</span> <span class="n">useblit</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">supports_blit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_default_events</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">state_modifier_keys</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">move</span><span class="o">=</span><span class="s1">' '</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="s1">'escape'</span><span class="p">,</span>
                                        <span class="n">square</span><span class="o">=</span><span class="s1">'shift'</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="s1">'control'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state_modifier_keys</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">state_modifier_keys</span> <span class="ow">or</span> <span class="p">{})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artists</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validButtons</span> <span class="o">=</span> <span class="p">[</span><span class="n">button</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validButtons</span> <span class="o">=</span> <span class="n">button</span>

        <span class="c1"># will save the data (position at mouseclick)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># will save the data (pos. at mouserelease)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eventrelease</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prev_event</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_active</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">active</span><span class="p">):</span>
        <span class="n">AxesWidget</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">active</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">active</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_background</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_background</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""force an update of the background"""</span>
        <span class="c1"># If you add a call to `ignore` here, you'll want to check edge case:</span>
        <span class="c1"># `release` can call a draw event even when `ignore` is True.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">copy_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">connect_default_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Connect the major canvas events to methods."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'motion_notify_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onmove</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'button_press_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">press</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'button_release_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">release</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'draw_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_background</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'key_press_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_key_press</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'key_release_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_key_release</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'scroll_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_scroll</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ignore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""return *True* if *event* should be ignored"""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="c1"># If canvas was locked</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">widgetlock</span><span class="o">.</span><span class="n">available</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="s1">'button'</span><span class="p">):</span>
            <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Only do rectangle selection if event was triggered</span>
        <span class="c1"># with a desired button</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validButtons</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validButtons</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="c1"># If no button was pressed yet ignore the event if it was out</span>
        <span class="c1"># of the axes</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span>

        <span class="c1"># If a button was pressed, check if the release-button is the</span>
        <span class="c1"># same.</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">button</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># If a button was pressed, check if the release-button is the</span>
        <span class="c1"># same.</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="ow">or</span>
                <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""draw using newfangled blit or oldfangled draw depending on</span>
<span class="sd">        useblit</span>

<span class="sd">        """</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">restore_region</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">draw_artist</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Get the xdata and ydata for event, with limits"""</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>
        <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>
        <span class="n">xdata</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">)</span>
        <span class="n">xdata</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">xdata</span><span class="p">)</span>
        <span class="n">ydata</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">)</span>
        <span class="n">ydata</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span>

    <span class="k">def</span> <span class="nf">_clean_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Clean up an event</span>

<span class="sd">        Use prev event if there is no xdata</span>
<span class="sd">        Limit the xdata and ydata to the axes limits</span>
<span class="sd">        Set the prev event</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prev_event</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">event</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_prev_event</span> <span class="o">=</span> <span class="n">event</span>
        <span class="k">return</span> <span class="n">event</span>

    <span class="k">def</span> <span class="nf">press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Button press handler and validator"""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clean_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span> <span class="o">=</span> <span class="n">event</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prev_event</span> <span class="o">=</span> <span class="n">event</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">or</span> <span class="s1">''</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'ctrl'</span><span class="p">,</span> <span class="s1">'control'</span><span class="p">)</span>
            <span class="c1"># move state is locked in on a button press</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_modifier_keys</span><span class="p">[</span><span class="s1">'move'</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">'move'</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_press</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Button press handler"""</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Button release event handler and validator"""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="p">:</span>
            <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clean_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eventrelease</span> <span class="o">=</span> <span class="n">event</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_release</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eventrelease</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="s1">'move'</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Button release event handler"""</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">onmove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Cursor move event handler and validator"""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="p">:</span>
            <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clean_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_onmove</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_onmove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Cursor move event handler"""</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">on_scroll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Mouse scroll event handler and validator"""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_on_scroll</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_on_scroll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Mouse scroll event handler"""</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">on_key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Key press event handler and validator for all selection widgets"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">or</span> <span class="s1">''</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'ctrl'</span><span class="p">,</span> <span class="s1">'control'</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_modifier_keys</span><span class="p">[</span><span class="s1">'clear'</span><span class="p">]:</span>
                <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="p">:</span>
                    <span class="n">artist</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="k">return</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">modifier</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_modifier_keys</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">modifier</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_on_key_press</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_on_key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Key press event handler - use for widget-specific key press actions.</span>
<span class="sd">        """</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">on_key_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Key release event handler and validator"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="ow">or</span> <span class="s1">''</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">modifier</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_modifier_keys</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">modifier</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_on_key_release</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_on_key_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Key release event handler"""</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">set_visible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visible</span><span class="p">):</span>
        <span class="sd">""" Set the visibility of our artists """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="n">visible</span>
        <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="p">:</span>
            <span class="n">artist</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">visible</span><span class="p">)</span>


<div class="viewcode-block" id="SpanSelector"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.SpanSelector">[docs]</a><span class="k">class</span> <span class="nc">SpanSelector</span><span class="p">(</span><span class="n">_SelectorWidget</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Visually select a min/max range on a single axis and call a function with</span>
<span class="sd">    those values.</span>

<span class="sd">    To guarantee that the selector remains responsive, keep a reference to it.</span>

<span class="sd">    In order to turn off the SpanSelector, set `span_selector.active=False`. To</span>
<span class="sd">    turn it back on, set `span_selector.active=True`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax :  :class:`matplotlib.axes.Axes` object</span>

<span class="sd">    onselect : func(min, max), min/max are floats</span>

<span class="sd">    direction : "horizontal" or "vertical"</span>
<span class="sd">      The axis along which to draw the span selector</span>

<span class="sd">    minspan : float, default is None</span>
<span class="sd">     If selection is less than *minspan*, do not call *onselect*</span>

<span class="sd">    useblit : bool, default is False</span>
<span class="sd">      If True, use the backend-dependent blitting features for faster</span>
<span class="sd">      canvas updates.</span>

<span class="sd">    rectprops : dict, default is None</span>
<span class="sd">      Dictionary of :class:`matplotlib.patches.Patch` properties</span>

<span class="sd">    onmove_callback : func(min, max), min/max are floats, default is None</span>
<span class="sd">      Called on mouse move while the span is being selected</span>

<span class="sd">    span_stays : bool, default is False</span>
<span class="sd">      If True, the span stays visible after the mouse is released</span>

<span class="sd">    button : int or list of ints</span>
<span class="sd">      Determines which mouse buttons activate the span selector</span>
<span class="sd">        1 = left mouse button\n</span>
<span class="sd">        2 = center mouse button (scroll wheel)\n</span>
<span class="sd">        3 = right mouse button\n</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; import matplotlib.widgets as mwidgets</span>
<span class="sd">    &gt;&gt;&gt; fig, ax = plt.subplots()</span>
<span class="sd">    &gt;&gt;&gt; ax.plot([1, 2, 3], [10, 50, 100])</span>
<span class="sd">    &gt;&gt;&gt; def onselect(vmin, vmax):</span>
<span class="sd">            print(vmin, vmax)</span>
<span class="sd">    &gt;&gt;&gt; rectprops = dict(facecolor='blue', alpha=0.5)</span>
<span class="sd">    &gt;&gt;&gt; span = mwidgets.SpanSelector(ax, onselect, 'horizontal',</span>
<span class="sd">                                     rectprops=rectprops)</span>
<span class="sd">    &gt;&gt;&gt; fig.show()</span>

<span class="sd">    See also: :ref:`sphx_glr_gallery_widgets_span_selector.py`</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">onselect</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">minspan</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">rectprops</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">onmove_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">span_stays</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">button</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="n">_SelectorWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">onselect</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="n">useblit</span><span class="p">,</span>
                                 <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">rectprops</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rectprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

        <span class="n">rectprops</span><span class="p">[</span><span class="s1">'animated'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span>

        <span class="k">if</span> <span class="n">direction</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'horizontal'</span><span class="p">,</span> <span class="s1">'vertical'</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"direction must be 'horizontal' or 'vertical'"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pressv</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rectprops</span> <span class="o">=</span> <span class="n">rectprops</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onmove_callback</span> <span class="o">=</span> <span class="n">onmove_callback</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minspan</span> <span class="o">=</span> <span class="n">minspan</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">span_stays</span> <span class="o">=</span> <span class="n">span_stays</span>

        <span class="c1"># Needed when dragging out of axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prev</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Reset canvas so that `new_axes` connects events.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_axes</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>

<div class="viewcode-block" id="SpanSelector.new_axes"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.SpanSelector.new_axes">[docs]</a>    <span class="k">def</span> <span class="nf">new_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
        <span class="sd">"""Set SpanSelector to operate on a new Axes"""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">disconnect_events</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connect_default_events</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="s1">'horizontal'</span><span class="p">:</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">blended_transform_factory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
            <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">blended_transform_factory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
            <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span>
                              <span class="n">transform</span><span class="o">=</span><span class="n">trans</span><span class="p">,</span>
                              <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                              <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">rectprops</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">span_stays</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stay_rect</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span>
                                       <span class="n">transform</span><span class="o">=</span><span class="n">trans</span><span class="p">,</span>
                                       <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                       <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">rectprops</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stay_rect</span><span class="o">.</span><span class="n">set_animated</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stay_rect</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artists</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">]</span></div>

<div class="viewcode-block" id="SpanSelector.ignore"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.SpanSelector.ignore">[docs]</a>    <span class="k">def</span> <span class="nf">ignore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""return *True* if *event* should be ignored"""</span>
        <span class="k">return</span> <span class="n">_SelectorWidget</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible</span></div>

    <span class="k">def</span> <span class="nf">_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""on button press event"""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">visible</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">span_stays</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stay_rect</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="c1"># really force a draw so that the stay rect is not in</span>
            <span class="c1"># the blit background</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="s1">'horizontal'</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pressv</span> <span class="o">=</span> <span class="n">xdata</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pressv</span> <span class="o">=</span> <span class="n">ydata</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""on button release event"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressv</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttonDown</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">span_stays</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stay_rect</span><span class="o">.</span><span class="n">set_x</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">get_x</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stay_rect</span><span class="o">.</span><span class="n">set_y</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">get_y</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stay_rect</span><span class="o">.</span><span class="n">set_width</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stay_rect</span><span class="o">.</span><span class="n">set_height</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stay_rect</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressv</span>
        <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="s1">'horizontal'</span><span class="p">:</span>
            <span class="n">vmax</span> <span class="o">=</span> <span class="n">xdata</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vmax</span> <span class="o">=</span> <span class="n">ydata</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">vmin</span> <span class="o">&gt;</span> <span class="n">vmax</span><span class="p">:</span>
            <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">vmin</span>
        <span class="n">span</span> <span class="o">=</span> <span class="n">vmax</span> <span class="o">-</span> <span class="n">vmin</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minspan</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">span</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">minspan</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onselect</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pressv</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_onmove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""on motion notify event"""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressv</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">prev</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="s1">'horizontal'</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">x</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">y</span>

        <span class="n">minv</span><span class="p">,</span> <span class="n">maxv</span> <span class="o">=</span> <span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressv</span>
        <span class="k">if</span> <span class="n">minv</span> <span class="o">&gt;</span> <span class="n">maxv</span><span class="p">:</span>
            <span class="n">minv</span><span class="p">,</span> <span class="n">maxv</span> <span class="o">=</span> <span class="n">maxv</span><span class="p">,</span> <span class="n">minv</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="s1">'horizontal'</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">set_x</span><span class="p">(</span><span class="n">minv</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">set_width</span><span class="p">(</span><span class="n">maxv</span> <span class="o">-</span> <span class="n">minv</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">set_y</span><span class="p">(</span><span class="n">minv</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">set_height</span><span class="p">(</span><span class="n">maxv</span> <span class="o">-</span> <span class="n">minv</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">onmove_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressv</span>
            <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">==</span> <span class="s1">'horizontal'</span><span class="p">:</span>
                <span class="n">vmax</span> <span class="o">=</span> <span class="n">xdata</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vmax</span> <span class="o">=</span> <span class="n">ydata</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">vmin</span> <span class="o">&gt;</span> <span class="n">vmax</span><span class="p">:</span>
                <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">vmin</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">onmove_callback</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="ToolHandles"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.ToolHandles">[docs]</a><span class="k">class</span> <span class="nc">ToolHandles</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">"""Control handles for canvas tools.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax : :class:`matplotlib.axes.Axes`</span>
<span class="sd">        Matplotlib axes where tool handles are displayed.</span>
<span class="sd">    x, y : 1D arrays</span>
<span class="sd">        Coordinates of control handles.</span>
<span class="sd">    marker : str</span>
<span class="sd">        Shape of marker used to display handle. See `matplotlib.pyplot.plot`.</span>
<span class="sd">    marker_props : dict</span>
<span class="sd">        Additional marker properties. See :class:`matplotlib.lines.Line2D`.</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">'o'</span><span class="p">,</span> <span class="n">marker_props</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span>

        <span class="n">props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">mfc</span><span class="o">=</span><span class="s1">'w'</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">'none'</span><span class="p">,</span>
                     <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">'_nolegend_'</span><span class="p">)</span>
        <span class="n">props</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">marker_props</span> <span class="k">if</span> <span class="n">marker_props</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markers</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">animated</span><span class="o">=</span><span class="n">useblit</span><span class="p">,</span> <span class="o">**</span><span class="n">props</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_markers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_markers</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_markers</span><span class="o">.</span><span class="n">get_xdata</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_markers</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">()</span>

<div class="viewcode-block" id="ToolHandles.set_data"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.ToolHandles.set_data">[docs]</a>    <span class="k">def</span> <span class="nf">set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pts</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">"""Set x and y positions of handles"""</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">pts</span>
            <span class="n">pts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markers</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span></div>

<div class="viewcode-block" id="ToolHandles.set_visible"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.ToolHandles.set_visible">[docs]</a>    <span class="k">def</span> <span class="nf">set_visible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markers</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></div>

<div class="viewcode-block" id="ToolHandles.set_animated"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.ToolHandles.set_animated">[docs]</a>    <span class="k">def</span> <span class="nf">set_animated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markers</span><span class="o">.</span><span class="n">set_animated</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></div>

<div class="viewcode-block" id="ToolHandles.closest"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.ToolHandles.closest">[docs]</a>    <span class="k">def</span> <span class="nf">closest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">"""Return index and pixel distance to closest index."""</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
        <span class="c1"># Transform data coordinates to pixel coordinates.</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="n">pts</span> <span class="o">-</span> <span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">diff</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">diff</span> <span class="o">**</span> <span class="mi">2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">dist</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">dist</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">diff</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="RectangleSelector"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.RectangleSelector">[docs]</a><span class="k">class</span> <span class="nc">RectangleSelector</span><span class="p">(</span><span class="n">_SelectorWidget</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Select a rectangular region of an axes.</span>

<span class="sd">    For the cursor to remain responsive you must keep a reference to</span>
<span class="sd">    it.</span>

<span class="sd">    Example usage::</span>

<span class="sd">        from matplotlib.widgets import  RectangleSelector</span>
<span class="sd">        from pylab import *</span>

<span class="sd">        def onselect(eclick, erelease):</span>
<span class="sd">          'eclick and erelease are matplotlib events at press and release'</span>
<span class="sd">          print(' startposition : (%f, %f)' % (eclick.xdata, eclick.ydata))</span>
<span class="sd">          print(' endposition   : (%f, %f)' % (erelease.xdata, erelease.ydata))</span>
<span class="sd">          print(' used button   : ', eclick.button)</span>

<span class="sd">        def toggle_selector(event):</span>
<span class="sd">            print(' Key pressed.')</span>
<span class="sd">            if event.key in ['Q', 'q'] and toggle_selector.RS.active:</span>
<span class="sd">                print(' RectangleSelector deactivated.')</span>
<span class="sd">                toggle_selector.RS.set_active(False)</span>
<span class="sd">            if event.key in ['A', 'a'] and not toggle_selector.RS.active:</span>
<span class="sd">                print(' RectangleSelector activated.')</span>
<span class="sd">                toggle_selector.RS.set_active(True)</span>

<span class="sd">        x = arange(100)/(99.0)</span>
<span class="sd">        y = sin(x)</span>
<span class="sd">        fig = figure</span>
<span class="sd">        ax = subplot(111)</span>
<span class="sd">        ax.plot(x,y)</span>

<span class="sd">        toggle_selector.RS = RectangleSelector(ax, onselect, drawtype='line')</span>
<span class="sd">        connect('key_press_event', toggle_selector)</span>
<span class="sd">        show()</span>
<span class="sd">    """</span>

    <span class="n">_shape_klass</span> <span class="o">=</span> <span class="n">Rectangle</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">onselect</span><span class="p">,</span> <span class="n">drawtype</span><span class="o">=</span><span class="s1">'box'</span><span class="p">,</span>
                 <span class="n">minspanx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minspany</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">lineprops</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rectprops</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">spancoords</span><span class="o">=</span><span class="s1">'data'</span><span class="p">,</span>
                 <span class="n">button</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxdist</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">marker_props</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">interactive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">state_modifier_keys</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="sd">"""</span>
<span class="sd">        Create a selector in *ax*.  When a selection is made, clear</span>
<span class="sd">        the span and call onselect with::</span>

<span class="sd">          onselect(pos_1, pos_2)</span>

<span class="sd">        and clear the drawn box/line. The ``pos_1`` and ``pos_2`` are</span>
<span class="sd">        arrays of length 2 containing the x- and y-coordinate.</span>

<span class="sd">        If *minspanx* is not *None* then events smaller than *minspanx*</span>
<span class="sd">        in x direction are ignored (it's the same for y).</span>

<span class="sd">        The rectangle is drawn with *rectprops*; default::</span>

<span class="sd">          rectprops = dict(facecolor='red', edgecolor = 'black',</span>
<span class="sd">                           alpha=0.2, fill=True)</span>

<span class="sd">        The line is drawn with *lineprops*; default::</span>

<span class="sd">          lineprops = dict(color='black', linestyle='-',</span>
<span class="sd">                           linewidth = 2, alpha=0.5)</span>

<span class="sd">        Use *drawtype* if you want the mouse to draw a line,</span>
<span class="sd">        a box or nothing between click and actual position by setting</span>

<span class="sd">        ``drawtype = 'line'``, ``drawtype='box'`` or ``drawtype = 'none'``.</span>
<span class="sd">        Drawing a line would result in a line from vertex A to vertex C in</span>
<span class="sd">        a rectangle ABCD.</span>

<span class="sd">        *spancoords* is one of 'data' or 'pixels'.  If 'data', *minspanx*</span>
<span class="sd">        and *minspanx* will be interpreted in the same coordinates as</span>
<span class="sd">        the x and y axis. If 'pixels', they are in pixels.</span>

<span class="sd">        *button* is a list of integers indicating which mouse buttons should</span>
<span class="sd">        be used for rectangle selection.  You can also specify a single</span>
<span class="sd">        integer if only a single button is desired.  Default is *None*,</span>
<span class="sd">        which does not limit which button can be used.</span>

<span class="sd">        Note, typically:</span>
<span class="sd">         1 = left mouse button</span>
<span class="sd">         2 = center mouse button (scroll wheel)</span>
<span class="sd">         3 = right mouse button</span>

<span class="sd">        *interactive* will draw a set of handles and allow you interact</span>
<span class="sd">        with the widget after it is drawn.</span>

<span class="sd">        *state_modifier_keys* are keyboard modifiers that affect the behavior</span>
<span class="sd">        of the widget.</span>

<span class="sd">        The defaults are:</span>
<span class="sd">        dict(move=' ', clear='escape', square='shift', center='ctrl')</span>

<span class="sd">        Keyboard modifiers, which:</span>
<span class="sd">        'move': Move the existing shape.</span>
<span class="sd">        'clear': Clear the current shape.</span>
<span class="sd">        'square': Makes the shape square.</span>
<span class="sd">        'center': Make the initial point the center of the shape.</span>
<span class="sd">        'square' and 'center' can be combined.</span>
<span class="sd">        """</span>
        <span class="n">_SelectorWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">onselect</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="n">useblit</span><span class="p">,</span>
                                 <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">,</span>
                                 <span class="n">state_modifier_keys</span><span class="o">=</span><span class="n">state_modifier_keys</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interactive</span> <span class="o">=</span> <span class="n">interactive</span>

        <span class="k">if</span> <span class="n">drawtype</span> <span class="o">==</span> <span class="s1">'none'</span><span class="p">:</span>
            <span class="n">drawtype</span> <span class="o">=</span> <span class="s1">'line'</span>                        <span class="c1"># draw a line but make it</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>                     <span class="c1"># invisible</span>

        <span class="k">if</span> <span class="n">drawtype</span> <span class="o">==</span> <span class="s1">'box'</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rectprops</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">rectprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span>
                                 <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">rectprops</span><span class="p">[</span><span class="s1">'animated'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rectprops</span> <span class="o">=</span> <span class="n">rectprops</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shape_klass</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                             <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">rectprops</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">drawtype</span> <span class="o">==</span> <span class="s1">'line'</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lineprops</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">lineprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'-'</span><span class="p">,</span>
                                 <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">lineprops</span><span class="p">[</span><span class="s1">'animated'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lineprops</span> <span class="o">=</span> <span class="n">lineprops</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                  <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">lineprops</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">minspanx</span> <span class="o">=</span> <span class="n">minspanx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minspany</span> <span class="o">=</span> <span class="n">minspany</span>

        <span class="k">if</span> <span class="n">spancoords</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="s1">'pixels'</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"'spancoords' must be 'data' or 'pixels'"</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">spancoords</span> <span class="o">=</span> <span class="n">spancoords</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drawtype</span> <span class="o">=</span> <span class="n">drawtype</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">maxdist</span> <span class="o">=</span> <span class="n">maxdist</span>

        <span class="k">if</span> <span class="n">rectprops</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">mec</span><span class="o">=</span><span class="s1">'r'</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">mec</span><span class="o">=</span><span class="n">rectprops</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'edgecolor'</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_corner_order</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'NW'</span><span class="p">,</span> <span class="s1">'NE'</span><span class="p">,</span> <span class="s1">'SE'</span><span class="p">,</span> <span class="s1">'SW'</span><span class="p">]</span>
        <span class="n">xc</span><span class="p">,</span> <span class="n">yc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">corners</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_corner_handles</span> <span class="o">=</span> <span class="n">ToolHandles</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span> <span class="n">xc</span><span class="p">,</span> <span class="n">yc</span><span class="p">,</span> <span class="n">marker_props</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
                                           <span class="n">useblit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_edge_order</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'W'</span><span class="p">,</span> <span class="s1">'N'</span><span class="p">,</span> <span class="s1">'E'</span><span class="p">,</span> <span class="s1">'S'</span><span class="p">]</span>
        <span class="n">xe</span><span class="p">,</span> <span class="n">ye</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_centers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edge_handles</span> <span class="o">=</span> <span class="n">ToolHandles</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span> <span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">'s'</span><span class="p">,</span>
                                         <span class="n">marker_props</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
                                         <span class="n">useblit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">)</span>

        <span class="n">xc</span><span class="p">,</span> <span class="n">yc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_center_handle</span> <span class="o">=</span> <span class="n">ToolHandles</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span> <span class="p">[</span><span class="n">xc</span><span class="p">],</span> <span class="p">[</span><span class="n">yc</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s1">'s'</span><span class="p">,</span>
                                          <span class="n">marker_props</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
                                          <span class="n">useblit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">artists</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_center_handle</span><span class="o">.</span><span class="n">artist</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_corner_handles</span><span class="o">.</span><span class="n">artist</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edge_handles</span><span class="o">.</span><span class="n">artist</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">interactive</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">artists</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_extents_on_press</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""on button press event"""</span>
        <span class="c1"># make the drawed box/line visible get the click-coordinates,</span>
        <span class="c1"># button, ...</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">interactive</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_active_handle</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">interactive</span><span class="p">:</span>
            <span class="c1"># Clear previous rectangle before drawing new rectangle.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">visible</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""on button release event"""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">interactive</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># update the eventpress and eventrelease with the resulting extents</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extents</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">xdata</span> <span class="o">=</span> <span class="n">x1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">ydata</span> <span class="o">=</span> <span class="n">y1</span>
        <span class="n">xy1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform_point</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">xy1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">eventrelease</span><span class="o">.</span><span class="n">xdata</span> <span class="o">=</span> <span class="n">x2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eventrelease</span><span class="o">.</span><span class="n">ydata</span> <span class="o">=</span> <span class="n">y2</span>
        <span class="n">xy2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform_point</span><span class="p">([</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eventrelease</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventrelease</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">xy2</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spancoords</span> <span class="o">==</span> <span class="s1">'data'</span><span class="p">:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">ydata</span>
            <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventrelease</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventrelease</span><span class="o">.</span><span class="n">ydata</span>
            <span class="c1"># calculate dimensions of box or line get values in the right</span>
            <span class="c1"># order</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">spancoords</span> <span class="o">==</span> <span class="s1">'pixels'</span><span class="p">:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">y</span>
            <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventrelease</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventrelease</span><span class="o">.</span><span class="n">y</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'spancoords must be "data" or "pixels"'</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xmin</span> <span class="o">&gt;</span> <span class="n">xmax</span><span class="p">:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">xmin</span>
        <span class="k">if</span> <span class="n">ymin</span> <span class="o">&gt;</span> <span class="n">ymax</span><span class="p">:</span>
            <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">ymin</span>

        <span class="n">spanx</span> <span class="o">=</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span>
        <span class="n">spany</span> <span class="o">=</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span>
        <span class="n">xproblems</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minspanx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">spanx</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">minspanx</span>
        <span class="n">yproblems</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minspany</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">spany</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">minspany</span>

        <span class="c1"># check if drawn distance (if it exists) is not too small in</span>
        <span class="c1"># either x or y-direction</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawtype</span> <span class="o">!=</span> <span class="s1">'none'</span> <span class="ow">and</span> <span class="p">(</span><span class="n">xproblems</span> <span class="ow">or</span> <span class="n">yproblems</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="p">:</span>
                <span class="n">artist</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="c1"># call desired function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onselect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventrelease</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_onmove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""on motion notify event if box/line is wanted"""</span>
        <span class="c1"># resize an existing shape</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="o">==</span> <span class="s1">'C'</span><span class="p">:</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extents_on_press</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'E'</span><span class="p">,</span> <span class="s1">'W'</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_corner_order</span><span class="p">:</span>
                <span class="n">x2</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'N'</span><span class="p">,</span> <span class="s1">'S'</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_corner_order</span><span class="p">:</span>
                <span class="n">y2</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span>

        <span class="c1"># move existing shape</span>
        <span class="k">elif</span> <span class="p">((</span><span class="s1">'move'</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="o">==</span> <span class="s1">'C'</span><span class="p">)</span>
              <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extents_on_press</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extents_on_press</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">xdata</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">ydata</span>
            <span class="n">x1</span> <span class="o">+=</span> <span class="n">dx</span>
            <span class="n">x2</span> <span class="o">+=</span> <span class="n">dx</span>
            <span class="n">y1</span> <span class="o">+=</span> <span class="n">dy</span>
            <span class="n">y2</span> <span class="o">+=</span> <span class="n">dy</span>

        <span class="c1"># new shape</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">ydata</span><span class="p">]</span>
            <span class="n">center_pix</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">y</span><span class="p">]</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span> <span class="o">-</span> <span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mf">2.</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span> <span class="o">-</span> <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mf">2.</span>

            <span class="c1"># square shape</span>
            <span class="k">if</span> <span class="s1">'square'</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">:</span>
                <span class="n">dx_pix</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">center_pix</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">dy_pix</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">center_pix</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">dx_pix</span><span class="p">:</span>
                    <span class="k">return</span>
                <span class="n">maxd</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">dx_pix</span><span class="p">),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy_pix</span><span class="p">))</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx_pix</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">maxd</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">*=</span> <span class="n">maxd</span> <span class="o">/</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">dx_pix</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1e-6</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy_pix</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">maxd</span><span class="p">:</span>
                    <span class="n">dy</span> <span class="o">*=</span> <span class="n">maxd</span> <span class="o">/</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">dy_pix</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1e-6</span><span class="p">)</span>

            <span class="c1"># from center</span>
            <span class="k">if</span> <span class="s1">'center'</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">:</span>
                <span class="n">dx</span> <span class="o">*=</span> <span class="mi">2</span>
                <span class="n">dy</span> <span class="o">*=</span> <span class="mi">2</span>

            <span class="c1"># from corner</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">dx</span>
                <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">dy</span>

            <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="p">(</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">dx</span><span class="p">,</span> <span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span>
                              <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">dy</span><span class="p">,</span> <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">extents</span> <span class="o">=</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_rect_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawtype</span> <span class="o">==</span> <span class="s1">'box'</span><span class="p">:</span>
            <span class="n">x0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span>
            <span class="n">y0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span>
            <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
            <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">corners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Corners of rectangle from lower left, moving clockwise."""</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rect_bbox</span>
        <span class="n">xc</span> <span class="o">=</span> <span class="n">x0</span><span class="p">,</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">x0</span>
        <span class="n">yc</span> <span class="o">=</span> <span class="n">y0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">height</span><span class="p">,</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">height</span>
        <span class="k">return</span> <span class="n">xc</span><span class="p">,</span> <span class="n">yc</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">edge_centers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Midpoint of rectangle edges from left, moving clockwise."""</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rect_bbox</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">width</span> <span class="o">/</span> <span class="mf">2.</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">height</span> <span class="o">/</span> <span class="mf">2.</span>
        <span class="n">xe</span> <span class="o">=</span> <span class="n">x0</span><span class="p">,</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">w</span>
        <span class="n">ye</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">h</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">h</span><span class="p">,</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">height</span>
        <span class="k">return</span> <span class="n">xe</span><span class="p">,</span> <span class="n">ye</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">center</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Center of rectangle"""</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rect_bbox</span>
        <span class="k">return</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">width</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">height</span> <span class="o">/</span> <span class="mf">2.</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">extents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Return (xmin, xmax, ymin, ymax)."""</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rect_bbox</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">width</span><span class="p">])</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">y0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">height</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span>

    <span class="nd">@extents</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">extents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extents</span><span class="p">):</span>
        <span class="c1"># Update displayed shape</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_shape</span><span class="p">(</span><span class="n">extents</span><span class="p">)</span>
        <span class="c1"># Update displayed handles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_corner_handles</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">corners</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edge_handles</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">edge_centers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_center_handle</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">visible</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

<div class="viewcode-block" id="RectangleSelector.draw_shape"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.RectangleSelector.draw_shape">[docs]</a>    <span class="k">def</span> <span class="nf">draw_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extents</span><span class="p">):</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">extents</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">])</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">])</span>
        <span class="n">xlim</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>
        <span class="n">ylim</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">())</span>

        <span class="n">xmin</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xmin</span><span class="p">)</span>
        <span class="n">ymin</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ymin</span><span class="p">)</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymax</span><span class="p">,</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawtype</span> <span class="o">==</span> <span class="s1">'box'</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">set_x</span><span class="p">(</span><span class="n">xmin</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">set_y</span><span class="p">(</span><span class="n">ymin</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">set_width</span><span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">set_height</span><span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawtype</span> <span class="o">==</span> <span class="s1">'line'</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">set_data</span><span class="p">([</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">],</span> <span class="p">[</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">])</span></div>

    <span class="k">def</span> <span class="nf">_set_active_handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Set active handle based on the location of the mouse event"""</span>
        <span class="c1"># Note: event.xdata/ydata in data coordinates, event.x/y in pixels</span>
        <span class="n">c_idx</span><span class="p">,</span> <span class="n">c_dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_corner_handles</span><span class="o">.</span><span class="n">closest</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">e_idx</span><span class="p">,</span> <span class="n">e_dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edge_handles</span><span class="o">.</span><span class="n">closest</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">m_idx</span><span class="p">,</span> <span class="n">m_dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_center_handle</span><span class="o">.</span><span class="n">closest</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">'move'</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="o">=</span> <span class="s1">'C'</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_extents_on_press</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extents</span>

        <span class="c1"># Set active handle as closest handle, if mouse click is close enough.</span>
        <span class="k">elif</span> <span class="n">m_dist</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxdist</span> <span class="o">*</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="o">=</span> <span class="s1">'C'</span>
        <span class="k">elif</span> <span class="n">c_dist</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxdist</span> <span class="ow">and</span> <span class="n">e_dist</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxdist</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="n">c_dist</span> <span class="o">&lt;</span> <span class="n">e_dist</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_corner_order</span><span class="p">[</span><span class="n">c_idx</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edge_order</span><span class="p">[</span><span class="n">e_idx</span><span class="p">]</span>

        <span class="c1"># Save coordinates of rectangle at the start of handle movement.</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extents</span>
        <span class="c1"># Switch variables so that only x2 and/or y2 are updated on move.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'W'</span><span class="p">,</span> <span class="s1">'SW'</span><span class="p">,</span> <span class="s1">'NW'</span><span class="p">]:</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">x2</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_handle</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'N'</span><span class="p">,</span> <span class="s1">'NW'</span><span class="p">,</span> <span class="s1">'NE'</span><span class="p">]:</span>
            <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">y2</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extents_on_press</span> <span class="o">=</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">geometry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns numpy.ndarray of shape (2,5) containing</span>
<span class="sd">        x (``RectangleSelector.geometry[1,:]``) and</span>
<span class="sd">        y (``RectangleSelector.geometry[0,:]``)</span>
<span class="sd">        coordinates of the four corners of the rectangle starting</span>
<span class="sd">        and ending in the top left corner.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="p">,</span> <span class="s1">'get_verts'</span><span class="p">):</span>
            <span class="n">xfm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
            <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">xfm</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">get_verts</span><span class="p">())</span><span class="o">.</span><span class="n">T</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">get_data</span><span class="p">())</span></div>


<div class="viewcode-block" id="EllipseSelector"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.EllipseSelector">[docs]</a><span class="k">class</span> <span class="nc">EllipseSelector</span><span class="p">(</span><span class="n">RectangleSelector</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Select an elliptical region of an axes.</span>

<span class="sd">    For the cursor to remain responsive you must keep a reference to</span>
<span class="sd">    it.</span>

<span class="sd">    Example usage::</span>

<span class="sd">        from matplotlib.widgets import  EllipseSelector</span>
<span class="sd">        from pylab import *</span>

<span class="sd">        def onselect(eclick, erelease):</span>
<span class="sd">          'eclick and erelease are matplotlib events at press and release'</span>
<span class="sd">          print(' startposition : (%f, %f)' % (eclick.xdata, eclick.ydata))</span>
<span class="sd">          print(' endposition   : (%f, %f)' % (erelease.xdata, erelease.ydata))</span>
<span class="sd">          print(' used button   : ', eclick.button)</span>

<span class="sd">        def toggle_selector(event):</span>
<span class="sd">            print(' Key pressed.')</span>
<span class="sd">            if event.key in ['Q', 'q'] and toggle_selector.ES.active:</span>
<span class="sd">                print(' EllipseSelector deactivated.')</span>
<span class="sd">                toggle_selector.RS.set_active(False)</span>
<span class="sd">            if event.key in ['A', 'a'] and not toggle_selector.ES.active:</span>
<span class="sd">                print(' EllipseSelector activated.')</span>
<span class="sd">                toggle_selector.ES.set_active(True)</span>

<span class="sd">        x = arange(100)/(99.0)</span>
<span class="sd">        y = sin(x)</span>
<span class="sd">        fig = figure</span>
<span class="sd">        ax = subplot(111)</span>
<span class="sd">        ax.plot(x,y)</span>

<span class="sd">        toggle_selector.ES = EllipseSelector(ax, onselect, drawtype='line')</span>
<span class="sd">        connect('key_press_event', toggle_selector)</span>
<span class="sd">        show()</span>
<span class="sd">    """</span>
    <span class="n">_shape_klass</span> <span class="o">=</span> <span class="n">Ellipse</span>

<div class="viewcode-block" id="EllipseSelector.draw_shape"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.EllipseSelector.draw_shape">[docs]</a>    <span class="k">def</span> <span class="nf">draw_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extents</span><span class="p">):</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">extents</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">])</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">])</span>
        <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="n">x1</span> <span class="o">+</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">y1</span> <span class="o">+</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">]</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span>
        <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawtype</span> <span class="o">==</span> <span class="s1">'box'</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">center</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">a</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">b</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rad</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span> <span class="o">*</span> <span class="mi">12</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span> <span class="o">+</span> <span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span> <span class="o">+</span> <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_rect_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawtype</span> <span class="o">==</span> <span class="s1">'box'</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">center</span>
            <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">width</span>
            <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">height</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="n">width</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">height</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_draw</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span></div>


<div class="viewcode-block" id="LassoSelector"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.LassoSelector">[docs]</a><span class="k">class</span> <span class="nc">LassoSelector</span><span class="p">(</span><span class="n">_SelectorWidget</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Selection curve of an arbitrary shape.</span>

<span class="sd">    For the selector to remain responsive you must keep a reference to it.</span>

<span class="sd">    The selected path can be used in conjunction with `~.Path.contains_point`</span>
<span class="sd">    to select data points from an image.</span>

<span class="sd">    In contrast to `Lasso`, `LassoSelector` is written with an interface</span>
<span class="sd">    similar to `RectangleSelector` and `SpanSelector`, and will continue to</span>
<span class="sd">    interact with the axes until disconnected.</span>

<span class="sd">    Example usage::</span>

<span class="sd">        ax = subplot(111)</span>
<span class="sd">        ax.plot(x,y)</span>

<span class="sd">        def onselect(verts):</span>
<span class="sd">            print(verts)</span>
<span class="sd">        lasso = LassoSelector(ax, onselect)</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax : :class:`~matplotlib.axes.Axes`</span>
<span class="sd">        The parent axes for the widget.</span>
<span class="sd">    onselect : function</span>
<span class="sd">        Whenever the lasso is released, the *onselect* function is called and</span>
<span class="sd">        passed the vertices of the selected path.</span>
<span class="sd">    button : List[Int], optional</span>
<span class="sd">        A list of integers indicating which mouse buttons should be used for</span>
<span class="sd">        rectangle selection. You can also specify a single integer if only a</span>
<span class="sd">        single button is desired.  Default is ``None``, which does not limit</span>
<span class="sd">        which button can be used.</span>

<span class="sd">        Note, typically:</span>

<span class="sd">        - 1 = left mouse button</span>
<span class="sd">        - 2 = center mouse button (scroll wheel)</span>
<span class="sd">        - 3 = right mouse button</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">onselect</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lineprops</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">button</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">_SelectorWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">onselect</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="n">useblit</span><span class="p">,</span>
                                 <span class="n">button</span><span class="o">=</span><span class="n">button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verts</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">lineprops</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lineprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">useblit</span><span class="p">:</span>
            <span class="n">lineprops</span><span class="p">[</span><span class="s1">'animated'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">([],</span> <span class="p">[],</span> <span class="o">**</span><span class="n">lineprops</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artists</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">]</span>

<div class="viewcode-block" id="LassoSelector.onpress"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.LassoSelector.onpress">[docs]</a>    <span class="k">def</span> <span class="nf">onpress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">press</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verts</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_data</span><span class="p">(</span><span class="n">event</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="LassoSelector.onrelease"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.LassoSelector.onrelease">[docs]</a>    <span class="k">def</span> <span class="nf">onrelease</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">release</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_data</span><span class="p">(</span><span class="n">event</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">onselect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">verts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">([[],</span> <span class="p">[]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verts</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_onmove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_data</span><span class="p">(</span><span class="n">event</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">verts</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>


<div class="viewcode-block" id="PolygonSelector"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.PolygonSelector">[docs]</a><span class="k">class</span> <span class="nc">PolygonSelector</span><span class="p">(</span><span class="n">_SelectorWidget</span><span class="p">):</span>
    <span class="sd">"""Select a polygon region of an axes.</span>

<span class="sd">    Place vertices with each mouse click, and make the selection by completing</span>
<span class="sd">    the polygon (clicking on the first vertex). Hold the *ctrl* key and click</span>
<span class="sd">    and drag a vertex to reposition it (the *ctrl* key is not necessary if the</span>
<span class="sd">    polygon has already been completed). Hold the *shift* key and click and</span>
<span class="sd">    drag anywhere in the axes to move all vertices. Press the *esc* key to</span>
<span class="sd">    start a new polygon.</span>

<span class="sd">    For the selector to remain responsive you must keep a reference to</span>
<span class="sd">    it.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax : :class:`~matplotlib.axes.Axes`</span>
<span class="sd">        The parent axes for the widget.</span>
<span class="sd">    onselect : function</span>
<span class="sd">        When a polygon is completed or modified after completion,</span>
<span class="sd">        the `onselect` function is called and passed a list of the vertices as</span>
<span class="sd">        ``(xdata, ydata)`` tuples.</span>
<span class="sd">    useblit : bool, optional</span>
<span class="sd">    lineprops : dict, optional</span>
<span class="sd">        The line for the sides of the polygon is drawn with the properties</span>
<span class="sd">        given by `lineprops`. The default is ``dict(color='k', linestyle='-',</span>
<span class="sd">        linewidth=2, alpha=0.5)``.</span>
<span class="sd">    markerprops : dict, optional</span>
<span class="sd">        The markers for the vertices of the polygon are drawn with the</span>
<span class="sd">        properties given by `markerprops`. The default is ``dict(marker='o',</span>
<span class="sd">        markersize=7, mec='k', mfc='k', alpha=0.5)``.</span>
<span class="sd">    vertex_select_radius : float, optional</span>
<span class="sd">        A vertex is selected (to complete the polygon or to move a vertex)</span>
<span class="sd">        if the mouse click is within `vertex_select_radius` pixels of the</span>
<span class="sd">        vertex. The default radius is 15 pixels.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :ref:`sphx_glr_gallery_widgets_polygon_selector_demo.py`</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">onselect</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">lineprops</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">markerprops</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vertex_select_radius</span><span class="o">=</span><span class="mi">15</span><span class="p">):</span>
        <span class="c1"># The state modifiers 'move', 'square', and 'center' are expected by</span>
        <span class="c1"># _SelectorWidget but are not supported by PolygonSelector</span>
        <span class="c1"># Note: could not use the existing 'move' state modifier in-place of</span>
        <span class="c1"># 'move_all' because _SelectorWidget automatically discards 'move'</span>
        <span class="c1"># from the state on button release.</span>
        <span class="n">state_modifier_keys</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">clear</span><span class="o">=</span><span class="s1">'escape'</span><span class="p">,</span> <span class="n">move_vertex</span><span class="o">=</span><span class="s1">'control'</span><span class="p">,</span>
                                   <span class="n">move_all</span><span class="o">=</span><span class="s1">'shift'</span><span class="p">,</span> <span class="n">move</span><span class="o">=</span><span class="s1">'not-applicable'</span><span class="p">,</span>
                                   <span class="n">square</span><span class="o">=</span><span class="s1">'not-applicable'</span><span class="p">,</span>
                                   <span class="n">center</span><span class="o">=</span><span class="s1">'not-applicable'</span><span class="p">)</span>
        <span class="n">_SelectorWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">onselect</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="n">useblit</span><span class="p">,</span>
                                 <span class="n">state_modifier_keys</span><span class="o">=</span><span class="n">state_modifier_keys</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_completed</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">lineprops</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lineprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">'k'</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'-'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">lineprops</span><span class="p">[</span><span class="s1">'animated'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">,</span> <span class="o">**</span><span class="n">lineprops</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">markerprops</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">markerprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">mec</span><span class="o">=</span><span class="s1">'k'</span><span class="p">,</span> <span class="n">mfc</span><span class="o">=</span><span class="n">lineprops</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'color'</span><span class="p">,</span> <span class="s1">'k'</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_handles</span> <span class="o">=</span> <span class="n">ToolHandles</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">,</span>
                                            <span class="n">useblit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">,</span>
                                            <span class="n">marker_props</span><span class="o">=</span><span class="n">markerprops</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_active_handle_idx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertex_select_radius</span> <span class="o">=</span> <span class="n">vertex_select_radius</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">artists</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_handles</span><span class="o">.</span><span class="n">artist</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Button press event handler"""</span>
        <span class="c1"># Check for selection of a tool handle.</span>
        <span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_polygon_completed</span> <span class="ow">or</span> <span class="s1">'move_vertex'</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">h_idx</span><span class="p">,</span> <span class="n">h_dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_handles</span><span class="o">.</span><span class="n">closest</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">h_dist</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex_select_radius</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_active_handle_idx</span> <span class="o">=</span> <span class="n">h_idx</span>
        <span class="c1"># Save the vertex positions at the time of the press event (needed to</span>
        <span class="c1"># support the 'move_all' state modifier).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xs_at_press</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys_at_press</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[:],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[:]</span>

    <span class="k">def</span> <span class="nf">_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Button release event handler"""</span>
        <span class="c1"># Release active tool handle.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_handle_idx</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_handle_idx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="c1"># Complete the polygon.</span>
        <span class="k">elif</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span>
              <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
              <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_completed</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Place new vertex.</span>
        <span class="k">elif</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_completed</span>
              <span class="ow">and</span> <span class="s1">'move_all'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>
              <span class="ow">and</span> <span class="s1">'move_vertex'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_completed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">onselect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">verts</span><span class="p">)</span>

<div class="viewcode-block" id="PolygonSelector.onmove"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.PolygonSelector.onmove">[docs]</a>    <span class="k">def</span> <span class="nf">onmove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Cursor move event handler and validator"""</span>
        <span class="c1"># Method overrides _SelectorWidget.onmove because the polygon selector</span>
        <span class="c1"># needs to process the move callback even if there is no button press.</span>
        <span class="c1"># _SelectorWidget.onmove include logic to ignore move event if</span>
        <span class="c1"># eventpress is None.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clean_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_onmove</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="k">def</span> <span class="nf">_onmove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Cursor move event handler"""</span>
        <span class="c1"># Move the active vertex (ToolHandle).</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_handle_idx</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_handle_idx</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span>
            <span class="c1"># Also update the end of the polygon line if the first vertex is</span>
            <span class="c1"># the active handle and the polygon is completed.</span>
            <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_completed</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span>

        <span class="c1"># Move all vertices.</span>
        <span class="k">elif</span> <span class="s1">'move_all'</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="p">:</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">xdata</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventpress</span><span class="o">.</span><span class="n">ydata</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xs_at_press</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="n">dx</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys_at_press</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="n">dy</span>

        <span class="c1"># Do nothing if completed or waiting for a move.</span>
        <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_polygon_completed</span>
              <span class="ow">or</span> <span class="s1">'move_vertex'</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="ow">or</span> <span class="s1">'move_all'</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="c1"># Position pending vertex.</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Calculate distance to the start vertex.</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                                          <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">v0_dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x0</span> <span class="o">-</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y0</span> <span class="o">-</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
            <span class="c1"># Lock on to the start vertex if near it and ready to complete.</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">v0_dist</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex_select_radius</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_draw_polygon</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_on_key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Key press event handler"""</span>
        <span class="c1"># Remove the pending vertex if entering the 'move_vertex' or</span>
        <span class="c1"># 'move_all' mode</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_completed</span>
                <span class="ow">and</span> <span class="p">(</span><span class="s1">'move_vertex'</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="ow">or</span> <span class="s1">'move_all'</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_polygon</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_on_key_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">"""Key release event handler"""</span>
        <span class="c1"># Add back the pending vertex if leaving the 'move_vertex' or</span>
        <span class="c1"># 'move_all' mode (by checking the released key)</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_completed</span>
                <span class="ow">and</span>
                <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_modifier_keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'move_vertex'</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_modifier_keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'move_all'</span><span class="p">))):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_polygon</span><span class="p">()</span>
        <span class="c1"># Reset the polygon if the released key is the 'clear' key.</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_modifier_keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'clear'</span><span class="p">):</span>
            <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clean_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span> <span class="o">=</span> <span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">],</span> <span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_completed</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_draw_polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Redraw the polygon based on the new vertex positions."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">)</span>
        <span class="c1"># Only show one tool handle at the start and end vertex of the polygon</span>
        <span class="c1"># if the polygon is completed or the user is locked on to the start</span>
        <span class="c1"># vertex.</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_polygon_completed</span>
                <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[</span><span class="mi">0</span><span class="p">])):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_handles</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_handles</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">verts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Get the polygon vertices.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            A list of the vertices of the polygon as ``(xdata, ydata)`` tuples.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span></div>


<div class="viewcode-block" id="Lasso"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Lasso">[docs]</a><span class="k">class</span> <span class="nc">Lasso</span><span class="p">(</span><span class="n">AxesWidget</span><span class="p">):</span>
    <span class="sd">"""Selection curve of an arbitrary shape.</span>

<span class="sd">    The selected path can be used in conjunction with</span>
<span class="sd">    :func:`~matplotlib.path.Path.contains_point` to select data points</span>
<span class="sd">    from an image.</span>

<span class="sd">    Unlike :class:`LassoSelector`, this must be initialized with a starting</span>
<span class="sd">    point `xy`, and the `Lasso` events are destroyed upon release.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax : `~matplotlib.axes.Axes`</span>
<span class="sd">        The parent axes for the widget.</span>
<span class="sd">    xy : array</span>
<span class="sd">        Coordinates of the start of the lasso.</span>
<span class="sd">    callback : callable</span>
<span class="sd">        Whenever the lasso is released, the `callback` function is called and</span>
<span class="sd">        passed the vertices of the selected path.</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">xy</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">AxesWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span> <span class="o">=</span> <span class="n">useblit</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">supports_blit</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">copy_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">xy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verts</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">([</span><span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="n">y</span><span class="p">],</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'-'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callback</span> <span class="o">=</span> <span class="n">callback</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'button_release_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onrelease</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_event</span><span class="p">(</span><span class="s1">'motion_notify_event'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onmove</span><span class="p">)</span>

<div class="viewcode-block" id="Lasso.onrelease"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Lasso.onrelease">[docs]</a>    <span class="k">def</span> <span class="nf">onrelease</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">verts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">verts</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verts</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disconnect_events</span><span class="p">()</span></div>

<div class="viewcode-block" id="Lasso.onmove"><a class="viewcode-back" href="../../api/widgets_api.html#matplotlib.widgets.Lasso.onmove">[docs]</a>    <span class="k">def</span> <span class="nf">onmove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">verts</span><span class="p">)))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">useblit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">restore_region</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">draw_artist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span></div></div>
</pre></div>
</div>
</div>
</div>
<div class="clearer"></div>
</div>
<div class="footer">
        © Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the Matplotlib development team; 2012 - 2018 The Matplotlib development team.
        <br/>
      Last updated on Jun 28, 2018.
	Created using
	<ahref>Sphinx 1.7.5.
	Doc version v2.2.2-101-g15e1eadd0.
    </ahref></div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55954603-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
<footer>
<!--Flipcause Integration v3.0// Flipcause Integration Instructions:
Install the following code block once in the website Header (after <head> tag) -->
<style>

.fc-black_overlay{
display:none; position: fixed; z-index:1000001; top: 0%;left: 0%;width: 100%;height: 100%;
background-color: black; filter: alpha(opacity=50); cursor:pointer; opacity:0.5;
}

.fc-white_content {
opacity:1; display:none; margin-top: -320px; margin-left: -485px; width:970px; height:640px;
position:fixed; top:50%; left:50%; border: none;z-index:1000002;overflow: auto;
}

.fc-main-box{
opacity:1; display:none; margin:15px auto 0 auto; width:930px; position:relative; z-index:1000003;
}

.fc-widget_close{
opacity:1; content:url(http://i1338.photobucket.com/albums/o691/WeCause/X_zpse4a7e538.png);
position:absolute; z-index=1000004; right:-16px; top:-16px; display:block; cursor:pointer;
}

.floating_button{
display: block; margin-top: 0px; margin-left: 0px; width:auto ; height: auto;
position:fixed; z-index:999999; overflow: auto;
}

@keyframes backfadesin {
   from { opacity:0; }
   to {opacity:.5;}
}

@-moz-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@-webkit-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@-o-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}


@-ms-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; transform: translateY(20px);}
   100% {opacity: 1; transform: translateY(0);}
}

@-moz-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -moz-transform: translateY(20px);}
   100% {opacity: 1; -moz-transform: translateY(0);}
}

@-webkit-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -webkit-transform: translateY(20px);}
   100% {opacity: 1; -webkit-transform: translateY(0);}
}

@-o-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -o-transform: translateY(20px);}
   100% {opacity: 1; -o-transform: translateY(0);}
}

@-ms-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -ms-transform: translateY(20px);}
   100% {opacity: 1; -ms-transform: translateY(0);}
}

</style>
<div class="fc-black_overlay" id="fc-fade" onclick="close_window()"></div>
<div class="fc-white_content" id="fc-light">
<div class="fc-main-box" id="fc-main">
<div class="fc-widget_close" id="fc-close" onclick="close_window()">
</div><iframe height="580" id="fc-myFrame" iframe="" scrolling="no" src="" style="border: 0;
border-radius:5px 5px 5px 5px; box-shadow:0 0 8px rgba(0, 0, 0, 0.5);" width="925"></iframe></div>
</div>
<!--END Flipcause Main Integration Code-->
</footer>
</html>